principais:
  - relevance: 'lead'
    cls: 'xs12 md6'
    preloaded:
      prop: "centralindicadores"
      function: "slice"
      id: "06_05_02_99"
      year: 'max'
    args:
      - prop: "value"
        named_prop: 'vl_indicador'
        format: 'inteiro'
        collapse:
          format: 'real'
          precision: 1
        default: "Sem Registros"
      - prop: "description"
        fixed: "Notificações do SINAN - Acidentes de Trabalho Grave (5 a 17 anos)"
      - prop: 'comment'
        template: "Ministério da Saúde/SVS - SINAN, {0}"
        args:
          - named_prop: "nu_competencia"
  - relevance: 'lead'
    cls: 'xs12 md6'
    preloaded:
      prop: "centralindicadores"
      function: "slice"
      id: "06_05_10_99"
      year: "max"
    args:
      - prop: "value"
        named_prop: 'vl_indicador'
        format: 'inteiro'
        collapse:
          format: 'real'
        default: "Sem Registros"
      - prop: "description"
        fixed: "Notificações do SINAN - Total de Notificações Relacionadas ao Trabalho (5 a 17 anos)"
      - prop: 'comment'
        template: "Ministério da Saúde/SVS - SINAN, {0}"
        args:
          - named_prop: "nu_competencia"
# ===================================================
secoes:
  - id: "perfil_sinan"
    name: "Notificações Relacionadas ao Trabalho - Sistema de Informação de Agravos de Notificação (SINAN)"
    cards:

# ====================================================          
      - id: "mapa_sinan_grave_notif"
        title: 
          fixed: "Notificações do SINAN - Acidentes de Trabalho Grave (5 a 17 anos)"
        title_comment:
          template: "Brasil, de {0} a {1}"
          preloaded:
            prop: "centralindicadores"
            function: "slice"
            id: "06_05_02_99"
            year: "max"
          args:
            - named_prop: "nu_competencia_min"
            - named_prop: "nu_competencia_max"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              template: "O Sistema de Informação de Agravos de Notificação - Sinan é alimentado, principalmente, pela notificação e investigação de casos de doenças e agravos que constam da lista nacional de doenças de notificação compulsória (Portaria de Consolidação nº 4, de 28 de Setembro de 2017, anexo V - Capítulo I), mas é facultado a estados e municípios incluir outros problemas de saúde importantes em sua região, como varicela no estado de Minas Gerais ou difilobotríase no município de São Paulo. Sua utilização efetiva permite a realização do diagnóstico dinâmico da ocorrência de um evento na população, podendo fornecer subsídios para explicações causais dos agravos de notificação compulsória, além de vir a indicar riscos aos quais as pessoas estão sujeitas, contribuindo assim, para a identificação da realidade epidemiológica de determinada área geográfica. O seu uso sistemático, de forma descentralizada, contribui para a democratização da informação, permitindo que todos os profissionais de saúde tenham acesso à informação e as tornem disponíveis para a comunidade. É, portanto, um instrumento relevante para auxiliar o planejamento da saúde, definir prioridades de intervenção, além de permitir que seja avaliado o impacto das intervenções.<br/>
                      Os dados brutos analisados têm as seguintes referências fundamentais, para consulta e conferência:<br/>Nome: {0}<br/>Fonte: {1}<br/>Ano: {2} a {3}"
              preloaded:
                prop: "centralindicadores"
                function: "slice"
                id: "06_05_02_99"
                year: "max"
              args:
                - named_prop: 'ds_indicador_radical'
                - named_prop: 'ds_fonte'
                - named_prop: 'nu_competencia_min'
                - named_prop: 'nu_competencia_max'
                    
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12 md6'
                api:
                  template: "/indicadoresnacionais?categorias=nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=sum&filtros=eq-cd_indicador-'06_05_02_99'"
                args:
                  - prop: "value"
                    named_prop: 'agr_sum_vl_indicador'
                    format: 'inteiro'
                    # collapse:
                    #   format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'Casos Notificados'
                  - prop: "comment"
                    template: '{0} a {1}'
                    args:
                      - named_prop: "nu_competencia_min"
                      - named_prop: "nu_competencia_max"
              - relevance: 'high'
                cls: 'xs12 md6'
                api:
                  template: "/indicadoresnacionais?categorias=nu_competencia&valor=vl_indicador&agregacao=sum&filtros=eq-cd_indicador-'06_05_02_99',and,eq-nu_competencia-nu_competencia_max"
                args:
                  - prop: "value"
                    named_prop: 'agr_sum_vl_indicador'
                    format: 'inteiro'
                    # collapse:
                    #   format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'Casos Notificados'
                  - prop: "comment"
                    named_prop: "nu_competencia"
          - type: "text"
            title: ""
            content:
              fixed: "Em destaque, para a unidade geográfica selecionada e no período indicado, informações sobre notificações de acidentes de trabalho grave envolvendo crianças e adolescentes (de 5 até 17 anos) conforme registradas no Sistema de Informação de Agravos de Notificação (SINAN). No mapa ao lado, a escala de cores varia do branco (menor quantidade) para o vermelho (maior quantidade). Ajuste os filtros abaixo para refinar a visualização."
          - id: "slider_ano"
            type: "slider"
            range: true
            api: 
              fixed: "/indicadoresnacionais?categorias=nu_competencia_min,nu_competencia_max&limit=1&filtros=eq-cd_indicador-'06_05_02_99'"
            args:
              - prop: "min"
                named_prop: "nu_competencia_min"
              - prop: "max"
                named_prop: "nu_competencia_max"
            selection:
              event: "selection"
              rules:
                filter: ",and,ge-nu_competencia-'{0}',and,le-nu_competencia-'{1}'"
                api:
                  args:
                    - named_prop: "value_min"
                    - named_prop: "value_max"         
          - id: "select_idade"
            type: "select"
            clearable: false
            label: "Faixa etária"
            default: 
              fixed: "06_05_02_99"
            api:
              - fixed: "/indicadoresnacionais?categorias=cd_indicador,ds_agreg_primaria,ds_agreg_secundaria&agregacao=distinct&filtros=in-cd_indicador-'06_05_02_99'-'06_05_02_79'-'06_05_02_89'&ordenacao=-ds_agreg_secundaria"
            args:
              - prop: "id"
                named_prop: "cd_indicador"
              - prop: "label"
                named_prop: "ds_agreg_secundaria"
            selection:
              event: "selection" 
              rules:
                filter: ",and,eq-cd_indicador-'{0}'"
                api:
                  args:
                    - named_prop: "cd_indicador"

        chart_type: "MAP_TOPOJSON"
        apiBase: 
          fixed: "/indicadoresestaduais?categorias=cd_uf,nm_uf,ds_indicador_radical,cd_indicador,ds_fonte&valor=vl_indicador&agregacao=sum&filtros=eq-1-1"
        api: 
          fixed: "/indicadoresestaduais?categorias=cd_uf,nm_uf,ds_indicador_radical,cd_indicador,ds_fonte&valor=vl_indicador&agregacao=sum&filtros=eq-cd_indicador-'06_05_02_99'"
          options:
            calcs:
              - id: "deviation_sinan"
                function: "get_log"
                fn_args:
                  - fixed: "agr_sum_vl_indicador"
            formatters:
              - id: "agr_sum_vl_indicador"
                format: 'inteiro'
              - id: "rank_br"
                format: 'inteiro'
        headers:
          - text: 'UF'
            align: 'left'
            value: 'nm_uf'
          - text: 'Indicador'
            align: 'left'
            value: 'ds_indicador_radical'
          - text: 'Qtde de Notificações'
            value: 'fmt_agr_sum_vl_indicador'
        chart_options:
          id_field: 'cd_uf'
          topo_key: "codigo"
          value_field: 'calc_deviation_sinan'
          colorScale:
            name: "Reds"
        source:
          desc_field: "ds_fonte"

# # ====================================================          
      - id: "bar_sinan_grave_notif"
        title: 
          fixed: "Notificações do SINAN - Acidentes de Trabalho Grave (5 a 17 anos) - Série Histórica"
        title_comment:
          template: "Brasil, de {0} a {1}"
          preloaded:
            prop: "centralindicadores"
            function: "slice"
            id: "06_05_02_99"
            year: "max"
          args:
            - named_prop: "nu_competencia_min"
            - named_prop: "nu_competencia_max"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              template: "O Sistema de Informação de Agravos de Notificação - Sinan é alimentado, principalmente, pela notificação e investigação de casos de doenças e agravos que constam da lista nacional de doenças de notificação compulsória (Portaria de Consolidação nº 4, de 28 de Setembro de 2017, anexo V - Capítulo I), mas é facultado a estados e municípios incluir outros problemas de saúde importantes em sua região, como varicela no estado de Minas Gerais ou difilobotríase no município de São Paulo. Sua utilização efetiva permite a realização do diagnóstico dinâmico da ocorrência de um evento na população, podendo fornecer subsídios para explicações causais dos agravos de notificação compulsória, além de vir a indicar riscos aos quais as pessoas estão sujeitas, contribuindo assim, para a identificação da realidade epidemiológica de determinada área geográfica. O seu uso sistemático, de forma descentralizada, contribui para a democratização da informação, permitindo que todos os profissionais de saúde tenham acesso à informação e as tornem disponíveis para a comunidade. É, portanto, um instrumento relevante para auxiliar o planejamento da saúde, definir prioridades de intervenção, além de permitir que seja avaliado o impacto das intervenções.<br/>
                      Os dados analisados têm as seguintes referências fundamentais, para consulta e conferência:<br/>Nome: {0}<br/>Fonte: {1}<br/>Ano: {2} a {3}"
              preloaded:
                prop: "centralindicadores"
                function: "slice"
                id: "06_05_02_99"
                year: "max"
              args:
                - named_prop: 'ds_indicador_radical'
                - named_prop: 'ds_fonte'
                - named_prop: 'nu_competencia_min'
                - named_prop: 'nu_competencia_max'
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12 md6'
                api:
                  template: "/indicadoresnacionais?categorias=nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=sum&filtros=eq-cd_indicador-'06_05_02_99'"
                args:
                  - prop: "value"
                    named_prop: 'agr_sum_vl_indicador'
                    format: 'inteiro'
                    # collapse:
                    #   format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'Casos Notificados'
                  - prop: "comment"
                    template: '{0} a {1}'
                    args:
                      - named_prop: "nu_competencia_min"
                      - named_prop: "nu_competencia_max"
              - relevance: 'high'
                cls: 'xs12 md6'
                api:
                  template: "/indicadoresnacionais?categorias=nu_competencia&valor=vl_indicador&agregacao=sum&filtros=eq-cd_indicador-'06_05_02_99',and,eq-nu_competencia-nu_competencia_max"
                args:
                  - prop: "value"
                    named_prop: 'agr_sum_vl_indicador'
                    format: 'inteiro'
                    # collapse:
                    #   format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'Casos Notificados'
                  - prop: "comment"
                    named_prop: "nu_competencia"
          - type: "text"
            title: ""
            content:
              fixed: "Em destaque, para a unidade geográfica selecionada e no período indicado, informações sobre notificações de acidentes de trabalho grave envolvendo crianças e adolescentes (de 5 até 17 anos) conforme registradas no Sistema de Informação de Agravos de Notificação (SINAN). No gráfico ao lado, apresenta-se a evolução das notificações da categoria em destaque na série histórica. Ajuste os filtros abaixo para refinar a visualização."
          - id: "select_idade"
            type: "select"
            multiple: false
            clearable: false
            label: "Faixa etária"
            default: 
              fixed: "06_05_02_99"
            api:
              - fixed: "/indicadoresnacionais?categorias=cd_indicador,ds_agreg_primaria,ds_agreg_secundaria&agregacao=distinct&filtros=in-cd_indicador-'06_05_02_99'-'06_05_02_79'-'06_05_02_89'&ordenacao=-ds_agreg_secundaria"
            args:
              - prop: "id"
                named_prop: "cd_indicador"
              - prop: "label"
                named_prop: "ds_agreg_secundaria"
            selection:
              event: "selection" 
              rules:
                filter: ",and,eq-cd_indicador-'{0}'"
                api:
                  args:
                    - named_prop: "cd_indicador"
        chart_type: "BAR"
        apiBase:
          template: "/indicadoresnacionais?categorias=ds_agreg_secundaria,ds_indicador_curto,nu_competencia,vl_indicador&filtros=eq-1-1"
        api:
          template: "/indicadoresnacionais?categorias=ds_agreg_secundaria,ds_indicador_curto,nu_competencia,vl_indicador&filtros=eq-cd_indicador-'06_05_02_99'"
          options:
            formatters:
              - id: "vl_indicador"
                format: 'inteiro'
        headers:
          - text: 'Ano'
            align: 'left'
            value: 'nu_competencia'
          - text: 'Indicador'
            align: 'left'
            value: 'ds_indicador_curto'
          - text: 'Faixa Etária'
            align: 'left'
            value: 'ds_agreg_secundaria'
          - text: 'Qtde'
            value: 'fmt_vl_indicador'
        chart_options:
          id: "nu_competencia"
          x: "nu_competencia"
          y: "vl_indicador"
          orientation: "vertical"
          text: "fmt_vl_indicador"
          show_x_axis: true
          show_y_axis: false
          hide_legend: true
          color: "#238B45"
        source:
          desc_field: "ds_fonte"

# ====================================================          
      - id: "mapa_sinan_total_notif"
        title: 
          fixed: "Notificações do SINAN - Notificações Relacionadas ao Trabalho (5 a 17 anos)"
        title_comment:
          template: "Brasil, de {0} a {1}"
          preloaded:
            prop: "centralindicadores"
            function: "slice"
            id: "06_05_10_99"
            year: "max"
          args:
            - named_prop: "nu_competencia_min"
            - named_prop: "nu_competencia_max"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              template: "O Sistema de Informação de Agravos de Notificação - Sinan é alimentado, principalmente, pela notificação e investigação de casos de doenças e agravos que constam da lista nacional de doenças de notificação compulsória (Portaria de Consolidação nº 4, de 28 de Setembro de 2017, anexo V - Capítulo I), mas é facultado a estados e municípios incluir outros problemas de saúde importantes em sua região, como varicela no estado de Minas Gerais ou difilobotríase no município de São Paulo. Sua utilização efetiva permite a realização do diagnóstico dinâmico da ocorrência de um evento na população, podendo fornecer subsídios para explicações causais dos agravos de notificação compulsória, além de vir a indicar riscos aos quais as pessoas estão sujeitas, contribuindo assim, para a identificação da realidade epidemiológica de determinada área geográfica. O seu uso sistemático, de forma descentralizada, contribui para a democratização da informação, permitindo que todos os profissionais de saúde tenham acesso à informação e as tornem disponíveis para a comunidade. É, portanto, um instrumento relevante para auxiliar o planejamento da saúde, definir prioridades de intervenção, além de permitir que seja avaliado o impacto das intervenções.<br/>
                      Os dados brutos analisados têm as seguintes referências fundamentais, para consulta e conferência:<br/>Nome: {0}<br/>Fonte: {1}<br/>Ano: {2} a {3}"
              preloaded:
                prop: "centralindicadores"
                function: "slice"
                id: "06_05_10_99"
                year: "max"
              args:
                - named_prop: 'ds_indicador_radical'
                - named_prop: 'ds_fonte'
                - named_prop: 'nu_competencia_min'
                - named_prop: 'nu_competencia_max'
                    
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12 md6'
                api:
                  template: "/indicadoresnacionais?categorias=nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=sum&filtros=eq-cd_indicador-'06_05_10_99'"
                args:
                  - prop: "value"
                    named_prop: 'agr_sum_vl_indicador'
                    format: 'inteiro'
                    # collapse:
                    #   format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'Casos Notificados'
                  - prop: "comment"
                    template: '{0} a {1}'
                    args:
                      - named_prop: "nu_competencia_min"
                      - named_prop: "nu_competencia_max"
              - relevance: 'high'
                cls: 'xs12 md6'
                api:
                  template: "/indicadoresnacionais?categorias=nu_competencia&valor=vl_indicador&agregacao=sum&filtros=eq-cd_indicador-'06_05_10_99',and,eq-nu_competencia-nu_competencia_max"
                args:
                  - prop: "value"
                    named_prop: 'agr_sum_vl_indicador'
                    format: 'inteiro'
                    # collapse:
                    #   format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'Casos Notificados'
                  - prop: "comment"
                    named_prop: "nu_competencia"
          - type: "text"
            title: ""
            content:
              fixed: "Em destaque, para a unidade geográfica selecionada e no período indicado, informações sobre notificações relacionadas ao trabalho de crianças e adolescentes (de 5 até 17 anos) conforme registradas no Sistema de Informação de Agravos de Notificação (SINAN). Consideram-se os seguintes eventos, quando relacionados ao trabalho: acidente de trabalho com exposição a material biológico; acidente de trabalho grave; acidentes por animais peçonhentos; câncer relacionado ao trabalho; dermatoses ocupacionais; intoxicação exógena; LER/DORT; perda auditiva induzida por ruído (PAIR); pneumoconioses; transtornos mentais relacionados ao trabalho. No gráfico ao lado, apresenta-se a evolução das notificações da categoria em destaque na série histórica. Ajuste os filtros abaixo para refinar a visualização."
          - id: "slider_ano"
            type: "slider"
            range: true
            api: 
              fixed: "/indicadoresnacionais?categorias=nu_competencia_min,nu_competencia_max&limit=1&filtros=eq-cd_indicador-'06_05_10_99'"
            args:
              - prop: "min"
                named_prop: "nu_competencia_min"
              - prop: "max"
                named_prop: "nu_competencia_max"
            selection:
              event: "selection"
              rules:
                filter: ",and,ge-nu_competencia-'{0}',and,le-nu_competencia-'{1}'"
                api:
                  args:
                    - named_prop: "value_min"
                    - named_prop: "value_max"         
          - id: "select_tipo"
            type: "select"
            multiple: false
            clearable: false
            label: "Tipo de Notificação"
            default: 
              fixed: "Total"
            api:
              - fixed: "/indicadoresnacionais?categorias=ds_agreg_primaria&agregacao=distinct&filtros=lk-cd_indicador-'06_05_%25',and,nk-cd_indicador-'%25_00'&ordenacao=ds_agreg_primaria"
            args:
              - prop: "id"
                named_prop: "ds_agreg_primaria"
              - prop: "label"
                named_prop: "ds_agreg_primaria"
            selection:
              event: "selection" 
              rules:
                filter: ",and,eq-ds_agreg_primaria-'{0}'"
                api:
                  args:
                    - named_prop: "ds_agreg_primaria"
          - id: "select_idade"
            type: "select"
            multiple: false
            clearable: false
            label: "Faixa etária"
            default: 
              fixed: "5 a 17 anos (Total)"
            api:
              - fixed: "/indicadoresnacionais?categorias=ds_agreg_secundaria,ds_agreg_secundaria-label&agregacao=distinct&filtros=lk-cd_indicador-'06_05_%25',and,nk-cd_indicador-'%25_00'&ordenacao=-ds_agreg_secundaria"
            args:
              - prop: "id"
                named_prop: "ds_agreg_secundaria"
              - prop: "label"
                named_prop: "ds_agreg_secundaria"
                # function: "get_text_from_parentheses"
                # fn_args: 
                #   - named_prop: 'ds_agreg_primaria'
            selection:
              event: "selection" 
              rules:
                filter: ",and,eq-ds_agreg_secundaria-'{0}'"
                api:
                  args:
                    - named_prop: "ds_agreg_secundaria"

        chart_type: "MAP_TOPOJSON"
        apiBase: 
          fixed: "/indicadoresestaduais?categorias=cd_uf,nm_uf,ds_indicador_radical,cd_indicador,ds_fonte&valor=vl_indicador&agregacao=sum&filtros=lk-cd_indicador-'06_05_%25',and,nk-cd_indicador-'%25_00'"
        api: 
          fixed: "/indicadoresestaduais?categorias=cd_uf,nm_uf,ds_indicador_radical,cd_indicador,ds_fonte&valor=vl_indicador&agregacao=sum&filtros=eq-cd_indicador-'06_05_10_99'"
          options:
            calcs:
              - id: "deviation_sinan"
                function: "get_log"
                fn_args:
                  - fixed: "agr_sum_vl_indicador"
                  # - fixed: "media_br"
            formatters:
              - id: "agr_sum_vl_indicador"
                format: 'inteiro'
              - id: "rank_br"
                format: 'inteiro'
        headers:
          - text: 'UF'
            align: 'left'
            value: 'nm_uf'
          - text: 'Indicador'
            align: 'left'
            value: 'ds_indicador_radical'
          - text: 'Qtde de Notificações'
            value: 'fmt_agr_sum_vl_indicador'
        chart_options:
          id_field: 'cd_uf'
          topo_key: "codigo"
          value_field: 'calc_deviation_sinan'
          colorScale:
            name: "Reds"
        source:
          desc_field: "ds_fonte"

# # ====================================================          
      - id: "bar_sinan_total_notif"
        title: 
          fixed: "SINAN - Notificações Relacionadas ao Trabalho (5 a 17 anos) - Série Histórica"
        title_comment:
          template: "Brasil, de {0} a {1}"
          preloaded:
            prop: "centralindicadores"
            function: "slice"
            id: "06_05_10_99"
            year: "max"
          args:
            - named_prop: "nu_competencia_min"
            - named_prop: "nu_competencia_max"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              template: "O Sistema de Informação de Agravos de Notificação - Sinan é alimentado, principalmente, pela notificação e investigação de casos de doenças e agravos que constam da lista nacional de doenças de notificação compulsória (Portaria de Consolidação nº 4, de 28 de Setembro de 2017, anexo V - Capítulo I), mas é facultado a estados e municípios incluir outros problemas de saúde importantes em sua região, como varicela no estado de Minas Gerais ou difilobotríase no município de São Paulo. Sua utilização efetiva permite a realização do diagnóstico dinâmico da ocorrência de um evento na população, podendo fornecer subsídios para explicações causais dos agravos de notificação compulsória, além de vir a indicar riscos aos quais as pessoas estão sujeitas, contribuindo assim, para a identificação da realidade epidemiológica de determinada área geográfica. O seu uso sistemático, de forma descentralizada, contribui para a democratização da informação, permitindo que todos os profissionais de saúde tenham acesso à informação e as tornem disponíveis para a comunidade. É, portanto, um instrumento relevante para auxiliar o planejamento da saúde, definir prioridades de intervenção, além de permitir que seja avaliado o impacto das intervenções.<br/>
                      Os dados analisados têm as seguintes referências fundamentais, para consulta e conferência:<br/>Nome: {0}<br/>Fonte: {1}<br/>Ano: {2} a {3}"
              preloaded:
                prop: "centralindicadores"
                function: "slice"
                id: "06_05_10_99"
                year: "max"
              args:
                - named_prop: 'ds_indicador_radical'
                - named_prop: 'ds_fonte'
                - named_prop: 'nu_competencia_min'
                - named_prop: 'nu_competencia_max'
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12 md6'
                api:
                  template: "/indicadoresnacionais?categorias=nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=sum&filtros=eq-cd_indicador-'06_05_10_99'"
                args:
                  - prop: "value"
                    named_prop: 'agr_sum_vl_indicador'
                    format: 'inteiro'
                    # collapse:
                    #   format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'Casos Notificados'
                  - prop: "comment"
                    template: '{0} a {1}'
                    args:
                      - named_prop: "nu_competencia_min"
                      - named_prop: "nu_competencia_max"
              - relevance: 'high'
                cls: 'xs12 md6'
                api:
                  template: "/indicadoresnacionais?categorias=nu_competencia&valor=vl_indicador&agregacao=sum&filtros=eq-cd_indicador-'06_05_10_99',and,eq-nu_competencia-nu_competencia_max"
                args:
                  - prop: "value"
                    named_prop: 'agr_sum_vl_indicador'
                    format: 'inteiro'
                    # collapse:
                    #   format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'Casos Notificados'
                  - prop: "comment"
                    named_prop: "nu_competencia"
          - type: "text"
            title: ""
            content:
              fixed: "Em destaque, para a unidade geográfica selecionada e no período indicado, informações sobre notificações relacionadas ao trabalho de crianças e adolescentes (de 5 até 17 anos) conforme registradas no Sistema de Informação de Agravos de Notificação (SINAN). Consideram-se os seguintes eventos, quando relacionados ao trabalho: acidente de trabalho com exposição a material biológico; acidente de trabalho grave; acidentes por animais peçonhentos; câncer relacionado ao trabalho; dermatoses ocupacionais; intoxicação exógena; LER/DORT; perda auditiva induzida por ruído (PAIR); pneumoconioses; transtornos mentais relacionados ao trabalho. No gráfico ao lado, apresenta-se a evolução das notificações da categoria em destaque na série histórica. Ajuste os filtros abaixo para refinar a visualização."
          - id: "select_tipo"
            type: "select"
            multiple: false
            clearable: false
            label: "Tipo de Notificação"
            default: 
              fixed: "Total"
            api:
              - fixed: "/indicadoresnacionais?categorias=ds_agreg_primaria&agregacao=distinct&filtros=lk-cd_indicador-'06_05_%25',and,nk-cd_indicador-'%25_00'&ordenacao=ds_agreg_primaria"
            args:
              - prop: "id"
                named_prop: "ds_agreg_primaria"
              - prop: "label"
                named_prop: "ds_agreg_primaria"
                # function: "get_text_from_parentheses"
                # fn_args: 
                #   - named_prop: 'ds_agreg_primaria'
            selection:
              event: "selection" 
              rules:
                filter: ",and,eq-ds_agreg_primaria-'{0}'"
                api:
                  args:
                    - named_prop: "ds_agreg_primaria"
          - id: "select_idade"
            type: "select"
            multiple: false
            clearable: false
            label: "Faixa etária"
            default: 
              fixed: "5 a 17 anos (Total)"
            api:
              - fixed: "/indicadoresnacionais?categorias=ds_agreg_secundaria,ds_agreg_secundaria-label&agregacao=distinct&filtros=lk-cd_indicador-'06_05_%25',and,nk-cd_indicador-'%25_00'&ordenacao=-ds_agreg_secundaria"
            args:
              - prop: "id"
                named_prop: "ds_agreg_secundaria"
              - prop: "label"
                named_prop: "ds_agreg_secundaria"
                # function: "get_text_from_parentheses"
                # fn_args: 
                #   - named_prop: 'ds_agreg_primaria'
            selection:
              event: "selection" 
              rules:
                filter: ",and,eq-ds_agreg_secundaria-'{0}'"
                api:
                  args:
                    - named_prop: "ds_agreg_secundaria"
        chart_type: "BAR"
        apiBase:
          template: "/indicadoresnacionais?categorias=ds_agreg_secundaria,ds_indicador_curto,nu_competencia,vl_indicador&filtros=lk-cd_indicador-'06_05_%25',and,nk-cd_indicador-'%25_00'"
        api:
          template: "/indicadoresnacionais?categorias=ds_agreg_secundaria,ds_indicador_curto,nu_competencia,vl_indicador&filtros=eq-cd_indicador-'06_05_10_99'"
          options:
            formatters:
              - id: "vl_indicador"
                format: 'inteiro'
        headers:
          - text: 'Ano'
            align: 'left'
            value: 'nu_competencia'
          - text: 'Indicador'
            align: 'left'
            value: 'ds_indicador_curto'
          - text: 'Faixa Etária'
            align: 'left'
            value: 'ds_agreg_secundaria'
          - text: 'Qtde'
            value: 'fmt_vl_indicador'
        chart_options:
          id: "nu_competencia"
          x: "nu_competencia"
          y: "vl_indicador"
          orientation: "vertical"
          text: "fmt_vl_indicador"
          show_x_axis: true
          show_y_axis: false
          hide_legend: true
          color: "#238B45"
        source:
          desc_field: "ds_fonte"

# ====================================================          
      - id: "treemap_sinan_agravos"
        title: 
          fixed: "Notificações do SINAN - Notificações Relacionadas ao Trabalho (5 a 17 anos) conforme Agravos e Doenças"
        title_comment:
          template: "Brasil, de {0} a {1}"
          preloaded:
            prop: "centralindicadores"
            function: "slice"
            id: "06_05_10_99"
            year: "max"
          args:
            - named_prop: "nu_competencia_min"
            - named_prop: "nu_competencia_max"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              template: "O Sistema de Informação de Agravos de Notificação - Sinan é alimentado, principalmente, pela notificação e investigação de casos de doenças e agravos que constam da lista nacional de doenças de notificação compulsória (Portaria de Consolidação nº 4, de 28 de Setembro de 2017, anexo V - Capítulo I), mas é facultado a estados e municípios incluir outros problemas de saúde importantes em sua região, como varicela no estado de Minas Gerais ou difilobotríase no município de São Paulo. Sua utilização efetiva permite a realização do diagnóstico dinâmico da ocorrência de um evento na população, podendo fornecer subsídios para explicações causais dos agravos de notificação compulsória, além de vir a indicar riscos aos quais as pessoas estão sujeitas, contribuindo assim, para a identificação da realidade epidemiológica de determinada área geográfica. O seu uso sistemático, de forma descentralizada, contribui para a democratização da informação, permitindo que todos os profissionais de saúde tenham acesso à informação e as tornem disponíveis para a comunidade. É, portanto, um instrumento relevante para auxiliar o planejamento da saúde, definir prioridades de intervenção, além de permitir que seja avaliado o impacto das intervenções.<br/>
                      Os dados brutos analisados têm as seguintes referências fundamentais, para consulta e conferência:<br/>Nome: {0}<br/>Fonte: {1}<br/>Ano: {2} a {3}"
              preloaded:
                prop: "centralindicadores"
                function: "slice"
                id: "06_05_10_99"
                year: "max"
              args:
                - named_prop: 'ds_indicador_radical'
                - named_prop: 'ds_fonte'
                - named_prop: 'nu_competencia_min'
                - named_prop: 'nu_competencia_max'
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12 md6'
                api:
                  template: "/indicadoresnacionais?categorias=nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=sum&filtros=eq-cd_indicador-'06_05_10_99'"
                args:
                  - prop: "value"
                    named_prop: 'agr_sum_vl_indicador'
                    format: 'inteiro'
                    # collapse:
                    #   format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'Casos Notificados'
                  - prop: "comment"
                    template: '{0} a {1}'
                    args:
                      - named_prop: "nu_competencia_min"
                      - named_prop: "nu_competencia_max"
              - relevance: 'high'
                cls: 'xs12 md6'
                api:
                  template: "/indicadoresnacionais?categorias=nu_competencia&valor=vl_indicador&agregacao=sum&filtros=eq-cd_indicador-'06_05_10_99',and,eq-nu_competencia-nu_competencia_max"
                args:
                  - prop: "value"
                    named_prop: 'agr_sum_vl_indicador'
                    format: 'inteiro'
                    # collapse:
                    #   format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'Casos Notificados'
                  - prop: "comment"
                    named_prop: "nu_competencia"
          - type: "text"
            title: ""
            content:
              fixed: "Em destaque, para a unidade geográfica selecionada e no período indicado, informações sobre notificações relacionadas ao trabalho de crianças e adolescentes (de 5 até 17 anos) conforme registradas no Sistema de Informação de Agravos de Notificação (SINAN). Consideram-se os seguintes eventos, quando relacionados ao trabalho: acidente de trabalho com exposição a material biológico; acidente de trabalho grave; acidentes por animais peçonhentos; câncer relacionado ao trabalho; dermatoses ocupacionais; intoxicação exógena; LER/DORT; perda auditiva induzida por ruído (PAIR); pneumoconioses; transtornos mentais relacionados ao trabalho. No gráfico ao lado, apresenta-se a distribuição percentual das diferentes categorias. Ajuste os filtros abaixo para refinar a visualização."
          - id: "slider_ano"
            type: "slider"
            range: true
            api: 
              fixed: "/indicadoresnacionais?categorias=nu_competencia_min,nu_competencia_max&limit=1&filtros=eq-cd_indicador-'06_05_10_99'"
            args:
              - prop: "min"
                named_prop: "nu_competencia_min"
              - prop: "max"
                named_prop: "nu_competencia_max"
            selection:
              event: "selection"
              rules:
                filter: ",and,ge-nu_competencia-'{0}',and,le-nu_competencia-'{1}'"
                api:
                  args:
                    - named_prop: "value_min"
                    - named_prop: "value_max"         
          - id: "select_idade"
            type: "select"
            multiple: false
            clearable: false
            label: "Faixa etária"
            default: 
              fixed: "5 a 17 anos (Total)"
            api:
              - fixed: "/indicadoresnacionais?categorias=ds_agreg_secundaria&agregacao=distinct&filtros=lk-cd_indicador-'06_05_%25',and,nk-cd_indicador-'%25_00'&ordenacao=-ds_agreg_secundaria"
            args:
              - prop: "id"
                named_prop: "ds_agreg_secundaria"
              - prop: "label"
                named_prop: "ds_agreg_secundaria"
            selection:
              event: "selection" 
              rules:
                filter: ",and,eq-ds_agreg_secundaria-'{0}'"
                api:
                  args:
                    - named_prop: "ds_agreg_secundaria"
        chart_type: "TREEMAP"
        apiBase:
          fixed: "/indicadoresnacionais?categorias=ds_agreg_primaria,ds_indicador_curto,cd_indicador,ds_fonte&valor=vl_indicador&agregacao=sum&filtros=lk-cd_indicador-'06_05_%25',and,nk-cd_indicador-'%25_00',and,nk-cd_indicador-'06_05_10_%25'"
        api:
          fixed: "/indicadoresnacionais?categorias=ds_agreg_primaria,ds_indicador_curto,cd_indicador,ds_fonte&valor=vl_indicador&agregacao=sum&filtros=lk-cd_indicador-'06_05_%25_99',and,nk-cd_indicador-'06_05_10_99'"
          options:
            formatters:
              - id: "agr_sum_vl_indicador"
                format: 'inteiro'
        headers:
          - text: 'Indicador'
            align: 'left'
            value: 'ds_indicador_curto'
          - text: 'Qtde'
            value: 'fmt_agr_sum_vl_indicador'
        chart_options:
          id: "cd_indicador"
          size: "agr_sum_vl_indicador"
          text: "ds_agreg_primaria"
          colorScale:
            name: "Reds"
        source:
          desc_field: "ds_fonte"