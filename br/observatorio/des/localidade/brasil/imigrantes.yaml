# ========================================================
principais:
  - relevance: 'lead' 
    cls: 'xs12'
    rowClass: "pt-0 px-3 pb-5"
    api:
      template: "/thematic/raisagrmun?categorias=rais_agr_ano_nu&agregacao=sum&valor=rais_agr_vinc_3112_qt&filtros=eq-rais_agr_ano_nu-{0},and,ne-rais_agr_nacion_ds-'Brasil'"
      args:
        - base_object: "rais_agr"
          named_prop: "agr_max_rais_agr_ano_nu"
      options:
        calcs:
          - id: "faixa"
            function: "get_bin"
            fn_args:
              - named_prop: "agr_sum_rais_agr_vinc_3112_qt"
    args:
      - prop: "value"
        named_prop: 'calc_faixa'
        format: "inteiro"
        collapse:
          format: 'real'
        default: "Nenhum"
      - prop: "description"
        fixed: "Trabalhadores Imigrantes Estrangeiros Ativos no Mercado de Trabalho Formal"
      - prop: 'comment'
        template: "(MTE/RAIS, {0})"
        args:
          - named_prop: "rais_agr_ano_nu"
  - relevance: 'lead' 
    cls: 'xs12'
    rowClass: "pt-0 px-3 pb-5"
    api:
      - template: "/thematic/raisagrmun?categorias=rais_agr_ano_nu&agregacao=sum,sum&valor=rais_agr_vinc_medios_crem_qt,rais_agr_massa_salarial_sm&filtros=eq-rais_agr_ano_nu-{0},and,ne-rais_agr_nacion_ds-'Brasil'"
        args:
          # - named_prop: "idLocalidade"
          - base_object: "rais_agr"
            named_prop: "agr_max_rais_agr_ano_nu"
        options:
          calcs:
            - id: "salario_medio_sm"
              function: "calc_proportion_ds"
              fn_args:
                - named_prop: 'agr_sum_rais_agr_massa_salarial_sm'
                - named_prop: 'agr_sum_rais_agr_vinc_medios_crem_qt'
            - id: "faixa"
              function: "get_bin"
              fn_args:
                - named_prop: "calc_salario_medio_sm"
                - fixed: [1,1.5,2,3,4,5,7,10,15,20,30,40,50,60,70,80,90,100]
                - fixed: 2
    args:
      - prop: "value"
        template: "{0} salários mínimos"
        args:
          - named_prop: 'calc_faixa'
            format: 'real'
            default: "-"
      - prop: "description"
        fixed: "Remuneração Média dos trabalhadores imigrantes estrangeiros no país"
      - prop: 'comment'
        template: "(MTE/RAIS, {0})"
        args:
          - named_prop: "rais_agr_ano_nu"

# ========================================================
secoes:
  - id: "imigrantes_unico"
    name: ""
    cards:
# ====================================================  
      - id: "card_fluxos_migratorios"
        title: 
          fixed: "Fluxos Migratórios Internacionais"
        description:
          - type: "minicards"
            cards:
              - relevance: 'high' 
                cls: 'xs12 sm6'
                rowClass: "pt-0 px-3 pb-5"
                api:
                  template: "/thematic/raisagrmun?categorias=rais_agr_ano_nu,rais_agr_uf_ibge_ds&agregacao=sum&valor=rais_agr_vinc_3112_qt&ordenacao=-agr_sum_rais_agr_vinc_3112_qt&filtros=eq-rais_agr_ano_nu-{0},and,ne-rais_agr_nacion_ds-'Brasil'&limit=1"
                  args:
                    - base_object: "rais_agr"
                      named_prop: "agr_max_rais_agr_ano_nu"
                args:
                  - prop: "value"
                    named_prop: 'rais_agr_uf_ibge_ds'
                    default: "-"
                  - prop: "description"
                    fixed: "UF com maior número de imigrantes estrangeiros contratados"
                  - prop: "comment"
                    named_prop: "rais_agr_ano_nu"
                    default: ""
              - relevance: 'high' 
                cls: 'xs12 sm6'
                rowClass: "pt-0 px-3 pb-5"
                api:
                  template: "/thematic/raisagrmun?categorias=rais_agr_ano_nu,rais_agr_nacion_ds&agregacao=sum&valor=rais_agr_vinc_3112_qt&ordenacao=-agr_sum_rais_agr_vinc_3112_qt&filtros=eq-rais_agr_ano_nu-{0},and,ne-rais_agr_nacion_ds-'Brasil'&limit=1"
                  args:
                    - base_object: "rais_agr"
                      named_prop: "agr_max_rais_agr_ano_nu"
                args:
                  - prop: "value"
                    named_prop: 'rais_agr_nacion_ds'
                    default: "-"
                  - prop: "description"
                    fixed: "Origem do maior número de imigrantes estrangeiros contratados<br/>"
                  - prop: "comment"
                    named_prop: "rais_agr_ano_nu"
                    default: ""

          - type: "text"
            title: ""
            content:
              template: "Em destaque, a UF em que o maior número de imigrantes estrangeiros foi contratado no ano de {0}, bem como a nacionalidade mais contratada. No diagrama ao lado, apresentam-se os possíveis fluxos migratórios internacionais associados. É importante observar que a migração pode haver ocorrido com outras etapas antecedentes. Os dados processados consideram apenas a origem do migrante de outra nacionalidade e a Unidade Federativa em que ele foi contratado."
              api:
                fixed: "/thematic/raisagrmun?categorias=1&agregacao=min,max&valor=rais_agr_ano_nu"
              args:
                - named_prop: "agr_max_rais_agr_ano_nu"
          - id: "select_origem"
            type: "select"
            label: "Origem/Continente"
            default:
              fixed: "América do Sul ou Central"
            api:
              fixed: "/thematic/raisagrmun?categorias=rais_agr_nacion_cont_ds&agregacao=DISTINCT&ordenacao=rais_agr_nacion_cont_ds&filtros=ne-rais_agr_nacion_ds-'Brasil'"
            args:
              - prop: "id"
                named_prop: "rais_agr_nacion_cont_ds"
              - prop: "label"
                named_prop: "rais_agr_nacion_cont_ds"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,eq-rais_agr_nacion_cont_ds-'{0}'"
                api:
                  args:
                    - named_prop: "rais_agr_nacion_cont_ds"

          - id: "select_pais"
            type: "select"
            label: "País de Origem"
            parent: "select_origem"
            api:
              fixed: "/thematic/raisagrmun?categorias=rais_agr_nacion_ds&agregacao=DISTINCT&ordenacao=rais_agr_nacion_ds&filtros=ne-rais_agr_nacion_ds-'Brasil'"
            api_reactive:
              template: "/thematic/raisagrmun?categorias=rais_agr_nacion_ds&agregacao=DISTINCT&ordenacao=rais_agr_nacion_ds&filtros=ne-rais_agr_nacion_ds-'Brasil',and,eq-rais_agr_nacion_cont_ds-'{0}'"
              args:
                - named_prop: "rais_agr_nacion_cont_ds"
            args:
              - prop: "id"
                named_prop: "rais_agr_nacion_ds"
              - prop: "label"
                named_prop: "rais_agr_nacion_ds"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,eq-rais_agr_nacion_ds-'{0}'"
                api:
                  args:
                    - named_prop: "rais_agr_nacion_ds"

          - id: "select_uf"
            type: "select"
            label: "Unidade Federativa"
            api:
              fixed: "/thematic/raisagrmun?categorias=rais_agr_uf_ibge_cd,rais_agr_uf_ibge_ds&agregacao=DISTINCT&ordenacao=rais_agr_uf_ibge_ds&filtros=ne-rais_agr_nacion_ds-'Brasil',and,nn-rais_agr_uf_ibge_ds"
            args:
              - prop: "id"
                named_prop: "rais_agr_uf_ibge_cd"
              - prop: "label"
                named_prop: "rais_agr_uf_ibge_ds"
            selection:
              event: "selection"
              rules:
               filter: ",and,eq-rais_agr_uf_ibge_cd-{0}"
               api:
                 args:
                   - named_prop: "rais_agr_uf_ibge_cd"

          - type: "slider"
            cls: "pl-2"
            id: "slider_periodo"
            default: 2021
            title: ""
            api:
              fixed: "/thematic/raisagrmun?categorias=1&agregacao=min,max&valor=rais_agr_ano_nu"
            args:
              - prop: "min"
                named_prop: "agr_min_rais_agr_ano_nu"
              - prop: "max"
                named_prop: "agr_max_rais_agr_ano_nu"
            selection:
              event: "selection"
              rules:
                filter: ",and,eq-rais_agr_ano_nu-{0}"
                api:
                  args:
                    - named_prop: "value"


        chart_type: "SANKEYD3"
        api: 
          template: "/thematic/raisagrmun?categorias=rais_agr_nacion_ds,rais_agr_uf_ibge_ds&agregacao=sum&valor=rais_agr_vinc_3112_qt&ordenacao=-agr_sum_rais_agr_vinc_3112_qt&filtros=eq-rais_agr_ano_nu-{0},and,ne-rais_agr_nacion_ds-'Brasil',and,nn-rais_agr_uf_ibge_ds,and,eq-rais_agr_nacion_cont_ds-'América do Sul ou Central',and,ne-rais_agr_vinc_3112_qt-0"
          args:
            - base_object: "rais_agr"
              named_prop: "agr_max_rais_agr_ano_nu"
        apiBase: 
          fixed: "/thematic/raisagrmun?categorias=rais_agr_nacion_ds,rais_agr_uf_ibge_ds&agregacao=sum&valor=rais_agr_vinc_3112_qt&ordenacao=-agr_sum_rais_agr_vinc_3112_qt&filtros=ne-rais_agr_nacion_ds-'Brasil',and,nn-rais_agr_uf_ibge_ds,and,ne-rais_agr_vinc_3112_qt-0"
        headers:
          - text: 'Origem'
            align: 'left'
            value: 'rais_agr_nacion_ds'
          - text: 'Destino'
            align: 'left'
            value: 'rais_agr_uf_ibge_ds'
          - text: 'Total'
            align: 'left'
            value: 'agr_sum_rais_agr_vinc_3112_qt'
        chart_options:
          id_field: 'id'
          source_field: 'rais_agr_nacion_ds'
          target_field: 'rais_agr_uf_ibge_ds'
          value_field: 'agr_sum_rais_agr_vinc_3112_qt'
        source:
          desc: "MTE/RAIS"

# ========================================================
      - id: "line_evolucao_origem"
        title: 
          fixed: "Evolução da Presença de Outras Nacionalidades no Mercado de Trabalho Formal"
        title_comment:
          template: "{0}, de {1} a {2}"
          api:
            fixed: "/thematic/raisagrmun?categorias=1&agregacao=min,max&valor=rais_agr_ano_nu"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - named_prop: "agr_min_rais_agr_ano_nu"
            - named_prop: "agr_max_rais_agr_ano_nu"
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  fixed: "/thematic/raisagrmun?categorias=1&agregacao=sum&valor=rais_agr_vinc_3112_qt&filtros=ne-rais_agr_nacion_ds-'Brasil'"
                  options:
                    calcs:
                      - id: "faixa"
                        function: "get_bin"
                        fn_args:
                          - named_prop: "agr_sum_rais_agr_vinc_3112_qt"
                args:
                  - prop: "value"
                    named_prop: 'calc_faixa'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Nenhum"
                  - prop: "description"
                    fixed: "Trabalhadores imigrantes estrangeiros Admitidos no Mercado de Trabalho Formal"
          - type: "text"
            title: ""
            content:
              template: "Em destaque, para a unidade geográfica em realce, o número de trabalhadores imigrantes estrangeiros admitidos no mercado de trabalho formal brasileiro de {0} a {1}. No gráfico, apresenta-se a evolução histórica da presença desses migrantes por continente de origem. As informações são baseadas em dados oficiais da Relação Anual de Informações Sociais (RAIS) de {1} (a mais atual disponível). A RAIS de cada ano é divulgada no ano seguinte em relação aos dados do ano anterior. No caso, portanto, a situação corresponde ao cenário com o qual se iniciou o ano de {2}."
              api:
                fixed: "/thematic/raisagrmun?categorias=1&agregacao=min,max&valor=rais_agr_ano_nu"
                options:
                  calcs:
                    - id: "proximo_ano"
                      function: "calc_addition_ids_ds"
                      fn_args:
                        - named_prop: "agr_max_rais_agr_ano_nu"
                        - fixed: 1
                        - fixed: 1
              args:
                - named_prop: "agr_min_rais_agr_ano_nu"
                - named_prop: "agr_max_rais_agr_ano_nu"
                - named_prop: "calc_proximo_ano"
        chart_type: "LINE"
        footnote: "Evolução da Presença de Outras Nacionalidades no Mercado de Trabalho Formal por Continente de Origem"
        api: 
          fixed: "/thematic/raisagrmun?categorias=rais_agr_ano_nu,rais_agr_nacion_cont_ds,'Contratação de Migrantes de Outras Nacionalidades no Mercado de Trabalho Formal Brasileiro'-ds_indicador&agregacao=sum&valor=rais_agr_vinc_3112_qt&filtros=ne-rais_agr_nacion_ds-'Brasil'"
          options:
            formatters:
              - id: "agr_sum_rais_agr_vinc_3112_qt"
                format: 'inteiro'
        headers:
          - text: 'Origem'
            align: 'left'
            value: 'rais_agr_nacion_cont_ds'
          - text: 'Indicador'
            align: 'left'
            value: 'ds_indicador'
          - text: 'Ano'
            align: 'left'
            value: 'rais_agr_ano_nu'
          - text: 'Qtde'
            value: 'fmt_agr_sum_rais_agr_vinc_3112_qt'
        chart_options:
          id: "rais_agr_nacion_cont_ds"
          x: "rais_agr_ano_nu"
          y: "agr_sum_rais_agr_vinc_3112_qt"
          text: "fmt_agr_sum_rais_agr_vinc_3112_qt"
        source:
          desc: "MTE/RAIS"
# ====================================================          
      - id: "line_evolucao_origem_pais"
        title: 
          fixed: "Evolução da Presença de Migrantes da América Central e do Sul no Mercado de Trabalho Formal"
        title_comment:
          template: "{0}, de {1} a {2}"
          api:
            fixed: "/thematic/raisagrmun?categorias=1&agregacao=min,max&valor=rais_agr_ano_nu"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - named_prop: "agr_min_rais_agr_ano_nu"
            - named_prop: "agr_max_rais_agr_ano_nu"
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  fixed: "/thematic/raisagrmun?categorias=1&agregacao=sum&valor=rais_agr_vinc_3112_qt&filtros=ne-rais_agr_nacion_ds-'Brasil',and,eq-rais_agr_nacion_cont_ds-'América do Sul ou Central'"
                  options:
                    calcs:
                      - id: "faixa"
                        function: "get_bin"
                        fn_args:
                          - named_prop: "agr_sum_rais_agr_vinc_3112_qt"
                args:
                  - prop: "value"
                    named_prop: 'calc_faixa'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Nenhum"
                  - prop: "description"
                    fixed: "Trabalhadores imigrantes estrangeiros da América Central e do Sul Admitidos no Mercado de Trabalho Formal"
          - type: "text"
            title: ""
            content:
              template: "Em destaque, para a unidade geográfica em realce, o número de trabalhadores migrantes da América Central e do Sul admitidos no mercado de trabalho formal brasileiro de {0} a {1}. No gráfico, apresenta-se a evolução histórica da presença desses migrantes por país de origem. As informações são baseadas em dados oficiais da Relação Anual de Informações Sociais (RAIS) de {1} (a mais atual disponível). A RAIS de cada ano é divulgada no ano seguinte em relação aos dados do ano anterior. No caso, portanto, a situação corresponde ao cenário com o qual se iniciou o ano de {2}."
              api:
                fixed: "/thematic/raisagrmun?categorias=1&agregacao=min,max&valor=rais_agr_ano_nu"
                options:
                  calcs:
                    - id: "proximo_ano"
                      function: "calc_addition_ids_ds"
                      fn_args:
                        - named_prop: "agr_max_rais_agr_ano_nu"
                        - fixed: 1
                        - fixed: 1
              args:
                - named_prop: "agr_min_rais_agr_ano_nu"
                - named_prop: "agr_max_rais_agr_ano_nu"
                - named_prop: "calc_proximo_ano"
        chart_type: "LINE"
        api: 
          fixed: "/thematic/raisagrmun?categorias=rais_agr_ano_nu,rais_agr_nacion_ds,'Contratação de Migrantes de Outras Nacionalidades no Mercado de Trabalho Formal Brasileiro'-ds_indicador&agregacao=sum&valor=rais_agr_vinc_3112_qt&filtros=ne-rais_agr_nacion_ds-'Brasil',and,eq-rais_agr_nacion_cont_ds-'América do Sul ou Central'&ordenacao=-agr_sum_rais_agr_vinc_3112_qt"
          options:
            formatters:
              - id: "agr_sum_rais_agr_vinc_3112_qt"
                format: 'inteiro'
        headers:
          - text: 'Origem'
            align: 'left'
            value: 'rais_agr_nacion_ds'
          - text: 'Indicador'
            align: 'left'
            value: 'ds_indicador'
          - text: 'Ano'
            align: 'left'
            value: 'rais_agr_ano_nu'
          - text: 'Qtde'
            value: 'fmt_agr_sum_rais_agr_vinc_3112_qt'
        chart_options:
          id: "rais_agr_nacion_ds"
          x: "rais_agr_ano_nu"
          y: "agr_sum_rais_agr_vinc_3112_qt"
          text: "fmt_agr_sum_rais_agr_vinc_3112_qt"
        source:
          desc: "MTE/RAIS"
# ========================================================
      - id: "treemap_origem_imigrantes"
        title:
          fixed: "Imigrantes Estrangeiros no Mercado de Trabalho Formal por Origem"
        title_comment:
          template: "{0}, {1}"
          api:
            fixed: "/thematic/raisagrmun?categorias=1&agregacao=min,max&valor=rais_agr_ano_nu"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - named_prop: "agr_max_rais_agr_ano_nu"
        # info:
        #   - type: "text"
        #     title: "Sobre a métrica"
        #     content:
        #       fixed: ""
        description: 
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  template: "/thematic/raisagrmun?categorias=rais_agr_ano_nu&agregacao=sum&valor=rais_agr_vinc_3112_qt&filtros=eq-rais_agr_ano_nu-{0},and,ne-rais_agr_nacion_ds-'Brasil'"
                  args:
                    - base_object: "rais_agr"
                      named_prop: "agr_max_rais_agr_ano_nu"
                  options:
                    calcs:
                      - id: "faixa"
                        function: "get_bin"
                        fn_args:
                          - named_prop: "agr_sum_rais_agr_vinc_3112_qt"
                args:
                  - prop: "value"
                    named_prop: 'calc_faixa'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Nenhum"
                  - prop: "description"
                    fixed: "Trabalhadores imigrantes estrangeiros Ativos no Mercado de Trabalho Formal"

          - type: "text"
            title: ""
            content:
              template: "Em destaque, o número de imigrantes estrangeiros ativos no mercado de trabalho formal na Unidade Federativa selecionada, incluindo vínculos com carteira assinada (CLT) e administrativos ou estatutários. No gráfico ao lado, comparam-se os totais para os continentes de origem dos trabalhadores. As informações são baseadas em dados oficiais da Relação Anual de Informações Sociais (RAIS) de {0} (a mais atual disponível). A RAIS de cada ano é divulgada no ano seguinte em relação aos dados do ano anterior. No caso, portanto, a situação corresponde ao cenário com o qual se iniciou o ano de {1}."
              api:
                fixed: "/thematic/raisagrmun?categorias=1&agregacao=min,max&valor=rais_agr_ano_nu"
                options:
                  calcs:
                    - id: "proximo_ano"
                      function: "calc_addition_ids_ds"
                      fn_args:
                        - named_prop: "agr_max_rais_agr_ano_nu"
                        - fixed: 1
                        - fixed: 1
              args:
                - named_prop: "agr_max_rais_agr_ano_nu"
                - named_prop: "calc_proximo_ano"

        chart_type: "TREEMAP"
        api:
          template: "/thematic/raisagrmun?categorias=rais_agr_ano_nu,rais_agr_nacion_cont_ds,'Contratação de Migrantes de Outras Nacionalidades no Mercado de Trabalho Formal Brasileiro'-ds_indicador&agregacao=sum&valor=rais_agr_vinc_3112_qt&filtros=eq-rais_agr_ano_nu-{0},and,ne-rais_agr_nacion_ds-'Brasil'"
          args:
            - base_object: "rais_agr"
              named_prop: "agr_max_rais_agr_ano_nu"
          options:
            calcs:
              - id: "faixa"
                function: "get_bin"
                fn_args:
                  - named_prop: "agr_sum_rais_agr_vinc_3112_qt"
            formatters:
              - id: "agr_sum_rais_agr_vinc_3112_qt"
                format: 'inteiro'
              - id: "calc_faixa"
                format: "inteiro"
        headers:
          - text: 'Origem'
            align: 'left'
            value: 'rais_agr_nacion_cont_ds'
          - text: 'Indicador'
            align: 'left'
            value: 'ds_indicador'
          - text: 'Ano'
            align: 'left'
            value: 'rais_agr_ano_nu'
          # - text: 'Qtde'
          #   value: 'vl_indicador'
          - text: 'Qtde'
            value: 'fmt_calc_faixa'
        chart_options:
          id: "rais_agr_nacion_cont_ds"
          text: "rais_agr_nacion_cont_ds"
          size: "agr_sum_rais_agr_vinc_3112_qt"
          colorScale:
            name: "Blues"
            type: "singleHue"
            levels: 6
            order: 'asc'
        source:
          desc: "MTE/RAIS"
# ========================================================
      - id: "treemap_presenca_imigrantes"
        title:
          fixed: "Presença de Imigrantes Estrangeiros no Mercado de Trabalho formal"
        title_comment:
          template: "{0}, {1}"
          api:
            fixed: "/thematic/raisagrmun?categorias=1&agregacao=min,max&valor=rais_agr_ano_nu"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - named_prop: "agr_max_rais_agr_ano_nu"
        # info:
        #   - type: "text"
        #     title: "Sobre a métrica"
        #     content:
        #       fixed: ""
        description: 
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  template: "/thematic/raisagrmun?categorias=rais_agr_ano_nu&agregacao=sum&valor=rais_agr_vinc_3112_qt&filtros=eq-rais_agr_ano_nu-{0},and,ne-rais_agr_nacion_ds-'Brasil'"
                  args:
                    - base_object: "rais_agr"
                      named_prop: "agr_max_rais_agr_ano_nu"
                  options:
                    calcs:
                      - id: "faixa"
                        function: "get_bin"
                        fn_args:
                          - named_prop: "agr_sum_rais_agr_vinc_3112_qt"
                args:
                  - prop: "value"
                    named_prop: 'calc_faixa'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Nenhum"
                  - prop: "description"
                    fixed: "Trabalhadores imigrantes estrangeiros Ativos no Mercado de Trabalho Formal"

          - type: "text"
            title: ""
            content:
              template: "Em destaque, o número de trabalhadores estrangeiro ativos no mercado de trabalho formal no país, incluindo vínculos com carteira assinada (CLT) e administrativos ou estatutários. No gráfico, comparam-se os totais de trabalhadores estrageiros nas Unidades Federativas. As informações são baseadas em dados oficiais da Relação Anual de Informações Sociais (RAIS) de {0} (a mais atual disponível). A RAIS de cada ano é divulgada no ano seguinte em relação aos dados do ano anterior. No caso, portanto, a situação corresponde ao cenário com o qual se iniciou o ano de {1}."
              api:
                fixed: "/thematic/raisagrmun?categorias=1&agregacao=min,max&valor=rais_agr_ano_nu"
                options:
                  calcs:
                    - id: "proximo_ano"
                      function: "calc_addition_ids_ds"
                      fn_args:
                        - named_prop: "agr_max_rais_agr_ano_nu"
                        - fixed: 1
                        - fixed: 1
              args:
                - named_prop: "agr_max_rais_agr_ano_nu"
                - named_prop: "calc_proximo_ano"
          - id: "select_origem"
            type: "select"
            label: "Origem/Continente"
            api:
              fixed: "/thematic/raisagrmun?categorias=rais_agr_nacion_cont_ds&agregacao=DISTINCT&ordenacao=rais_agr_nacion_cont_ds&filtros=ne-rais_agr_nacion_ds-'Brasil'"
            args:
              - prop: "id"
                named_prop: "rais_agr_nacion_cont_ds"
              - prop: "label"
                named_prop: "rais_agr_nacion_cont_ds"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,eq-rais_agr_nacion_cont_ds-'{0}'"
                api:
                  args:
                    - named_prop: "rais_agr_nacion_cont_ds"

        chart_type: "TREEMAP"
        api:
          template: "/thematic/raisagrmun?categorias=rais_agr_ano_nu,rais_agr_uf_ibge_ds,'Contratação de Migrantes de Outras Nacionalidades no Mercado de Trabalho Formal Brasileiro'-ds_indicador&agregacao=sum&valor=rais_agr_vinc_3112_qt&filtros=eq-rais_agr_ano_nu-{0},and,ne-rais_agr_nacion_ds-'Brasil',and,nn-rais_agr_uf_ibge_ds"
          args:
            - base_object: "rais_agr"
              named_prop: "agr_max_rais_agr_ano_nu"
          options:
            calcs:
              - id: "faixa"
                function: "get_bin"
                fn_args:
                  - named_prop: "agr_sum_rais_agr_vinc_3112_qt"
            formatters:
              - id: "agr_sum_rais_agr_vinc_3112_qt"
                format: 'inteiro'
              - id: "calc_faixa"
                format: "inteiro"
        headers:
          - text: 'Unidade Federativa'
            align: 'left'
            value: 'rais_agr_uf_ibge_ds'
          - text: 'Indicador'
            align: 'left'
            value: 'ds_indicador'
          - text: 'Ano'
            align: 'left'
            value: 'rais_agr_ano_nu'
          # - text: 'Qtde'
          #   value: 'fmt_agr_sum_vl_indicador'
          - text: 'Qtde'
            value: 'fmt_calc_faixa'
        chart_options:
          id: "rais_agr_uf_ibge_ds"
          text: "rais_agr_uf_ibge_ds"
          size: "agr_sum_rais_agr_vinc_3112_qt"
          colorScale:
            name: "BuPu"
            type: "singleHue"
            levels: 6
            order: 'asc'
        source:
          desc: "MTE/RAIS"
# ========================================================
      - id: "bar_remuneracao_trabalhadores_continente"
        title: 
          fixed: "Remuneração de Trabalhadores Imigrantes Estrangeiros por Origem"
        title_comment:
          template: "{0}, {1}"
          api:
            fixed: "/thematic/raisagrmun?categorias=1&agregacao=min,max&valor=rais_agr_ano_nu"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - named_prop: "agr_max_rais_agr_ano_nu"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              fixed: "Sem observações adicionais. Vide descrição."
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  template: "/thematic/raisagrmun?categorias=rais_agr_ano_nu,rais_agr_nacion_cont_ds&agregacao=sum,sum&valor=rais_agr_vinc_medios_crem_qt,rais_agr_massa_salarial_sm&filtros=eq-rais_agr_ano_nu-{0},and,ne-rais_agr_nacion_ds-'Brasil'"
                  args:
                    - base_object: "rais_agr"
                      named_prop: "agr_max_rais_agr_ano_nu"
                  options:
                    calcs:
                      - id: "salario_medio_sm"
                        function: "calc_proportion_ds"
                        fn_args:
                          - named_prop: 'agr_sum_rais_agr_massa_salarial_sm'
                          - named_prop: 'agr_sum_rais_agr_vinc_medios_crem_qt'
                      - id: "faixa"
                        function: "get_bin"
                        fn_args:
                          - named_prop: "calc_salario_medio_sm"
                          - fixed: [1,1.5,2,3,4,5,7,10,15,20,30,40,50,60,70,80,90,100]
                          - fixed: 2
                    order_field: -calc_salario_medio_sm
                args:
                  - prop: "value"
                    named_prop: 'rais_agr_nacion_cont_ds'
                    default: "Nenhum"
                  - prop: "description"
                    fixed: "Origem dos Trabalhadores com maior remuneração média"
                  - prop: "comment"
                    template: "{0} salários mínimos"
                    args:
                      - named_prop: 'calc_faixa'
                        default: "-"

              - relevance: 'high'
                cls: 'xs12'
                api:
                  template: "/thematic/raisagrmun?categorias=rais_agr_ano_nu,rais_agr_nacion_cont_ds&agregacao=sum,sum&valor=rais_agr_vinc_medios_crem_qt,rais_agr_massa_salarial_sm&filtros=eq-rais_agr_ano_nu-{0},and,ne-rais_agr_nacion_ds-'Brasil'"
                  args:
                    - base_object: "rais_agr"
                      named_prop: "agr_max_rais_agr_ano_nu"
                  options:
                    calcs:
                      - id: "salario_medio_sm"
                        function: "calc_proportion_ds"
                        fn_args:
                          - named_prop: 'agr_sum_rais_agr_massa_salarial_sm'
                          - named_prop: 'agr_sum_rais_agr_vinc_medios_crem_qt'
                      - id: "faixa"
                        function: "get_bin"
                        fn_args:
                          - named_prop: "calc_salario_medio_sm"
                          - fixed: [1,1.5,2,3,4,5,7,10,15,20,30,40,50,60,70,80,90,100]
                          - fixed: 2
                    order_field: calc_salario_medio_sm
                args:
                  - prop: "value"
                    named_prop: 'rais_agr_nacion_cont_ds'
                    default: "Nenhum"
                  - prop: "description"
                    fixed: "Origem dos Trabalhadores com menor remuneração média"
                  - prop: "comment"
                    template: "{0} salários mínimos"
                    args:
                      - named_prop: 'calc_faixa'
                        default: "-"

          - type: "text"
            title: ""
            content:
              template: "Em destaque, a origem dos trabalhadores de maior e menor remuneração média, incluindo vínculos com carteira assinada (CLT) e administrativos ou estatutários. No gráfico, comparam-se os valores para as origens dos trabalhadores. As informações são baseadas em dados oficiais da Relação Anual de Informações Sociais (RAIS) de {0} (a mais atual disponível). A RAIS de cada ano é divulgada no ano seguinte em relação aos dados do ano anterior. No caso, portanto, a situação corresponde ao cenário com o qual se iniciou o ano de {1}."
              api:
                fixed: "/thematic/raisagrmun?categorias=1&agregacao=min,max&valor=rais_agr_ano_nu"
                options:
                  calcs:
                    - id: "proximo_ano"
                      function: "calc_addition_ids_ds"
                      fn_args:
                        - named_prop: "agr_max_rais_agr_ano_nu"
                        - fixed: 1
                        - fixed: 1
              args:
                - named_prop: "agr_max_rais_agr_ano_nu"
                - named_prop: "calc_proximo_ano"
              
        chart_type: "BAR"
        api:
          template: "/thematic/raisagrmun?categorias=rais_agr_ano_nu,rais_agr_nacion_cont_ds,'Remuneração Média dos Trabalhadores Estrangeiros com Vínculo de Emprego'-ds_indicador&agregacao=sum,sum,sum,sum&valor=rais_agr_vinc_medios_crem_qt,rais_agr_massa_salarial,rais_agr_massa_salarial_sm,rais_agr_vinc_3112_qt&filtros=eq-rais_agr_ano_nu-{0},and,ne-rais_agr_nacion_ds-'Brasil'"
          args:
            - base_object: "rais_agr"
              named_prop: "agr_max_rais_agr_ano_nu"
          options:
            calcs:
              - id: "salario_medio"
                function: "calc_proportion_ds"
                fn_args:
                  - named_prop: 'agr_sum_rais_agr_massa_salarial'
                  - named_prop: 'agr_sum_rais_agr_vinc_medios_crem_qt'
              - id: "salario_medio_sm"
                function: "calc_proportion_ds"
                fn_args:
                  - named_prop: 'agr_sum_rais_agr_massa_salarial_sm'
                  - named_prop: 'agr_sum_rais_agr_vinc_medios_crem_qt'
              - id: "faixa"
                function: "get_bin"
                fn_args:
                  - named_prop: "calc_salario_medio_sm"
                  - fixed: [1,1.5,2,3,4,5,7,10,15,20,30,40,50,60,70,80,90,100]
                  - fixed: 2
              - id: "qtde_trabalhadores"
                function: "get_bin"
                fn_args:
                  - named_prop: 'agr_sum_rais_agr_vinc_3112_qt'
                  - fixed: [100]
              - id: "bar_description"
                function: "applyInterpolReplaceDatasetParam"
                fn_args:
                  - fixed: 
                      template: "{0} - {1} salários mínimos"
                      args:
                        - named_prop: "rais_agr_nacion_cont_ds"
                        - named_prop: "calc_faixa"
            formatters:
              - id: "calc_salario_medio"
                format: 'monetario'
                uiTags: false
              - id: "calc_salario_medio_sm"
                format: 'real'
        headers:
          - text: 'Origem'
            align: 'left'
            value: 'rais_agr_nacion_cont_ds'
          - text: 'Indicador'
            align: 'left'
            value: 'ds_indicador'
          - text: 'Ano'
            align: 'left'
            value: 'rais_agr_ano_nu'
          - text: 'Remuneração Média'
            value: 'calc_faixa'
          # - text: 'Remuneração Média (R$)'
          #   value: 'vl_indicador'
          #   format: "monetario"
        chart_options:
          id: "rais_agr_nacion_cont_ds"
          y: "rais_agr_nacion_cont_ds"
          x: "calc_salario_medio_sm"
          # orientation: "vertical"
          text: "calc_bar_description"
          show_x_axis: false
          show_y_axis: false
          hide_legend: true
          order_field: "calc_salario_medio_sm"
          colorScale:
            name: "BuPu"
            type: "singleHue"
            order: 'desc'
          # color: "#238B45"
        source:
          desc: "MTE/RAIS"

# ========================================================
      - id: "mapa_imigrantes_remuneracao"
        title: 
          fixed: "Distribuição Geográfica das Remunerações Médias de Trabalhadores Imigrantes Estrangeiros"
        title_comment:
          template: "{0}, {1}"
          api:
            fixed: "/thematic/raisagrmun?categorias=1&agregacao=min,max&valor=rais_agr_ano_nu"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - named_prop: "agr_max_rais_agr_ano_nu"
        # info:
        #   - type: "text"
        #     title: "Sobre a métrica"
        #     content:
        #       fixed: "O total de resgates foi calculado com base em informações extraídas do Banco de Dados COETE (Ministério do Trabalho), que inclui beneficiários e não-beneficiários do Seguro-Desemprego modalidade trabalhador resgatado."
        msgNoData:
          desc: "No período, não houve trabalhadores imigrantes estrangeiros admitidos no mercado de trabalho formal."
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  template: "/thematic/raisagrmun?categorias=rais_agr_ano_nu&agregacao=sum,sum&valor=rais_agr_vinc_medios_crem_qt,rais_agr_massa_salarial_sm&filtros=eq-rais_agr_ano_nu-{0},and,ne-rais_agr_nacion_ds-'Brasil'"
                  args:
                    - base_object: "rais_agr"
                      named_prop: "agr_max_rais_agr_ano_nu"
                  options:
                    calcs:
                      - id: "salario_medio_sm"
                        function: "calc_proportion_ds"
                        fn_args:
                          - named_prop: 'agr_sum_rais_agr_massa_salarial_sm'
                          - named_prop: 'agr_sum_rais_agr_vinc_medios_crem_qt'
                      - id: "faixa"
                        function: "get_bin"
                        fn_args:
                          - named_prop: "calc_salario_medio_sm"
                          - fixed: [1,1.5,2,3,4,5,7,10,15,20,30,40,50,60,70,80,90,100]
                          - fixed: 2
                args:
                  - prop: "value"
                    template: "{0} salários mínimos"
                    args:
                      - named_prop: 'calc_faixa'
                        default: "Nenhum"
                  - prop: "description"
                    fixed: "Remuneração Média no Brasil"
          - type: "text"
            title: ""
            content:
              template: "Em destaque, a remuneração média dos trabalhadores imigrantes estrangeiros, incluindo vínculos com carteira assinada (CLT) e administrativos ou estatutários. No mapa, comparam-se as diferentes unidades federativas quanto à remuneração média dos trabalhadores imigrantes estrangeiros. A escala de cores varia do branco (menor quantidade) para o azul escuro (maior quantidade). As informações são baseadas em dados oficiais da Relação Anual de Informações Sociais (RAIS) de {0} (a mais atual disponível). A RAIS de cada ano é divulgada no ano seguinte em relação aos dados do ano anterior. No caso, portanto, a situação corresponde ao cenário com o qual se iniciou o ano de {1}."
              api:
                fixed: "/thematic/raisagrmun?categorias=1&agregacao=min,max&valor=rais_agr_ano_nu"
                options:
                  calcs:
                    - id: "proximo_ano"
                      function: "calc_addition_ids_ds"
                      fn_args:
                        - named_prop: "agr_max_rais_agr_ano_nu"
                        - fixed: 1
                        - fixed: 1
              args:
                - named_prop: "agr_max_rais_agr_ano_nu"
                - named_prop: "calc_proximo_ano"
          - id: "select_origem"
            type: "select"
            label: "Origem/Continente"
            api:
              fixed: "/thematic/raisagrmun?categorias=rais_agr_nacion_cont_ds&agregacao=DISTINCT&ordenacao=rais_agr_nacion_cont_ds&filtros=ne-rais_agr_nacion_ds-'Brasil'"
            args:
              - prop: "id"
                named_prop: "rais_agr_nacion_cont_ds"
              - prop: "label"
                named_prop: "rais_agr_nacion_cont_ds"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,eq-rais_agr_nacion_cont_ds-'{0}'"
                api:
                  args:
                    - named_prop: "rais_agr_nacion_cont_ds"
        chart_type: "MAP_TOPOJSON"
        api:
          template: "/thematic/raisagrmun?categorias=rais_agr_ano_nu,rais_agr_uf_ibge_ds,rais_agr_uf_ibge_cd&agregacao=sum,sum,sum&valor=rais_agr_vinc_medios_crem_qt,rais_agr_massa_salarial_sm,rais_agr_massa_salarial&filtros=eq-rais_agr_ano_nu-{0},and,ne-rais_agr_nacion_ds-'Brasil',and,nn-rais_agr_uf_ibge_ds"
          args:
            - base_object: "rais_agr"
              named_prop: "agr_max_rais_agr_ano_nu"
          options:
            calcs:
              - id: "salario_medio"
                function: "calc_proportion_ds"
                fn_args:
                  - named_prop: 'agr_sum_rais_agr_massa_salarial'
                  - named_prop: 'agr_sum_rais_agr_vinc_medios_crem_qt'
              - id: "salario_medio_sm"
                function: "calc_proportion_ds"
                fn_args:
                  - named_prop: 'agr_sum_rais_agr_massa_salarial_sm'
                  - named_prop: 'agr_sum_rais_agr_vinc_medios_crem_qt'
              - id: "faixa"
                function: "get_bin"
                fn_args:
                  - named_prop: "calc_salario_medio_sm"
                  - fixed: [1,1.5,2,3,4,5,7,10,15,20,30,40,50,60,70,80,90,100]
                  - fixed: 2
              - id: "faixa_description"
                function: "applyInterpolReplaceDatasetParam"
                fn_args:
                  - fixed: 
                      template: "{0} salários mínimos"
                      args:
                        - named_prop: "calc_faixa"
              # - id: "deviation"
              #   function: "get_log"
              #   fn_args:
              #     - named_prop: "calc_salario_medio_sm"
        headers:
          - text: 'Unidade Federativa'
            align: 'left'
            value: 'rais_agr_uf_ibge_ds'
          - text: 'Ano'
            value: 'rais_agr_ano_nu'
          - text: 'Remuneração Média'
            value: 'calc_faixa_description'
        chart_options:
          id_field: 'rais_agr_uf_ibge_cd'
          topo_key: "codigo"
          value_field: 'calc_salario_medio'
          colorScale:
            name: 'Reds'
            order: 'desc'
        source:
          desc: "MTE/RAIS"
## ========================================================
      - id: "mapa_imigrantes_admitidos"
        title: 
          fixed: "Distribuição Geográfica de Contratações de Trabalhadores Imigrantes Estrangeiros"
        title_comment:
          template: "{0}, de {1} a {2}"
          api:
            fixed: "/thematic/raisagrmun?categorias=1&agregacao=min,max&valor=rais_agr_ano_nu"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - named_prop: "agr_min_rais_agr_ano_nu"
            - named_prop: "agr_max_rais_agr_ano_nu"
        # info:
        #   - type: "text"
        #     title: "Sobre a métrica"
        #     content:
        #       fixed: "O total de resgates foi calculado com base em informações extraídas do Banco de Dados COETE (Ministério do Trabalho), que inclui beneficiários e não-beneficiários do Seguro-Desemprego modalidade trabalhador resgatado."
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  fixed: "/thematic/raisagrmun?categorias=1&agregacao=sum&valor=rais_agr_vinc_3112_qt&filtros=ne-rais_agr_nacion_ds-'Brasil'"
                  options:
                    calcs:
                      - id: "faixa"
                        function: "get_bin"
                        fn_args:
                          - named_prop: "agr_sum_rais_agr_vinc_3112_qt"
                args:
                  - prop: "value"
                    named_prop: 'calc_faixa'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Nenhum"
                  - prop: "description"
                    fixed: "Trabalhadores imigrantes estrangeiros Admitidos no Mercado de Trabalho Formal"
          - type: "text"
            title: ""
            content:
              template: "Em destaque, o número de trabalhadores imigrantes estrangeiros admitidos no mercado de trabalho formal de {0} a {1}. No mapa, as diferentes unidades federativas podem ser comparadas. A escala de cores varia do branco (menor quantidade) para o vermelho (maior quantidade)."
              api:
                fixed: "/thematic/raisagrmun?categorias=1&agregacao=min,max&valor=rais_agr_ano_nu"
              args:
                - named_prop: "agr_min_rais_agr_ano_nu"
                - named_prop: "agr_max_rais_agr_ano_nu"
          - type: "slider"
            cls: "pl-2"
            id: "slider_periodo"
            range: true
            title: ""
            api:
              fixed: "/thematic/raisagrmun?categorias=1&agregacao=min,max&valor=rais_agr_ano_nu"
            args:
              - prop: "min"
                named_prop: "agr_min_rais_agr_ano_nu"
              - prop: "max"
                named_prop: "agr_max_rais_agr_ano_nu"
            selection:
              event: "selection"
              rules:
                filter: ",and,ge-rais_agr_ano_nu-{0},and,le-rais_agr_ano_nu-{1}"
                api:
                  args:
                    - named_prop: "value_min"
                    - named_prop: "value_max"
          - id: "select_origem"
            type: "select"
            label: "Origem/Continente"
            api:
              fixed: "/thematic/raisagrmun?categorias=rais_agr_nacion_cont_ds&agregacao=DISTINCT&ordenacao=rais_agr_nacion_cont_ds&filtros=ne-rais_agr_nacion_ds-'Brasil'"
            args:
              - prop: "id"
                named_prop: "rais_agr_nacion_cont_ds"
              - prop: "label"
                named_prop: "rais_agr_nacion_cont_ds"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,eq-rais_agr_nacion_cont_ds-'{0}'"
                api:
                  args:
                    - named_prop: "rais_agr_nacion_cont_ds"
        chart_type: "MAP_TOPOJSON"
        api:
          template: "/thematic/raisagrmun?categorias=rais_agr_uf_ibge_ds,rais_agr_uf_ibge_cd&agregacao=sum&valor=rais_agr_vinc_3112_qt&filtros=ne-rais_agr_nacion_ds-'Brasil',and,nn-rais_agr_uf_ibge_ds"
          options:
            calcs:
              - id: "faixa"
                function: "get_bin"
                fn_args:
                  - named_prop: "agr_sum_rais_agr_vinc_3112_qt"
              - id: "deviation"
                function: "get_log"
                fn_args:
                  - fixed: "agr_sum_rais_agr_vinc_3112_qt"
            formatters:
              - id: "agr_sum_rais_agr_vinc_3112_qt"
                format: 'inteiro'
              - id: "calc_faixa"
                format: "inteiro"
        headers:
          - text: 'Unidade Federativa'
            align: 'left'
            value: 'rais_agr_uf_ibge_ds'
          - text: 'Nº de imigrantes estrangeiros admitidos'
            value: 'fmt_calc_faixa'
        chart_options:
          id_field: 'rais_agr_uf_ibge_cd'
          topo_key: 'codigo'
          value_field: 'calc_deviation'
          colorScale:
            name: 'Reds'
        source:
          desc: "MTE/RAIS"
# ========================================================
      - id: "mapa_imigrantes_admitidos_calor"
        chart_type: "MAP_HEAT"
        title: 
          fixed: "Mapa de Calor - Distribuição Geográfica de Contratações de Trabalhadores Imigrantes Estrangeiros"
        title_comment:
          template: "{0}, de {1} a {2}"
          api:
            fixed: "/thematic/raisagrmun?categorias=1&agregacao=min,max&valor=rais_agr_ano_nu"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - named_prop: "agr_min_rais_agr_ano_nu"
            - named_prop: "agr_max_rais_agr_ano_nu"
        # info:
        #   - type: "text"
        #     title: "Sobre"
        #     content:
        #       fixed: ""
        description:
          - type: "text"
            title: ""
            content:
              fixed: "Este mapa de calor representa dinamicamente, conforme suas cores, medidas da intensidade da ocorrência de admissão de trabalhadores imigrantes estrangeiros. A variação de cores frias para cores quentes (de forma crescente) indica locais de maior intensidade de contratação de imigrantes estrangeiros."
          - type: "slider"
            cls: "pl-2"
            id: "slider_periodo"
            range: true
            title: ""
            api:
              fixed: "/thematic/raisagrmun?categorias=1&agregacao=min,max&valor=rais_agr_ano_nu"
            args:
              - prop: "min"
                named_prop: "agr_min_rais_agr_ano_nu"
              - prop: "max"
                named_prop: "agr_max_rais_agr_ano_nu"
            selection:
              event: "selection"
              rules:
                filter: ",and,ge-rais_agr_ano_nu-{0},and,le-rais_agr_ano_nu-{1}"
                api:
                  args:
                    - named_prop: "value_min"
                    - named_prop: "value_max"
          - id: "select_origem"
            type: "select"
            label: "Origem/Continente"
            api:
              fixed: "/thematic/raisagrmun?categorias=rais_agr_nacion_cont_ds&agregacao=DISTINCT&ordenacao=rais_agr_nacion_cont_ds&filtros=ne-rais_agr_nacion_ds-'Brasil'"
            args:
              - prop: "id"
                named_prop: "rais_agr_nacion_cont_ds"
              - prop: "label"
                named_prop: "rais_agr_nacion_cont_ds"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,eq-rais_agr_nacion_cont_ds-'{0}'"
                api:
                  args:
                    - named_prop: "rais_agr_nacion_cont_ds"
        api:
          template: "/thematic/raisagrmun?categorias='MIGRA_ATIVOS_CONTRATADOS'-cd_indicador,rais_agr_uf_ibge_sg,rais_agr_mun_ibge_ds,rais_agr_mun_ibge_cd,rais_agr_mun_latitude-latitude,rais_agr_mun_longitude-longitude&agregacao=sum&valor=rais_agr_vinc_3112_qt&filtros=ne-rais_agr_nacion_ds-'Brasil',and,nn-rais_agr_mun_ibge_cd"
          options:
            calcs:
              - id: "faixa"
                function: "get_bin"
                fn_args:
                  - named_prop: "agr_sum_rais_agr_vinc_3112_qt"
            formatters:
              - id: "agr_sum_rais_agr_vinc_3112_qt"
                format: 'inteiro'
              - id: "calc_faixa"
                format: "inteiro"
        headers:
          - text: 'Município'
            align: 'left'
            value: 'rais_agr_mun_ibge_ds'
          - text: 'UF'
            align: 'left'
            value: 'rais_agr_uf_ibge_sg'
          # - text: 'Nº de trabalhadores imigrantes estrangeiros admitidos'
          #   value: 'fmt_agr_sum_vl_indicador'
          - text: 'Nº de trabalhadores imigrantes estrangeiros admitidos'
            value: 'fmt_calc_faixa'
        chart_options:
          height_proportion: 1.77
          type: 'heat'
          lat: 'latitude'
          long: 'longitude'
          indicadores: ["MIGRA_ATIVOS_CONTRATADOS"]
          value_field: 'agr_sum_rais_agr_vinc_3112_qt'
        source:
          desc: "MTE/RAIS"

