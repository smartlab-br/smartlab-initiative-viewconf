# ====================================================          
principais:
  - relevance: 'lead' 
    cls: 'xs12 xl6'
    rowClass: "pt-0 px-3 pb-5"
    api:
      template: "/sst/indicadoresmunicipais?categorias=cd_indicador,vl_indicador,ds_fonte,nu_competencia&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'91',and,eq-nu_competencia-nu_competencia_max,and,eq-cd_mun_ibge_dv-{0}"
      args:
        - named_prop: "idLocalidade"
    args:
      - prop: "value"
        named_prop: 'vl_indicador'
        format: 'inteiro'
        collapse:
          format: 'real'
      - prop: "description"
        fixed: "CONCESSÕES DE BENEFÍCIO PREVIDENCIÁRIO - AUXÍLIO-DOENÇA POR ACIDENTE DO TRABALHO (B91)"
      - prop: 'comment'
        template: "({0}, {1})"
        args:
          - named_prop: "ds_fonte"
          - named_prop: "nu_competencia"
  - relevance: 'lead' 
    cls: 'xs12 xl6'
    rowClass: "pt-0 px-3 pb-5"
    api:
      template: "/sst/indicadoresmunicipais?categorias=cd_indicador,vl_indicador,ds_fonte,nu_competencia&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'92',and,eq-nu_competencia-nu_competencia_max,and,eq-cd_mun_ibge_dv-{0}"
      args:
        - named_prop: "idLocalidade"
    args:
      - prop: "value"
        named_prop: 'vl_indicador'
        format: 'inteiro'
        collapse:
          format: 'real'
      - prop: "description"
        fixed: "CONCESSÕES DE BENEFÍCIO PREVIDENCIÁRIO - APOSENTADORIA POR INVALIDEZ POR ACIDENTE DO TRABALHO (B92)"
      - prop: 'comment'
        template: "({0}, {1})"
        args:
          - named_prop: "ds_fonte"
          - named_prop: "nu_competencia"
# ====================================================          
secoes:
  - id: "frequencia_beneficios"
    name: "Afastamentos Previdenciários Acidentários"
    cards:
# ==========================================================
      - id: "mapa_b91"
        title: 
          fixed: "Concessão de Benefícios Previdenciários Acidentários (B91)"
        title_comment:
          template: "{0}, {1}"
          api:
            fixed: "/sst/indicadoresnacionais?categorias=cd_indicador,vl_indicador,ds_fonte,nu_competencia&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'91',and,eq-nu_competencia-nu_competencia_max"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - named_prop: "nu_competencia"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              template: "Os dados brutos analisados têm as seguintes referências fundamentais, para consulta e conferência:<br/>Nome: {0}<br/>Fonte: {1}<br/>Ano: {2}"
              api:
                fixed: "/sst/indicadoresnacionais?categorias=cd_indicador,vl_indicador,ds_fonte,nu_competencia&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'91',and,eq-nu_competencia-nu_competencia_max"
              args:
                - named_prop: 'cd_indicador'
                - named_prop: 'ds_fonte'
                - named_prop: 'nu_competencia'
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  template: "/sst/indicadoresmunicipais?categorias=cd_indicador,vl_indicador,ds_fonte,nu_competencia&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'91',and,eq-nu_competencia-nu_competencia_max,and,eq-cd_mun_ibge_dv-{0}"
                  args:
                    - named_prop: "idLocalidade"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'B91 no município'
              - relevance: 'low'
                cls: 'xs12 md6'
                api:
                  template: "/sst/indicadoresestaduais?categorias=cd_indicador,vl_indicador,ds_fonte,nu_competencia&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'91',and,eq-nu_competencia-nu_competencia_max,and,eq-cd_uf-{0}"
                  args:
                    - named_prop: "cd_uf"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'B91 na UF'
              - relevance: 'low'
                cls: 'xs5 md6'
                api:
                  fixed: "/sst/indicadoresnacionais?categorias=cd_indicador,vl_indicador,ds_fonte,nu_competencia&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'91',and,eq-nu_competencia-nu_competencia_max"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: "B91 NO PAÍS"
          - type: "text"
            title: ""
            content:
              fixed: "Em destaque, o número de concessões de benefícios previdenciários do tipo Concessão de Benefícios Previdenciários Acidentários (B91) no município, na unidade federativa e no país para a população com vínculo de emprego regular.  No mapa, apresenta-se a perspectiva comparativa dos municípios da unidade federativa. A escala de cores varia do branco (menor quantidade) para o vermelho (maior quantidade de acidentes no ano). Utilize os filtros abaixo para combinar as perspectivas."
          - type: "ranking"
            api:
              template: "/sst/indicadoresmunicipais?categorias=rank_uf,rank_uf_total,rank_br,rank_br_total&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'91',and,eq-nu_competencia-nu_competencia_max,and,eq-cd_mun_ibge_dv-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: 'regional_rank'
                named_prop: "rank_uf"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'regional_total'
                named_prop: "rank_uf_total"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'national_rank'
                named_prop: "rank_br"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'national_total'
                named_prop: "rank_br_total"
                format: 'inteiro'
                precision: 0
                default: 0
          - id: "select_cid_b91"
            type: "select"
            multiple: true
            label: "Categoria CID"
            api:
              template: "/sst/beneficios?categorias=cd_uf,cd_agrupamento_categoria_cid&agregacao=DISTINCT&ordenacao=cd_agrupamento_categoria_cid&filtros=ne-cd_agrupamento_categoria_cid-'',and,eq-cd_uf-{0},and,eq-cd_especie_beneficio-91,and,eq-ano_beneficio-{1}"
              args:
                - named_prop: "cd_uf"
                - base_object: "sst_beneficio"
                  named_prop: "agr_max_ano_beneficio"
            args:
              - prop: "id"
                named_prop: "cd_agrupamento_categoria_cid"
              - prop: "label"
                named_prop: "cd_agrupamento_categoria_cid"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-cd_agrupamento_categoria_cid-{0}"
                api:
                  args:
                    - named_prop: "cd_agrupamento_categoria_cid"
          - id: "select_cnae"
            type: "select"
            multiple: true
            label: "Setor Econômico"
            api:
              template: "/sst/beneficios?categorias=ds_cnae_classe&agregacao=distinct&ordenacao=ds_cnae_classe&filtros=ne-ds_cnae_classe-'',and,eq-cd_uf-{0},and,eq-cd_especie_beneficio-91,and,eq-ano_beneficio-{1}"
              args:
                - named_prop: "cd_uf"
                - base_object: "sst_beneficio"
                  named_prop: "agr_max_ano_beneficio"
            args:
              - prop: "id"
                named_prop: "ds_cnae_classe"
              - prop: "label"
                named_prop: "ds_cnae_classe"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-ds_cnae_classe-{0}"
                api:
                  args:
                    - named_prop: "ds_cnae_classe"
        chart_type: "MAP_TOPOJSON"
        api: 
          template: "/sst/beneficios?categorias=cd_municipio_ibge_dv,nm_municipio,ano_beneficio&agregacao=COUNT&filtros=eq-cd_uf-{0},and,eq-cd_especie_beneficio-91,and,eq-ano_beneficio-{1}"
          args:
            - named_prop: "cd_uf"
            - base_object: "sst_beneficio"
              named_prop: "agr_max_ano_beneficio"
          options:
            calcs:
              - id: "deviation_b91"
                function: "get_log"
                fn_args:
                  - fixed: "agr_count"
            formatters:
              - id: "agr_count"
                format: 'inteiro'
        headers:
          - text: 'Município'
            align: 'left'
            value: 'nm_municipio'
          - text: 'Ano'
            align: 'left'
            value: 'ano_beneficio'
          - text: 'Qtde de Benefícios B91 - Auxílio-doença por acidente de trabalho'
            value: 'fmt_agr_count'
        chart_options:
          id_field: 'cd_municipio_ibge_dv'
          topo_key: "codarea"
          value_field: 'calc_deviation_b91'
          colorScale:
            name: "Reds"
        # source:
        #   desc_field: "ds_fonte"
# ==========================================================
      - id: "bar_ben_b91"
        title: 
          fixed: "Concessão de Benefícios Previdenciários Acidentários (B91) – Série Histórica"
        title_comment:
          template: "{0}, de {1} a {2}"
          api:
            - fixed: "/sst/indicadoresnacionais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max,ds_fonte&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'91',and,eq-nu_competencia-nu_competencia_max"
            - fixed: "/indicadoresnacionais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max,ds_fonte&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'10_10_01_91',and,eq-nu_competencia-nu_competencia_max"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - id: "10_10_01_91"
              named_prop: "nu_competencia_min"
            - id: "sst_bene_qtd_especie"
              named_prop: "nu_competencia_max"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              template: "Os dados brutos analisados têm as seguintes referências fundamentais, para consulta e conferência:<br/>
                          Nome: {0}<br/>Fonte: {1}<br/>Ano: {2} a 2017<br/>
                          Nome: {3}<br/>Fonte: {4}<br/>Ano: 2018 a {5}"
              api:
                - fixed: "/sst/indicadoresnacionais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max,ds_fonte&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'91',and,eq-nu_competencia-nu_competencia_max"
                - fixed: "/indicadoresnacionais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max,ds_fonte&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'10_10_01_91',and,eq-nu_competencia-nu_competencia_max"
              args:
                - id: "10_10_01_91"
                  named_prop: 'cd_indicador'
                - id: "10_10_01_91"
                  named_prop: 'ds_fonte'
                - id: "10_10_01_91"
                  named_prop: 'nu_competencia_min'
                - id: "sst_bene_qtd_especie"
                  named_prop: 'cd_indicador'
                - id: "sst_bene_qtd_especie"
                  named_prop: 'ds_fonte'
                - id: "sst_bene_qtd_especie"
                  named_prop: 'nu_competencia_max'
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  - template: "/sst/indicadoresmunicipais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'91',and,gt-nu_competencia-2017,and,eq-cd_mun_ibge_dv-{0}"
                    args:
                      - named_prop: "idLocalidade"
                  - template: "/indicadoresmunicipais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'10_10_01_91',and,le-nu_competencia-'2017',and,eq-cd_municipio_ibge_dv-{0}"
                    args:
                      - named_prop: "idLocalidade"
                api_options:
                  combine:
                  - id: "total"
                    desc: "total_concessao"
                    function: 'calc_addition'
                    fn_args:
                      - id: "10_10_01_91"
                        named_prop: "agr_sum_vl_indicador"
                        default: 0
                      - id: "sst_bene_qtd_especie"
                        named_prop: "agr_sum_vl_indicador"
                        default: 0
                args:
                  - id: "total"
                    prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'B91 acumulado no município'
              - relevance: 'low'
                cls: 'xs12 md6'
                api:
                  - template: "/sst/indicadoresestaduais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'91',and,gt-nu_competencia-2017,and,eq-cd_uf-{0}"
                    args:
                      - named_prop: "cd_uf"
                  - template: "/indicadoresestaduais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'10_10_01_91',and,le-nu_competencia-'2017',and,eq-cd_uf-{0}"
                    args:
                      - named_prop: "cd_uf"
                api_options:
                  combine:
                  - id: "total"
                    desc: "total_concessao"
                    function: 'calc_addition'
                    fn_args:
                      - id: "10_10_01_91"
                        named_prop: "agr_sum_vl_indicador"
                        default: 0
                      - id: "sst_bene_qtd_especie"
                        named_prop: "agr_sum_vl_indicador"
                        default: 0
                args:
                  - id: "total"
                    prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'B91 acumulado na UF'
              - relevance: 'low'
                cls: 'xs12 md6'
                api:
                  - fixed: "/sst/indicadoresnacionais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'91',and,gt-nu_competencia-2017"
                  - fixed: "/indicadoresnacionais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'10_10_01_91',and,le-nu_competencia-'2017'"
                api_options:
                  combine:
                  - id: "total"
                    desc: "total_concessao"
                    function: 'calc_addition'
                    fn_args:
                      - id: "10_10_01_91"
                        named_prop: "agr_sum_vl_indicador"
                        default: 0
                      - id: "sst_bene_qtd_especie"
                        named_prop: "agr_sum_vl_indicador"
                        default: 0
                args:
                  - id: "total"
                    prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: "B91 acumulado NO PAÍS"
          - type: "text"
            title: ""
            content:
              template: "Em destaque, o número acumulado de concessões de benefícios previdenciários do tipo Concessão de Benefícios Previdenciários Acidentários (B91) no município, na unidade federativa de {0} a {1}. No gráfico, apresenta-se a evolução histórica do número de concessões no período."
              preloaded:
                prop: "centralindicadores"
                function: "slice"
                id: ['10_10_01_91']
                year: "min"
              args:
                - named_prop: 'nu_competencia_min'
                - named_prop: 'nu_competencia_max'
        chart_type: "BAR"
        api:
          - template: "/sst/indicadoresmunicipais?categorias=cd_indicador,nu_competencia,vl_indicador,ds_fonte&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'91',and,gt-nu_competencia-2017,and,eq-cd_mun_ibge_dv-{0}"
            args:
              - named_prop: "idLocalidade"
          - template: "/indicadoresmunicipais?categorias=cd_indicador,nu_competencia,vl_indicador&filtros=eq-cd_indicador-'10_10_01_91',and,le-nu_competencia-'2017',and,eq-cd_municipio_ibge_dv-{0}"
            args:
              - named_prop: "idLocalidade"
        api_options:
          formatters:
            - id: "vl_indicador"
              format: "inteiro"
        headers:
          - text: 'Ano'
            align: 'left'
            value: 'nu_competencia'
          - text: 'Qtde de Benefícios B91 - Auxílio-doença por acidente de trabalho'
            value: 'fmt_vl_indicador'
        chart_options:
          id: "nu_competencia"
          x: "nu_competencia"
          y: "vl_indicador"
          orientation: "vertical"
          text: "fmt_vl_indicador"
          show_x_axis: true
          show_y_axis: false
          hide_legend: true
          color: "#238B45"
        source:
          desc_field: "ds_fonte"
# ==========================================================
      - id: "mapa_b92"
        title: 
          fixed: "Concessão de Aposentadorias por Invalidez Acidentária (B92)"
        title_comment:
          template: "{0}, {1}"
          api:
            fixed: "/sst/indicadoresnacionais?categorias=cd_indicador,vl_indicador,ds_fonte,nu_competencia&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'91',and,eq-nu_competencia-nu_competencia_max"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - named_prop: "nu_competencia"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              template: "Os dados brutos analisados têm as seguintes referências fundamentais, para consulta e conferência:<br/>Nome: {0}<br/>Fonte: {1}<br/>Ano: {2}"
              api:
                fixed: "/sst/indicadoresnacionais?categorias=cd_indicador,vl_indicador,ds_fonte,nu_competencia&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'91',and,eq-nu_competencia-nu_competencia_max"
              args:
                - named_prop: 'cd_indicador'
                - named_prop: 'ds_fonte'
                - named_prop: 'nu_competencia'
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  template: "/sst/indicadoresmunicipais?categorias=cd_indicador,vl_indicador,ds_fonte,nu_competencia&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'92',and,eq-nu_competencia-nu_competencia_max,and,eq-cd_mun_ibge_dv-{0}"
                  args:
                    - named_prop: "idLocalidade"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'B92 no município'
              - relevance: 'low'
                cls: 'xs12 md6'
                api:
                  template: "/sst/indicadoresestaduais?categorias=cd_indicador,vl_indicador,ds_fonte,nu_competencia&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'92',and,eq-nu_competencia-nu_competencia_max,and,eq-cd_uf-{0}"
                  args:
                    - named_prop: "cd_uf"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'B92 na UF'
              - relevance: 'low'
                cls: 'xs12 md6'
                api:
                  fixed: "/sst/indicadoresnacionais?categorias=cd_indicador,vl_indicador,ds_fonte,nu_competencia&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'92',and,eq-nu_competencia-nu_competencia_max"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: "B92 NO PAÍS"
          - type: "text"
            title: ""
            content:
              fixed: "Em destaque, o número de concessões de benefícios previdenciários do tipo Aposentadoria por Invalidez Acidentária (B92) no município, na unidade federativa e no país para a população com vínculo de emprego regular.  No mapa, apresenta-se a perspectiva comparativa dos municípios da unidade federativa. A escala de cores varia do branco (menor quantidade) para o vermelho (maior quantidade de acidentes no ano)."
          - type: "ranking"
            api:
              template: "/sst/indicadoresmunicipais?categorias=rank_uf,rank_uf_total,rank_br,rank_br_total&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'92',and,eq-nu_competencia-nu_competencia_max,and,eq-cd_mun_ibge_dv-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: 'regional_rank'
                named_prop: "rank_uf"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'regional_total'
                named_prop: "rank_uf_total"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'national_rank'
                named_prop: "rank_br"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'national_total'
                named_prop: "rank_br_total"
                format: 'inteiro'
                precision: 0
                default: 0
          # - id: "select_cid_b92"
          #   type: "select"
          #   multiple: true
          #   label: "Categoria CID"
          #   api:
          #     template: "/sst/beneficios?categorias=cd_uf,cd_agrupamento_categoria_cid&agregacao=DISTINCT&ordenacao=cd_agrupamento_categoria_cid&filtros=eq-cd_uf-{0},and,eq-cd_especie_beneficio-92,and,eq-ano_beneficio-{1}"
          #     args:
          #       - named_prop: "cd_uf"
          #       - base_object: "sst_beneficio"
          #         named_prop: "agr_max_ano_beneficio"
          #   args:
          #     - prop: "id"
          #       named_prop: "cd_agrupamento_categoria_cid"
          #     - prop: "label"
          #       named_prop: "cd_agrupamento_categoria_cid"
          #       null_value: "(Não informado)"
          #   selection:
          #     event: "selection" 
          #     rules:
          #       filter: ",and,in-cd_agrupamento_categoria_cid-{0}"
          #       api:
          #         args:
          #           - named_prop: "cd_agrupamento_categoria_cid"
        chart_type: "MAP_TOPOJSON"
        api: 
          template: "/sst/beneficios?categorias=cd_municipio_ibge_dv,nm_municipio,ano_beneficio&agregacao=COUNT&filtros=eq-cd_uf-{0},and,eq-cd_especie_beneficio-92,and,eq-ano_beneficio-{1}"
          args:
            - named_prop: "cd_uf"
            - base_object: "sst_beneficio"
              named_prop: "agr_max_ano_beneficio"
          options:
            calcs:
              - id: "deviation_b92"
                function: "get_log"
                fn_args:
                  - fixed: "agr_count"
            formatters:
              - id: "agr_count"
                format: 'inteiro'
        headers:
          - text: 'Município'
            align: 'left'
            value: 'nm_municipio'
          - text: 'Ano'
            align: 'left'
            value: 'ano_beneficio'
          - text: 'Qtde de Benefícios B92 - Aposentadorias por Invalidez Acidentária'
            value: 'fmt_agr_count'
        chart_options:
          id_field: 'cd_municipio_ibge_dv'
          topo_key: "codarea"
          value_field: 'calc_deviation_b92'
          colorScale:
            name: "Reds"
        # source:
        #   desc_field: "ds_fonte"
# ==============================================
      - id: "bar_ben_b92"
        title: 
          fixed: "Concessão de Aposentadorias por Invalidez Acidentária (B92) – Série Histórica"
        title_comment:
          template: "{0}, de {1} a {2}"
          api:
            - fixed: "/sst/indicadoresnacionais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max,ds_fonte&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'91',and,eq-nu_competencia-nu_competencia_max"
            - fixed: "/indicadoresnacionais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max,ds_fonte&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'10_10_01_91',and,eq-nu_competencia-nu_competencia_max"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - id: "10_10_01_91"
              named_prop: "nu_competencia_min"
            - id: "sst_bene_qtd_especie"
              named_prop: "nu_competencia_max"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              template: "Os dados brutos analisados têm as seguintes referências fundamentais, para consulta e conferência:<br/>
                          Nome: {0}<br/>Fonte: {1}<br/>Ano: {2} a 2017<br/>
                          Nome: {3}<br/>Fonte: {4}<br/>Ano: 2018 a {5}"
              api:
                - fixed: "/sst/indicadoresnacionais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max,ds_fonte&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'91',and,eq-nu_competencia-nu_competencia_max"
                - fixed: "/indicadoresnacionais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max,ds_fonte&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'10_10_01_92',and,eq-nu_competencia-nu_competencia_max"
              args:
                - id: "10_10_01_92"
                  named_prop: 'cd_indicador'
                - id: "10_10_01_92"
                  named_prop: 'ds_fonte'
                - id: "10_10_01_92"
                  named_prop: 'nu_competencia_min'
                - id: "sst_bene_qtd_especie"
                  named_prop: 'cd_indicador'
                - id: "sst_bene_qtd_especie"
                  named_prop: 'ds_fonte'
                - id: "sst_bene_qtd_especie"
                  named_prop: 'nu_competencia_max'
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  - template: "/sst/indicadoresmunicipais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'92',and,gt-nu_competencia-2017,and,eq-cd_mun_ibge_dv-{0}"
                    args:
                      - named_prop: "idLocalidade"
                  - template: "/indicadoresmunicipais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'10_10_01_92',and,le-nu_competencia-'2017',and,eq-cd_municipio_ibge_dv-{0}"
                    args:
                      - named_prop: "idLocalidade"
                api_options:
                  combine:
                  - id: "total"
                    desc: "total_concessao"
                    function: 'calc_addition'
                    fn_args:
                      - id: "10_10_01_92"
                        named_prop: "agr_sum_vl_indicador"
                        default: 0
                      - id: "sst_bene_qtd_especie"
                        named_prop: "agr_sum_vl_indicador"
                        default: 0
                args:
                  - id: "total"
                    prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'B92 acumulado no município'
              - relevance: 'low'
                cls: 'xs12 md6'
                api:
                  - template: "/sst/indicadoresestaduais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'92',and,gt-nu_competencia-2017,and,eq-cd_uf-{0}"
                    args:
                      - named_prop: "cd_uf"
                  - template: "/indicadoresestaduais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'10_10_01_92',and,le-nu_competencia-'2017',and,eq-cd_uf-{0}"
                    args:
                      - named_prop: "cd_uf"
                api_options:
                  combine:
                  - id: "total"
                    desc: "total_concessao"
                    function: 'calc_addition'
                    fn_args:
                      - id: "10_10_01_92"
                        named_prop: "agr_sum_vl_indicador"
                        default: 0
                      - id: "sst_bene_qtd_especie"
                        named_prop: "agr_sum_vl_indicador"
                        default: 0
                args:
                  - id: "total"
                    prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'B92 acumulado na UF'
              - relevance: 'low'
                cls: 'xs12 md6'
                api:
                  - fixed: "/sst/indicadoresnacionais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'92',and,gt-nu_competencia-2017"
                  - fixed: "/indicadoresnacionais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'10_10_01_92',and,le-nu_competencia-'2017'"
                api_options:
                  combine:
                  - id: "total"
                    desc: "total_concessao"
                    function: 'calc_addition'
                    fn_args:
                      - id: "10_10_01_92"
                        named_prop: "agr_sum_vl_indicador"
                        default: 0
                      - id: "sst_bene_qtd_especie"
                        named_prop: "agr_sum_vl_indicador"
                        default: 0
                args:
                  - id: "total"
                    prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: "B92 acumulado NO PAÍS"
          - type: "text"
            title: ""
            content:
              template: "Em destaque, o número acumulado de concessões de benefícios previdenciários do tipo Aposentadorias por Invalidez Acidentária (B92) no município, na unidade federativade {0} a {1}. No gráfico, apresenta-se a evolução histórica do número de concessões no período."
              preloaded:
                prop: "centralindicadores"
                function: "slice"
                id: ['10_10_01_92']
                year: "min"
              args:
                - named_prop: 'nu_competencia_min'
                - named_prop: 'nu_competencia_max'
        chart_type: "BAR"
        api:
          - template: "/sst/indicadoresmunicipais?categorias=cd_indicador,nu_competencia,vl_indicador,ds_fonte&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'92',and,gt-nu_competencia-2017,and,eq-cd_mun_ibge_dv-{0}"
            args:
              - named_prop: "idLocalidade"
          - template: "/indicadoresmunicipais?categorias=cd_indicador,nu_competencia,vl_indicador&filtros=eq-cd_indicador-'10_10_01_92',and,le-nu_competencia-'2017',and,eq-cd_municipio_ibge_dv-{0}"
            args:
              - named_prop: "idLocalidade"
        api_options:
          formatters:
            - id: "vl_indicador"
              format: "inteiro"
        headers:
          - text: 'Ano'
            align: 'left'
            value: 'nu_competencia'
          - text: 'Qtde de Benefícios B92 - Aposentadorias por Invalidez Acidentária'
            value: 'fmt_vl_indicador'
        chart_options:
          id: "nu_competencia"
          x: "nu_competencia"
          y: "vl_indicador"
          orientation: "vertical"
          text: "fmt_vl_indicador"
          show_x_axis: true
          show_y_axis: false
          hide_legend: true
          color: "#238B45"
        source:
          desc_field: "ds_fonte"
# ==========================================================
      - id: "mapa_b93"
        title: 
          fixed: "Pensão por morte por acidente do trabalho (B93)"
        title_comment:
          template: "{0}, {1}"
          api:
            fixed: "/sst/indicadoresnacionais?categorias=cd_indicador,vl_indicador,ds_fonte,nu_competencia&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'91',and,eq-nu_competencia-nu_competencia_max"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - named_prop: "nu_competencia"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              template: "Os dados brutos analisados têm as seguintes referências fundamentais, para consulta e conferência:<br/>Nome: {0}<br/>Fonte: {1}<br/>Ano: {2}"
              api:
                fixed: "/sst/indicadoresnacionais?categorias=cd_indicador,vl_indicador,ds_fonte,nu_competencia&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'91',and,eq-nu_competencia-nu_competencia_max"
              args:
                - named_prop: 'cd_indicador'
                - named_prop: 'ds_fonte'
                - named_prop: 'nu_competencia'
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  template: "/sst/indicadoresmunicipais?categorias=cd_indicador,vl_indicador,ds_fonte,nu_competencia&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'93',and,eq-nu_competencia-nu_competencia_max,and,eq-cd_mun_ibge_dv-{0}"
                  args:
                    - named_prop: "idLocalidade"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'B93 no município'
              - relevance: 'low'
                cls: 'xs12 md6'
                api:
                  template: "/sst/indicadoresestaduais?categorias=cd_indicador,vl_indicador,ds_fonte,nu_competencia&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'93',and,eq-nu_competencia-nu_competencia_max,and,eq-cd_uf-{0}"
                  args:
                    - named_prop: "cd_uf"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'B93 na UF'
              - relevance: 'low'
                cls: 'xs12 md6'
                api:
                  fixed: "/sst/indicadoresnacionais?categorias=cd_indicador,vl_indicador,ds_fonte,nu_competencia&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'93',and,eq-nu_competencia-nu_competencia_max"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: "B93 NO PAÍS"
          - type: "text"
            title: ""
            content:
              fixed: "Em destaque, o número de concessões de benefícios previdenciários do tipo Pensão por morte por acidente do trabalho (B93) no município, na unidade federativa e no país para a população com vínculo de emprego regular.  No mapa, apresenta-se a perspectiva comparativa dos municípios da unidade federativa. A escala de cores varia do branco (menor quantidade) para o vermelho (maior quantidade de acidentes no ano)."
          - type: "ranking"
            api:
              template: "/sst/indicadoresmunicipais?categorias=rank_uf,rank_uf_total,rank_br,rank_br_total&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'93',and,eq-nu_competencia-nu_competencia_max,and,eq-cd_mun_ibge_dv-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: 'regional_rank'
                named_prop: "rank_uf"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'regional_total'
                named_prop: "rank_uf_total"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'national_rank'
                named_prop: "rank_br"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'national_total'
                named_prop: "rank_br_total"
                format: 'inteiro'
                precision: 0
                default: 0
          # - id: "select_cid_b93"
          #   type: "select"
          #   multiple: true
          #   label: "Categoria CID"
          #   api:
          #     template: "/sst/beneficios?categorias=cd_uf,cd_agrupamento_categoria_cid&agregacao=DISTINCT&ordenacao=cd_agrupamento_categoria_cid&filtros=eq-cd_uf-{0},and,eq-cd_especie_beneficio-93,and,eq-ano_beneficio-{1}"
          #     args:
          #       - named_prop: "cd_uf"
          #       - base_object: "sst_beneficio"
          #         named_prop: "agr_max_ano_beneficio"
          #   args:
          #     - prop: "id"
          #       named_prop: "cd_agrupamento_categoria_cid"
          #     - prop: "label"
          #       named_prop: "cd_agrupamento_categoria_cid"
          #       null_value: "(Não informado)"
          #   selection:
          #     event: "selection" 
          #     rules:
          #       filter: ",and,in-cd_agrupamento_categoria_cid-{0}"
          #       api:
          #         args:
          #           - named_prop: "cd_agrupamento_categoria_cid"
        chart_type: "MAP_TOPOJSON"
        api: 
          template: "/sst/beneficios?categorias=cd_municipio_ibge_dv,nm_municipio,ano_beneficio&agregacao=COUNT&filtros=eq-cd_uf-{0},and,eq-cd_especie_beneficio-93,and,eq-ano_beneficio-{1}"
          args:
            - named_prop: "cd_uf"
            - base_object: "sst_beneficio"
              named_prop: "agr_max_ano_beneficio"
          options:
            calcs:
              - id: "deviation_b93"
                function: "get_log"
                fn_args:
                  - fixed: "agr_count"
            formatters:
              - id: "agr_count"
                format: 'inteiro'
        headers:
          - text: 'Município'
            align: 'left'
            value: 'nm_municipio'
          - text: 'Ano'
            align: 'left'
            value: 'ano_beneficio'
          - text: 'Qtde de Benefícios B93 - Pensão por morte por acidente do trabalho'
            value: 'fmt_agr_count'
        chart_options:
          id_field: 'cd_municipio_ibge_dv'
          topo_key: "codarea"
          value_field: 'calc_deviation_b93'
          colorScale:
            name: "Reds"
        # source:
        #   desc_field: "ds_fonte"
# ===============================================
      - id: "bar_ben_b93"
        title: 
          fixed: "Pensão por morte por acidente do trabalho (B93) – Série Histórica"
        title_comment:
          template: "{0}, de {1} a {2}"
          api:
            - fixed: "/sst/indicadoresnacionais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max,ds_fonte&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'91',and,eq-nu_competencia-nu_competencia_max"
            - fixed: "/indicadoresnacionais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max,ds_fonte&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'10_10_01_91',and,eq-nu_competencia-nu_competencia_max"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - id: "10_10_01_91"
              named_prop: "nu_competencia_min"
            - id: "sst_bene_qtd_especie"
              named_prop: "nu_competencia_max"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              template: "Os dados brutos analisados têm as seguintes referências fundamentais, para consulta e conferência:<br/>
                          Nome: {0}<br/>Fonte: {1}<br/>Ano: {2} a 2017<br/>
                          Nome: {3}<br/>Fonte: {4}<br/>Ano: 2018 a {5}"
              api:
                - fixed: "/sst/indicadoresnacionais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max,ds_fonte&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'91',and,eq-nu_competencia-nu_competencia_max"
                - fixed: "/indicadoresnacionais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max,ds_fonte&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'10_10_01_93',and,eq-nu_competencia-nu_competencia_max"
              args:
                - id: "10_10_01_93"
                  named_prop: 'cd_indicador'
                - id: "10_10_01_93"
                  named_prop: 'ds_fonte'
                - id: "10_10_01_93"
                  named_prop: 'nu_competencia_min'
                - id: "sst_bene_qtd_especie"
                  named_prop: 'cd_indicador'
                - id: "sst_bene_qtd_especie"
                  named_prop: 'ds_fonte'
                - id: "sst_bene_qtd_especie"
                  named_prop: 'nu_competencia_max'
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  - template: "/sst/indicadoresmunicipais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'93',and,gt-nu_competencia-2017,and,eq-cd_mun_ibge_dv-{0}"
                    args:
                      - named_prop: "idLocalidade"
                  - template: "/indicadoresmunicipais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'10_10_01_93',and,le-nu_competencia-'2017',and,eq-cd_municipio_ibge_dv-{0}"
                    args:
                      - named_prop: "idLocalidade"
                api_options:
                  combine:
                  - id: "total"
                    desc: "total_concessao"
                    function: 'calc_addition'
                    fn_args:
                      - id: "10_10_01_93"
                        named_prop: "agr_sum_vl_indicador"
                        default: 0
                      - id: "sst_bene_qtd_especie"
                        named_prop: "agr_sum_vl_indicador"
                        default: 0
                args:
                  - id: "total"
                    prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'B93 acumulado no município'
              - relevance: 'low'
                cls: 'xs12 md6'
                api:
                  - template: "/sst/indicadoresestaduais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'93',and,gt-nu_competencia-2017,and,eq-cd_uf-{0}"
                    args:
                      - named_prop: "cd_uf"
                  - template: "/indicadoresestaduais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'10_10_01_93',and,le-nu_competencia-'2017',and,eq-cd_uf-{0}"
                    args:
                      - named_prop: "cd_uf"
                api_options:
                  combine:
                  - id: "total"
                    desc: "total_concessao"
                    function: 'calc_addition'
                    fn_args:
                      - id: "10_10_01_93"
                        named_prop: "agr_sum_vl_indicador"
                        default: 0
                      - id: "sst_bene_qtd_especie"
                        named_prop: "agr_sum_vl_indicador"
                        default: 0
                args:
                  - id: "total"
                    prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'B93 acumulado na UF'
              - relevance: 'low'
                cls: 'xs12 md6'
                api:
                  - fixed: "/sst/indicadoresnacionais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'93',and,gt-nu_competencia-2017"
                  - fixed: "/indicadoresnacionais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'10_10_01_93',and,le-nu_competencia-'2017'"
                api_options:
                  combine:
                  - id: "total"
                    desc: "total_concessao"
                    function: 'calc_addition'
                    fn_args:
                      - id: "10_10_01_93"
                        named_prop: "agr_sum_vl_indicador"
                        default: 0
                      - id: "sst_bene_qtd_especie"
                        named_prop: "agr_sum_vl_indicador"
                        default: 0
                args:
                  - id: "total"
                    prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: "B93 acumulado NO PAÍS"
          - type: "text"
            title: ""
            content:
              template: "Em destaque, o número acumulado de concessões de benefícios previdenciários do tipo Pensão por morte por acidente do trabalho (B93) no município, na unidade federativade {0} a {1}. No gráfico, apresenta-se a evolução histórica do número de concessões no período."
              preloaded:
                prop: "centralindicadores"
                function: "slice"
                id: ['10_10_01_93']
                year: "min"
              args:
                - named_prop: 'nu_competencia_min'
                - named_prop: 'nu_competencia_max'
        chart_type: "BAR"
        api:
          - template: "/sst/indicadoresmunicipais?categorias=cd_indicador,nu_competencia,vl_indicador,ds_fonte&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'93',and,gt-nu_competencia-2017,and,eq-cd_mun_ibge_dv-{0}"
            args:
              - named_prop: "idLocalidade"
          - template: "/indicadoresmunicipais?categorias=cd_indicador,nu_competencia,vl_indicador&filtros=eq-cd_indicador-'10_10_01_93',and,le-nu_competencia-'2017',and,eq-cd_municipio_ibge_dv-{0}"
            args:
              - named_prop: "idLocalidade"
        api_options:
          formatters:
            - id: "vl_indicador"
              format: "inteiro"
        headers:
          - text: 'Ano'
            align: 'left'
            value: 'nu_competencia'
          - text: 'Qtde de Benefícios B93 - Pensão por morte por acidente do trabalho'
            value: 'fmt_vl_indicador'
        chart_options:
          id: "nu_competencia"
          x: "nu_competencia"
          y: "vl_indicador"
          orientation: "vertical"
          text: "fmt_vl_indicador"
          show_x_axis: true
          show_y_axis: false
          hide_legend: true
          color: "#238B45"
        source:
          desc_field: "ds_fonte"
# ==========================================================
      - id: "mapa_b94"
        title: 
          fixed: "Auxílio-acidente por acidente do trabalho (B94)"
        title_comment:
          template: "{0}, {1}"
          api:
            fixed: "/sst/indicadoresnacionais?categorias=cd_indicador,vl_indicador,ds_fonte,nu_competencia&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'91',and,eq-nu_competencia-nu_competencia_max"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - named_prop: "nu_competencia"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              template: "Os dados brutos analisados têm as seguintes referências fundamentais, para consulta e conferência:<br/>Nome: {0}<br/>Fonte: {1}<br/>Ano: {2}"
              api:
                fixed: "/sst/indicadoresnacionais?categorias=cd_indicador,vl_indicador,ds_fonte,nu_competencia&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'91',and,eq-nu_competencia-nu_competencia_max"
              args:
                - named_prop: 'cd_indicador'
                - named_prop: 'ds_fonte'
                - named_prop: 'nu_competencia'
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  template: "/sst/indicadoresmunicipais?categorias=cd_indicador,vl_indicador,ds_fonte,nu_competencia&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'94',and,eq-nu_competencia-nu_competencia_max,and,eq-cd_mun_ibge_dv-{0}"
                  args:
                    - named_prop: "idLocalidade"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'B94 no município'
              - relevance: 'low'
                cls: 'xs12 md6'
                api:
                  template: "/sst/indicadoresestaduais?categorias=cd_indicador,vl_indicador,ds_fonte,nu_competencia&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'94',and,eq-nu_competencia-nu_competencia_max,and,eq-cd_uf-{0}"
                  args:
                    - named_prop: "cd_uf"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: "B94 na UF"
              - relevance: 'low'
                cls: 'xs12 md6'
                api:
                  fixed: "/sst/indicadoresnacionais?categorias=cd_indicador,vl_indicador,ds_fonte,nu_competencia&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'94',and,eq-nu_competencia-nu_competencia_max"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: "B94 NO PAÍS"
          - type: "text"
            title: ""
            content:
              fixed: "Em destaque, o número de concessões de benefícios previdenciários do tipo Auxílio-acidente por acidente do trabalho (B94) no município, na unidade federativa e no país para a população com vínculo de emprego regular.  No mapa, apresenta-se a perspectiva comparativa dos municípios da unidade federativa. A escala de cores varia do branco (menor quantidade) para o vermelho (maior quantidade de acidentes no ano)."
          - type: "ranking"
            api:
              template: "/sst/indicadoresmunicipais?categorias=rank_uf,rank_uf_total,rank_br,rank_br_total&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'94',and,eq-nu_competencia-nu_competencia_max,and,eq-cd_mun_ibge_dv-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: 'regional_rank'
                named_prop: "rank_uf"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'regional_total'
                named_prop: "rank_uf_total"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'national_rank'
                named_prop: "rank_br"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'national_total'
                named_prop: "rank_br_total"
                format: 'inteiro'
                precision: 0
                default: 0
          # - id: "select_cid_b94"
          #   type: "select"
          #   multiple: true
          #   label: "Categoria CID"
          #   api:
          #     template: "/sst/beneficios?categorias=cd_uf,cd_agrupamento_categoria_cid&agregacao=DISTINCT&ordenacao=cd_agrupamento_categoria_cid&filtros=eq-cd_uf-{0},and,eq-cd_especie_beneficio-94,and,eq-ano_beneficio-{1}"
          #     args:
          #       - named_prop: "cd_uf"
          #       - base_object: "sst_beneficio"
          #         named_prop: "agr_max_ano_beneficio"
          #   args:
          #     - prop: "id"
          #       named_prop: "cd_agrupamento_categoria_cid"
          #     - prop: "label"
          #       named_prop: "cd_agrupamento_categoria_cid"
          #       null_value: "(Não informado)"
          #   selection:
          #     event: "selection" 
          #     rules:
          #       filter: ",and,in-cd_agrupamento_categoria_cid-{0}"
          #       api:
          #         args:
          #           - named_prop: "cd_agrupamento_categoria_cid"
        chart_type: "MAP_TOPOJSON"
        api: 
          template: "/sst/beneficios?categorias=cd_municipio_ibge_dv,nm_municipio,ano_beneficio&agregacao=COUNT&filtros=eq-cd_uf-{0},and,eq-cd_especie_beneficio-94,and,eq-ano_beneficio-{1}"
          args:
            - named_prop: "cd_uf"
            - base_object: "sst_beneficio"
              named_prop: "agr_max_ano_beneficio"
          options:
            calcs:
              - id: "deviation_b94"
                function: "get_log"
                fn_args:
                  - fixed: "agr_count"
            formatters:
              - id: "agr_count"
                format: 'inteiro'
        headers:
          - text: 'Município'
            align: 'left'
            value: 'nm_municipio'
          - text: 'Ano'
            align: 'left'
            value: 'ano_beneficio'
          - text: 'Qtde de Benefícios B94 - Auxílio-acidente por acidente do trabalho'
            value: 'fmt_agr_count'
        chart_options:
          id_field: 'cd_municipio_ibge_dv'
          topo_key: "codarea"
          value_field: 'calc_deviation_b94'
          colorScale:
            name: "Reds"
        # source:
        #   desc_field: "ds_fonte"
# =================================================================
      - id: "bar_ben_b94"
        title: 
          fixed: "Auxílio-acidente por acidente do trabalho (B94) – Série Histórica"
        title_comment:
          template: "{0}, de {1} a {2}"
          api:
            - fixed: "/sst/indicadoresnacionais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max,ds_fonte&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'91',and,eq-nu_competencia-nu_competencia_max"
            - fixed: "/indicadoresnacionais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max,ds_fonte&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'10_10_01_91',and,eq-nu_competencia-nu_competencia_max"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - id: "10_10_01_91"
              named_prop: "nu_competencia_min"
            - id: "sst_bene_qtd_especie"
              named_prop: "nu_competencia_max"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              template: "Os dados brutos analisados têm as seguintes referências fundamentais, para consulta e conferência:<br/>
                          Nome: {0}<br/>Fonte: {1}<br/>Ano: {2} a 2017<br/>
                          Nome: {3}<br/>Fonte: {4}<br/>Ano: 2018 a {5}"
              api:
                - fixed: "/sst/indicadoresnacionais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max,ds_fonte&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'91',and,eq-nu_competencia-nu_competencia_max"
                - fixed: "/indicadoresnacionais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max,ds_fonte&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'10_10_01_94',and,eq-nu_competencia-nu_competencia_max"
              args:
                - id: "10_10_01_94"
                  named_prop: 'cd_indicador'
                - id: "10_10_01_94"
                  named_prop: 'ds_fonte'
                - id: "10_10_01_94"
                  named_prop: 'nu_competencia_min'
                - id: "sst_bene_qtd_especie"
                  named_prop: 'cd_indicador'
                - id: "sst_bene_qtd_especie"
                  named_prop: 'ds_fonte'
                - id: "sst_bene_qtd_especie"
                  named_prop: 'nu_competencia_max'
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  - template: "/sst/indicadoresmunicipais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'94',and,gt-nu_competencia-2017,and,eq-cd_mun_ibge_dv-{0}"
                    args:
                      - named_prop: "idLocalidade"
                  - template: "/indicadoresmunicipais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'10_10_01_94',and,le-nu_competencia-'2017',and,eq-cd_municipio_ibge_dv-{0}"
                    args:
                      - named_prop: "idLocalidade"
                api_options:
                  combine:
                  - id: "total"
                    desc: "total_concessao"
                    function: 'calc_addition'
                    fn_args:
                      - id: "10_10_01_94"
                        named_prop: "agr_sum_vl_indicador"
                        default: 0
                      - id: "sst_bene_qtd_especie"
                        named_prop: "agr_sum_vl_indicador"
                        default: 0
                args:
                  - id: "total"
                    prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'B94 acumulado no município'
              - relevance: 'low'
                cls: 'xs12 md6'
                api:
                  - template: "/sst/indicadoresestaduais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'94',and,gt-nu_competencia-2017,and,eq-cd_uf-{0}"
                    args:
                      - named_prop: "cd_uf"
                  - template: "/indicadoresestaduais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'10_10_01_94',and,le-nu_competencia-'2017',and,eq-cd_uf-{0}"
                    args:
                      - named_prop: "cd_uf"
                api_options:
                  combine:
                  - id: "total"
                    desc: "total_concessao"
                    function: 'calc_addition'
                    fn_args:
                      - id: "10_10_01_94"
                        named_prop: "agr_sum_vl_indicador"
                        default: 0
                      - id: "sst_bene_qtd_especie"
                        named_prop: "agr_sum_vl_indicador"
                        default: 0
                args:
                  - id: "total"
                    prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'B94 acumulado na UF'
              - relevance: 'low'
                cls: 'xs12 md6'
                api:
                  - fixed: "/sst/indicadoresnacionais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'94',and,gt-nu_competencia-2017"
                  - fixed: "/indicadoresnacionais?categorias=cd_indicador,nu_competencia_min,nu_competencia_max&valor=vl_indicador&agregacao=SUM&filtros=eq-cd_indicador-'10_10_01_94',and,le-nu_competencia-'2017'"
                api_options:
                  combine:
                  - id: "total"
                    desc: "total_concessao"
                    function: 'calc_addition'
                    fn_args:
                      - id: "10_10_01_94"
                        named_prop: "agr_sum_vl_indicador"
                        default: 0
                      - id: "sst_bene_qtd_especie"
                        named_prop: "agr_sum_vl_indicador"
                        default: 0
                args:
                  - id: "total"
                    prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: "B94 acumulado NO PAÍS"
          - type: "text"
            title: ""
            content:
              template: "Em destaque, o número acumulado de concessões de benefícios previdenciários do tipo Auxílio-acidente por acidente do trabalho (B94) no município, na unidade federativade {0} a {1}. No gráfico, apresenta-se a evolução histórica do número de concessões no período."
              preloaded:
                prop: "centralindicadores"
                function: "slice"
                id: ['10_10_01_94']
                year: "min"
              args:
                - named_prop: 'nu_competencia_min'
                - named_prop: 'nu_competencia_max'
        chart_type: "BAR"
        api:
          - template: "/sst/indicadoresmunicipais?categorias=cd_indicador,nu_competencia,vl_indicador,ds_fonte&filtros=eq-cd_indicador-'sst_bene_qtd_especie',and,eq-ds_agreg_primaria-'94',and,gt-nu_competencia-2017,and,eq-cd_mun_ibge_dv-{0}"
            args:
              - named_prop: "idLocalidade"
          - template: "/indicadoresmunicipais?categorias=cd_indicador,nu_competencia,vl_indicador&filtros=eq-cd_indicador-'10_10_01_94',and,le-nu_competencia-'2017',and,eq-cd_municipio_ibge_dv-{0}"
            args:
              - named_prop: "idLocalidade"
        api_options:
          formatters:
            - id: "vl_indicador"
              format: "inteiro"
        headers:
          - text: 'Ano'
            align: 'left'
            value: 'nu_competencia'
          - text: 'Qtde de Benefícios B94 - Auxílio-acidente por acidente do trabalho'
            value: 'fmt_vl_indicador'
        chart_options:
          id: "nu_competencia"
          x: "nu_competencia"
          y: "vl_indicador"
          orientation: "vertical"
          text: "fmt_vl_indicador"
          show_x_axis: true
          show_y_axis: false
          hide_legend: true
          color: "#238B45"
        source:
          desc_field: "ds_fonte"
####### Exemplo de autocard 
#      - id: "bar_ben_b94_teste"
#        autoFill: true
#        cd_indicador: "10_10_01_94"
