# ========================================================
principais:
  - relevance: 'lead' 
    cls: 'xs12 xl6'
    rowClass: "pt-0 px-3 pb-5"
    api:
      template: "/thematic/cagedindicadores?categorias=ds_indicador_radical,ds_fonte,nm_municipio_uf,nu_competencia,vl_indicador,vl_indicador_uf,vl_indicador_br,rank_uf,rank_uf_total,rank_br,rank_br_total,media_uf&filtros=eq-cd_mun_ibge-{0},and,eq-cd_indicador-'caged_admitidos_intermitente',and,eq-nu_competencia-nu_competencia_max"
      args:
        - named_prop: "idLocalidade"
    args:
      - prop: "value"
        named_prop: 'vl_indicador'
        format: 'inteiro'
      - prop: "description"
        default: "VÍNCULOS DE EMPREGO - ADMISSÕES - TRABALHO INTERMITENTE"
        named_prop: "ds_indicador_radical"
      - prop: 'comment'
        template: "({0}, {1})"
        api:
          fixed: "/thematic/cagedindicadores?categorias=ds_fonte,nu_competencia_max&filtros=eq-cd_indicador-'caged_admitidos_intermitente'&limit=1"
          options:
            calcs:
              - id: "competencia"
                function: "format_quarter_ds"
                fn_args:
                  - named_prop: "nu_competencia_max"
        args:
          - named_prop: "ds_fonte"
          - named_prop: "calc_competencia"
  - relevance: 'lead' 
    cls: 'xs12 xl6'
    rowClass: "pt-0 px-3 pb-5"
    api:
      template: "/thematic/cagedindicadores?categorias=ds_indicador_radical,ds_fonte,nm_municipio_uf,nu_competencia,vl_indicador,vl_indicador_uf,vl_indicador_br,rank_uf,rank_uf_total,rank_br,rank_br_total,media_uf&filtros=eq-cd_mun_ibge-{0},and,eq-cd_indicador-'caged_admitidos_parcial',and,eq-nu_competencia-nu_competencia_max"
      args:
        - named_prop: "idLocalidade"
    args:
      - prop: "value"
        named_prop: 'vl_indicador'
        format: 'inteiro'
      - prop: "description"
        default: "VÍNCULOS DE EMPREGO - ADMISSÕES - TEMPO PARCIAL"
        named_prop: "ds_indicador_radical"
      - prop: 'comment'
        template: "({0}, {1})"
        api:
          fixed: "/thematic/cagedindicadores?categorias=ds_fonte,nu_competencia_max&filtros=eq-cd_indicador-'caged_admitidos_parcial'&limit=1"
          options:
            calcs:
              - id: "competencia"
                function: "format_quarter_ds"
                fn_args:
                  - named_prop: "nu_competencia_max"
        args:
          - named_prop: "ds_fonte"
          - named_prop: "calc_competencia"
  - relevance: 'lead' 
    cls: 'xs12 xl6'
    rowClass: "pt-0 px-3 pb-5"
    preloaded:
      prop: "centralindicadores"
      function: "slice"
      id: "07_01_19_00"
      year: "max"
    args:
      - prop: "value"
        named_prop: 'vl_indicador'
        format: 'porcentagem'
      - prop: "description"
        named_prop: "ds_indicador_radical"
      - prop: 'comment'
        template: "({0}, {1})"
        args:
          - named_prop: "ds_fonte"
          - named_prop: "nu_competencia"
  - relevance: 'lead' 
    cls: 'xs12 xl6'
    rowClass: "pt-0 px-3 pb-5"
    preloaded:
      prop: "centralindicadores"
      function: "slice"
      id: "07_01_05_00"
      year: "max"
    args:
      - prop: "value"
        named_prop: 'vl_indicador'
        format: 'porcentagem'
      - prop: "description"
        named_prop: "ds_indicador_radical"
      - prop: 'comment'
        template: "({0}, {1})"
        args:
          - named_prop: "ds_fonte"
          - named_prop: "nu_competencia"
# ========================================================
secoes:
  - id: "estabilidade_unica"
    name: ""
    cards:
# ===============================================
      - id: "mapa_vinculo_intermitente"
        title: 
          fixed: "Vínculos de trabalho intermitente"
        title_comment:
          template: "{0}, {1}"
          api: 
            fixed: "/thematic/cagedindicadores?categorias=nu_competencia_max&filtros=eq-cd_indicador-'caged_admitidos_intermitente',and,eq-nu_competencia-nu_competencia_max&limit=1"
            options:
              calcs:
                - id: "competencia_max"
                  function: "format_quarter_ds"
                  fn_args:
                    - named_prop: "nu_competencia_max"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - named_prop: "calc_competencia_max"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              fixed: "Segundo a CLT, artigo 443, consoante redação da Lei 13.467/2017, considera-se como intermitente o contrato de trabalho no qual a prestação de serviços, com subordinação, não é contínua, ocorrendo com alternância de períodos de prestação de serviços e de inatividade, determinados em horas, dias ou meses, independentemente do tipo de atividade do empregado e do empregador, exceto para os aeronautas, regidos por legislação própria"
        msgNoData:
          desc: "A localidade em análise não possui dados registrados de vínculos de trabalho intermitente."
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12 md6'
                api:
                  template: "/thematic/cagedindicadores?categorias=nm_municipio_uf,nu_competencia,vl_indicador,vl_indicador_uf,vl_indicador_br,rank_uf,rank_uf_total,rank_br,rank_br_total,media_uf&filtros=eq-cd_mun_ibge-{0},and,eq-cd_indicador-'caged_admitidos_intermitente',and,eq-nu_competencia-nu_competencia_max"
                  args:
                    - named_prop: "idLocalidade"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'ADMISSÕES'
              - relevance: 'high'
                cls: 'xs12 md6'
                api:
                  template: "/thematic/cagedindicadores?categorias=vl_indicador&filtros=eq-cd_mun_ibge-{0},and,eq-cd_indicador-'caged_desligados_intermitente',and,eq-nu_competencia-nu_competencia_max"
                  args:
                    - named_prop: "idLocalidade"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'DESLIGAMENTOS'
              - relevance: 'low'
                cls: 'xs12 md6'
                api:
                  template: "/thematic/cagedindicadores?categorias=nm_municipio_uf,nu_competencia,vl_indicador,vl_indicador_uf,vl_indicador_br,rank_uf,rank_uf_total,rank_br,rank_br_total,media_uf&filtros=eq-cd_mun_ibge-{0},and,eq-cd_indicador-'caged_admitidos_intermitente',and,eq-nu_competencia-nu_competencia_max"
                  args:
                    - named_prop: "idLocalidade"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador_uf'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: "ADMISSÕES NA UF"
              - relevance: 'low'
                cls: 'xs12 md6'
                api:
                  template: "/thematic/cagedindicadores?categorias=nm_municipio_uf,nu_competencia,vl_indicador,vl_indicador_uf,vl_indicador_br,rank_uf,rank_uf_total,rank_br,rank_br_total,media_uf&filtros=eq-cd_mun_ibge-{0},and,eq-cd_indicador-'caged_admitidos_intermitente',and,eq-nu_competencia-nu_competencia_max"
                  args:
                    - named_prop: "idLocalidade"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador_br'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: "ADMISSÕES NO BRASIL"
          - type: "text"
            title: ""
            content:
              template: "Em destaque, o número de vínculos de emprego na modalidade de trabalho intermitente criados e perdidos no {0}. No mapa, {1} está em destaque. A escala de cores varia  do saldo negativo (vermelho) para o saldo positivo de criação de empregos (azul) e para admitidos e desligados, do menor número (cor mais clara) para o maior número (cor mais escura)."
              api:
                template: "/thematic/cagedindicadores?categorias=nm_municipio_uf,nu_competencia,vl_indicador,vl_indicador_uf,vl_indicador_br,rank_uf,rank_uf_total,rank_br,rank_br_total,media_uf&filtros=eq-cd_mun_ibge-{0},and,eq-cd_indicador-'caged_admitidos_intermitente',and,eq-nu_competencia-nu_competencia_max"
                options:
                  calcs:
                    - id: "competencia"
                      function: "format_quarter_ds"
                      fn_args:
                        - named_prop: "nu_competencia"
                args:
                  - named_prop: "idLocalidade"
              args:
                - named_prop: "calc_competencia"
                - named_prop: "nm_municipio_uf"
                  required: true
          - id: "cd_indicador"
            type: "radio"
            items:
              - id: "saldo"
                default: true
                value: "caged_saldo_intermitente"
                color: "light-blue"
                label: "SALDO"
              - id: "admitidos"
                value: "caged_admitidos_intermitente"
                color: "green"
                label: "ADMITIDOS"
              - id: "desligados"
                value: "caged_desligados_intermitente"
                color: "red"
                label: "DESLIGADOS"
            selection:
              event: 'selection'
              rules:
                api:
                  template: "/thematic/cagedindicadores?categorias=cd_indicador,ds_fonte,cd_mun_ibge,nm_municipio,nu_competencia,ds_indicador_radical,vl_indicador,rank_uf,rank_br,media_uf&filtros=eq-cd_uf-{0},and,eq-cd_indicador-'{1}',and,eq-nu_competencia-nu_competencia_max"
                  args:
                    - named_prop: 'cd_uf'
                    - named_prop: "cd_indicador"
          - type: "ranking"
            api:
              template: "/thematic/cagedindicadores?categorias=nm_municipio_uf,nu_competencia,vl_indicador,vl_indicador_uf,vl_indicador_br,rank_uf,rank_uf_total,rank_br,rank_br_total,media_uf&filtros=eq-cd_mun_ibge-{0},and,eq-cd_indicador-'caged_admitidos_intermitente',and,eq-nu_competencia-nu_competencia_max"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: 'regional_complementary_text'
                fixed: ', em admissões'
              - prop: 'regional_rank'
                named_prop: "rank_uf"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'regional_total'
                named_prop: "rank_uf_total"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'national_complementary_text'
                fixed: ', em admissões'
              - prop: 'national_rank'
                named_prop: "rank_br"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'national_total'
                named_prop: "rank_br_total"
                format: 'inteiro'
                precision: 0
                default: 0
        chart_type: "MAP_TOPOJSON"
        api: 
          template: "/thematic/cagedindicadores?categorias=cd_indicador,ds_fonte,cd_mun_ibge,nm_municipio,nu_competencia,ds_indicador_radical,vl_indicador,rank_uf,rank_br,media_uf&filtros=eq-cd_uf-{0},and,eq-cd_indicador-'caged_saldo_intermitente',and,eq-nu_competencia-nu_competencia_max"
          args:
            - named_prop: "cd_uf"
          options:
            calcs:
              - id: "deviation_intermitente"
                function: "get_proportional_indicator_uf"
                fn_args:
                  - fixed: "vl_indicador"
                  - fixed: "media_uf"
                  - fixed: "caged_saldo_intermitente"
              - id: "competencia"
                function: "format_quarter_ds"
                fn_args:
                  - named_prop: "nu_competencia"
            formatters:
              - id: "vl_indicador"
                format: 'inteiro'
              - id: "rank_br"
                format: 'inteiro'
        headers:
          - text: 'Município'
            align: 'left'
            value: 'nm_municipio'
          - text: 'Competência'
            align: 'left'
            value: 'calc_competencia'
          - text: 'Indicador'
            align: 'left'
            value: 'ds_indicador_radical'
          - text: 'Qtde'
            value: 'fmt_vl_indicador'
          - text: 'Rank UF'
            value: 'rank_uf'
          - text: 'Rank Brasil'
            value: 'fmt_rank_br'
        chart_options:
          id_field: 'cd_mun_ibge'
          topo_key: "codarea"
          value_field: 'calc_deviation_intermitente'
          colorScale: 
            type: "singleHue"
            scale_name_value: "cd_indicador"
            color_array: 
              "caged_admitidos_intermitente": "Greens"
              "caged_desligados_intermitente": "Reds"
              "caged_saldo_intermitente": "bipolar"
        source:
          desc_field: "ds_fonte"
# ===============================================
      - id: "mapa_vinculo_parcial"
        title: 
          fixed: "Vínculos de emprego de tempo parcial"
        title_comment:
          template: "{0}, {1}"
          api: 
            fixed: "/thematic/cagedindicadores?categorias=nu_competencia_max&filtros=eq-cd_indicador-'caged_admitidos_parcial',and,eq-nu_competencia-nu_competencia_max&limit=1"
            options:
              calcs:
                - id: "competencia_max"
                  function: "format_quarter_ds"
                  fn_args:
                    - named_prop: "nu_competencia_max"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - named_prop: "calc_competencia_max"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              fixed: "Segundo a CLT, artigo 443, consoante redação da Lei 13.467/2017, considera-se como intermitente o contrato de trabalho no qual a prestação de serviços, com subordinação, não é contínua, ocorrendo com alternância de períodos de prestação de serviços e de inatividade, determinados em horas, dias ou meses, independentemente do tipo de atividade do empregado e do empregador, exceto para os aeronautas, regidos por legislação própria"
        msgNoData:
          desc: "A localidade em análise não possui dados registrados de vínculos de trabalho de tempo parcial."
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12 md6'
                api:
                  template: "/thematic/cagedindicadores?categorias=nm_municipio_uf,nu_competencia,vl_indicador,vl_indicador_uf,vl_indicador_br,rank_uf,rank_uf_total,rank_br,rank_br_total,media_uf&filtros=eq-cd_mun_ibge-{0},and,eq-cd_indicador-'caged_admitidos_parcial',and,eq-nu_competencia-nu_competencia_max"
                  args:
                    - named_prop: "idLocalidade"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'ADMISSÕES'
              - relevance: 'high'
                cls: 'xs12 md6'
                api:
                  template: "/thematic/cagedindicadores?categorias=vl_indicador&filtros=eq-cd_mun_ibge-{0},and,eq-cd_indicador-'caged_desligados_parcial',and,eq-nu_competencia-nu_competencia_max"
                  args:
                    - named_prop: "idLocalidade"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: 'DESLIGAMENTOS'
              - relevance: 'low'
                cls: 'xs12 md6'
                api:
                  template: "/thematic/cagedindicadores?categorias=nm_municipio_uf,nu_competencia,vl_indicador,vl_indicador_uf,vl_indicador_br,rank_uf,rank_uf_total,rank_br,rank_br_total,media_uf&filtros=eq-cd_mun_ibge-{0},and,eq-cd_indicador-'caged_admitidos_parcial',and,eq-nu_competencia-nu_competencia_max"
                  args:
                    - named_prop: "idLocalidade"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador_uf'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: "ADMISSÕES NA UF"
              - relevance: 'low'
                cls: 'xs12 md6'
                api:
                  template: "/thematic/cagedindicadores?categorias=nm_municipio_uf,nu_competencia,vl_indicador,vl_indicador_uf,vl_indicador_br,rank_uf,rank_uf_total,rank_br,rank_br_total,media_uf&filtros=eq-cd_mun_ibge-{0},and,eq-cd_indicador-'caged_admitidos_parcial',and,eq-nu_competencia-nu_competencia_max"
                  args:
                    - named_prop: "idLocalidade"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador_br'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: "ADMISSÕES NO BRASIL"
          - type: "text"
            title: ""
            content:
              template: "Em destaque, o número de vínculos de emprego em regime de tempo parcial criados e perdidos no {0}. No mapa, {1} está em destaque. A escala de cores varia do saldo negativo (vermelho) para o saldo positivo de criação de empregos (azul) e para admitidos e desligados, do menor número (cor mais clara) para o maior número (cor mais escura)."
              api:
                template: "/thematic/cagedindicadores?categorias=nm_municipio_uf,nu_competencia,vl_indicador,vl_indicador_uf,vl_indicador_br,rank_uf,rank_uf_total,rank_br,rank_br_total,media_uf&filtros=eq-cd_mun_ibge-{0},and,eq-cd_indicador-'caged_admitidos_parcial',and,eq-nu_competencia-nu_competencia_max"
                options:
                  calcs:
                    - id: "competencia"
                      function: "format_quarter_ds"
                      fn_args:
                        - named_prop: "nu_competencia"
                args:
                  - named_prop: "idLocalidade"
              args:
                - named_prop: "calc_competencia"
                - named_prop: "nm_municipio_uf"
                  required: true
          - id: "cd_indicador"
            type: "radio"
            items:
              - id: "saldo"
                default: true
                value: "caged_saldo_parcial"
                color: "light-blue"
                label: "SALDO"
              - id: "admitidos"
                value: "caged_admitidos_parcial"
                color: "green"
                label: "ADMITIDOS"
              - id: "desligados"
                value: "caged_desligados_parcial"
                color: "red"
                label: "DESLIGADOS"
            selection:
              event: 'selection'
              rules:
                api:
                  template: "/thematic/cagedindicadores?categorias=cd_indicador,ds_fonte,cd_mun_ibge,nm_municipio,nu_competencia,ds_indicador_radical,vl_indicador,rank_uf,rank_br,media_uf&filtros=eq-cd_uf-{0},and,eq-cd_indicador-'{1}',and,eq-nu_competencia-nu_competencia_max"
                  args:
                    - named_prop: 'cd_uf'
                    - named_prop: "cd_indicador"
          - type: "ranking"
            api:
              template: "/thematic/cagedindicadores?categorias=nm_municipio_uf,nu_competencia,vl_indicador,vl_indicador_uf,vl_indicador_br,rank_uf,rank_uf_total,rank_br,rank_br_total,media_uf&filtros=eq-cd_mun_ibge-{0},and,eq-cd_indicador-'caged_admitidos_parcial',and,eq-nu_competencia-nu_competencia_max"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: 'regional_complementary_text'
                fixed: ', em admissões'
              - prop: 'regional_rank'
                named_prop: "rank_uf"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'regional_total'
                named_prop: "rank_uf_total"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'national_complementary_text'
                fixed: ', em admissões'
              - prop: 'national_rank'
                named_prop: "rank_br"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'national_total'
                named_prop: "rank_br_total"
                format: 'inteiro'
                precision: 0
                default: 0
        chart_type: "MAP_TOPOJSON"
        api: 
          template: "/thematic/cagedindicadores?categorias=cd_indicador,ds_fonte,cd_mun_ibge,nm_municipio,nu_competencia,ds_indicador_radical,vl_indicador,rank_uf,rank_br,media_uf&filtros=eq-cd_uf-{0},and,eq-cd_indicador-'caged_saldo_parcial',and,eq-nu_competencia-nu_competencia_max"
          args:
            - named_prop: "cd_uf"
          options:
            calcs:
              - id: "deviation_parcial"
                function: "get_proportional_indicator_uf"
                fn_args:
                  - fixed: "vl_indicador"
                  - fixed: "media_uf"
                  - fixed: "caged_saldo_parcial"

              - id: "competencia"
                function: "format_quarter_ds"
                fn_args:
                  - named_prop: "nu_competencia"
            formatters:
              - id: "vl_indicador"
                format: 'inteiro'
              - id: "rank_br"
                format: 'inteiro'
        headers:
          - text: 'Município'
            align: 'left'
            value: 'nm_municipio'
          - text: 'Competência'
            align: 'left'
            value: 'calc_competencia'
          - text: 'Indicador'
            align: 'left'
            value: 'ds_indicador_radical'
          - text: 'Qtde'
            value: 'fmt_vl_indicador'
          - text: 'Rank UF'
            value: 'rank_uf'
          - text: 'Rank Brasil'
            value: 'fmt_rank_br'
        chart_options:
          id_field: 'cd_mun_ibge'
          topo_key: "codarea"
          value_field: 'calc_deviation_parcial'
          colorScale: 
            type: "singleHue"
            scale_name_value: "cd_indicador"
            color_array: 
              "caged_admitidos_parcial": "Greens"
              "caged_desligados_parcial": "Reds"
              "caged_saldo_parcial": "bipolar"
        source:
          desc_field: "ds_fonte"
# ===============================================
      - id: "line_perda_empregos"
        title: 
          fixed: "Dinâmica dos empregos com carteira assinada"
        title_comment:
          template: "{0}, de {1} a {2}"
          api:
            - fixed: "/indicadoresmunicipais?categorias=cd_indicador,nu_competencia_min&filtros=eq-cd_indicador-'02_11_01_00'&limit=1"
            - fixed: "/thematic/cagedindicadores?categorias=cd_indicador,nu_competencia_max&filtros=eq-cd_indicador-'caged_saldo'&limit=1"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - id: "02_11_01_00"
              named_prop: "nu_competencia_min"
            - id: "caged_saldo"
              named_prop: "nu_competencia_max"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              fixed: "O CAGED constitui importante fonte de informação do mercado de trabalho de âmbito nacional e de periodicidade mensal. Foi criado como instrumento de acompanhamento e de fiscalização do processo de admissão e de dispensa de trabalhadores regidos pela CLT, com o objetivo de assistir os desempregados e de apoiar medidas contra o desemprego. A partir de 1986, passou a ser utilizado como suporte ao pagamento do seguro-desemprego e, mais recentemente, tornou-se, também, um relevante instrumento à reciclagem profissional e à recolocação do trabalhador no mercado de trabalho."
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'md6 xs12'
                api:
                  template: "/thematic/cagedindicadores?categorias=ds_indicador_radical,ds_agreg_primaria,cd_indicador,nu_competencia,ds_fonte,vl_indicador,media_uf,rank_uf,rank_br&filtros=eq-cd_mun_ibge-{0},and,in-cd_indicador-'caged_admitidos'-'caged_desligados'-'caged_saldo',and,eq-nu_competencia-'2019'"
                  args:
                    - named_prop: "idLocalidade"
                args:
                  - prop: "value"
                    id: "caged_saldo"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    template: "SALDO EM {0}"
                    args:
                      - id: "caged_saldo"
                        named_prop: "nu_competencia"
              - relevance: 'high'
                cls: 'md6 xs12'
                api:
                  template: "/thematic/cagedindicadores?categorias=ds_indicador_radical,ds_agreg_primaria,cd_indicador,nu_competencia,ds_fonte,vl_indicador,media_uf,rank_uf,rank_br&filtros=eq-cd_mun_ibge-{0},and,in-cd_indicador-'caged_admitidos'-'caged_desligados'-'caged_saldo',and,eq-nu_competencia-nu_competencia_max"
                  args:
                    - named_prop: "idLocalidade"
                args:
                  - prop: "value"
                    id: "caged_saldo"
                    named_prop: 'vl_indicador'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    template: "SALDO EM {0}"
                    args:
                      - id: "caged_saldo"
                        named_prop: "nu_competencia"
          - type: "text"
            title: ""
            content:
              template: "Em destaque, os saldos de empregos observados durante os anos de 2019 e {0}. No gráfico, a evolução histórica apresenta o número de admitidos (linha azul) e de desligados (linha vermelha) desde o ano de {1}. Visualmente, pelos picos de cada linha, é possível vislumbrar uma estimativa dos saldos a cada ano."
              api:
                - fixed: "/indicadoresmunicipais?categorias=cd_indicador,nu_competencia_min&filtros=eq-cd_indicador-'02_11_01_00'&limit=1"
                - fixed: "/thematic/cagedindicadores?categorias=cd_indicador,nu_competencia_max&filtros=eq-cd_indicador-'caged_saldo'&limit=1"
              args:
                - id: "caged_saldo"
                  named_prop: "nu_competencia_max"
                - id: "02_11_01_00"
                  named_prop: "nu_competencia_min"
          - type: "ranking"
            api:
              template: "/thematic/cagedindicadores?categorias=rank_uf,rank_uf_total,rank_br,rank_br_total&filtros=eq-cd_mun_ibge-{0},and,eq-cd_indicador-'caged_desligados',and,eq-nu_competencia-nu_competencia_max"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: 'regional_complementary_text'
                fixed: ', em desligamentos'
              - prop: 'regional_rank'
                named_prop: "rank_uf"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'regional_total'
                named_prop: "rank_uf_total"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'national_complementary_text'
                fixed: ', em desligamentos'
              - prop: 'national_rank'
                named_prop: "rank_br"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'national_total'
                named_prop: "rank_br_total"
                format: 'inteiro'
                precision: 0
                default: 0
        chart_type: "LINE"
        # preloaded:
        #   prop: "centralindicadores"
        #   function: "slice"
        #   id: ["02_11_01_00", "02_11_02_00"]
        api:
          - template: "/indicadoresmunicipais?categorias=ds_indicador_radical,ds_agreg_primaria,cd_indicador,nu_competencia,ds_fonte,vl_indicador,media_uf,rank_uf,rank_br&filtros=eq-cd_mun_ibge-{0},and,in-cd_indicador-'02_11_01_00'-'02_11_02_00',and,le-nu_competencia-nu_competencia_max"
            args:
              - named_prop: "idLocalidade"
            options:
              formatters:
                - id: "vl_indicador"
                  format: 'inteiro'
          - template: "/thematic/cagedindicadores?categorias=ds_indicador_radical,ds_agreg_primaria,cd_indicador,nu_competencia,ds_fonte,vl_indicador,media_uf,rank_uf,rank_br&filtros=eq-cd_mun_ibge-{0},and,in-cd_indicador-'caged_admitidos'-'caged_desligados',and,le-nu_competencia-nu_competencia_max"
            args:
              - named_prop: "idLocalidade"
            options:
              formatters:
                - id: "vl_indicador"
                  format: 'inteiro'
        headers:
          - text: 'Indicador'
            align: 'left'
            value: 'ds_indicador_radical'
          - text: 'Ano'
            align: 'left'
            value: 'nu_competencia'
          - text: 'Quantidade'
            value: 'fmt_vl_indicador'
        chart_options:
          id: "ds_indicador_radical"
          x: "nu_competencia"
          y: "vl_indicador"
          hide_legend: false
          legend_field: "ds_agreg_primaria"
          colorArray: ["#377EB8","#E41A1C"]  # blue / red
        source:
          desc_field: "ds_fonte" 
# ========================================================
      - id: "proporcao_vinculos_empregaticios"
        type: "multiple-charts"
        title: 
          fixed: "Proporção de vínculos empregatícios formalizados e tempo de permanência"
        title_comment:
          template: "{0}, {1} e {2}"
          preloaded:
            prop: "centralindicadores"
            function: "slice"
            id: ["07_01_09_00","07_01_16_00"]
          args:
            - id: "07_01_09_00"
              named_prop: "nm_municipio_uf"
            - id: "07_01_09_00"
              named_prop: "nu_competencia"
            - id: "07_01_16_00"
              named_prop: "nu_competencia"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              fixed: "A RAIS é um Registro Administrativo, de periodicidade anual, criada com a finalidade de suprir as necessidades de controle, de estatísticas e de informações às entidades governamentais da área social. Constitui um instrumento imprescindível para o cumprimento das normas legais, como também é de fundamental importância para o acompanhamento e a caracterização do mercado de trabalho formal."
          - type: "text"
            title: "Observação Importante"
            content:
              fixed: "O grau de flexibilidade na contratação e demissão, usualmente expresso pelo tempo médio de permanência no emprego da força de trabalho ocupada, denota o nível de autonomia que as empresas possuem para ajustarem o número de trabalhadores/as aos ciclos econômicos. Uma grande proporção de vínculos inferiores a 1 ano podem indicar exageradas flutuações de ciclo econômico e, consequentemente, uma região com baixa estabilidade e segurança para os trabalhadores."
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                preloaded:
                  prop: "centralindicadores"
                  function: "slice"
                  id: ["07_01_19_00", "07_01_16_00"]
                  year: "max"
                args:
                  - prop: "value"
                    id: "07_01_19_00"
                    named_prop: 'vl_indicador'
                    format: 'porcentagem'
                    precision: 1
                    default: "Sem Registros"
                  - prop: "description"
                    id: "07_01_19_00"
                    named_prop: "ds_agreg_primaria"
                  - prop: "comment"
                    template: "{0} ({1})"
                    args:
                      - id: "07_01_16_00"
                        named_prop: 'vl_indicador'
                        format: 'inteiro'
                        collapse:
                          format: 'real'
                        default: "Sem Registros"
                      - id: "07_01_16_00"
                        named_prop: 'nu_competencia'
              # - relevance: 'high'
              #   cls: 'xs12 md6'
              #   preloaded:
              #     prop: "centralindicadores"
              #     function: "slice"
              #     id: "07_01_16_00"
              #   args:
              #     - prop: "value"
              #       named_prop: 'vl_indicador'
              #       format: 'real'
              #       collapse: true
              #       precision: 1
              #       default: "Sem Registros"
              #     - prop: "description"
              #       named_prop: "ds_agreg_primaria"
              - relevance: 'low'
                cls: 'xs12 md6'
                preloaded:
                  prop: "centralindicadores"
                  function: "slice"
                  id: "07_01_12_00"
                  year: "max"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador_uf'
                    format: 'porcentagem'
                    precision: 1
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: "Proporção na UF"
                  - prop: "comment"
                    named_prop: "nu_competencia"
              - relevance: 'low'
                cls: 'xs12 md6'
                preloaded:
                  prop: "centralindicadores"
                  function: "slice"
                  id: "07_01_19_00"
                  year: "max"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador_uf'
                    format: 'porcentagem'
                    precision: 1
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: "Proporção na UF"
                  - prop: "comment"
                    named_prop: "nu_competencia"
          - type: "text"
            title: ""
            content:
              template: "Em destaque, proporção de vínculos empregatícios formalizados com tempo de permanência inferior a 1 ano em relação ao total de empregos do município, segundo a RAIS, no ano de {0}. Nos gráficos, destaca-se a evolução de cada grupo considerado (até 1 ano, de 1 a 5 anos, mais de 5 anos de duração, a denotar maior estabilidade quanto maior o tempo) em {1} e {0}."
              preloaded:
                prop: "centralindicadores"
                function: "slice"
                id: ["07_01_09_00","07_01_16_00"]
                year: "max"
              args:
                - id: "07_01_16_00"
                  named_prop: "nu_competencia"
                - id: "07_01_09_00"
                  named_prop: "nu_competencia"
              
        charts:
# ========================================================
          - id: "treemap_vinculos_2012"
            cls: "xs12 md6"
            title: "Quantidade de vínculos empregatícios - 2012"
            type: "TREEMAP"
            preloaded:
              prop: "centralindicadores"
              function: "slice"
              id: ['07_01_09_00', '07_01_10_00', '07_01_11_00']
              options:
                calcs:
                  - id: "bar_description"
                    function: "applyInterpolReplaceDatasetParam"
                    fn_args:
                      - fixed: 
                          template: "{0} - {1}"
                          args:
                            - named_prop: "ds_agreg_primaria"
                            - named_prop: "vl_indicador"
                              format: "inteiro"
                formatters:
                  - id: "vl_indicador"
                    format: "inteiro"
            headers:
              - text: 'Indicador'
                align: 'left'
                value: 'ds_indicador_radical'
              - text: 'Ano'
                align: 'left'
                value: 'nu_competencia'
              - text: 'Quantidade'
                value: 'fmt_vl_indicador'
            options:
              orientation: "vertical"
              id: "cd_indicador"
              size: "vl_indicador"
              text: "calc_bar_description"
              order_field: "cd_indicador"
              colorScale:
                type: "singleHue"
                name: "BuGn"
                levels: 5
            source:
              desc_field: "ds_fonte"
# ========================================================
          - id: "treemap_vinculos_2015"
            cls: "xs12 md6"
            title: "Quantidade de vínculos empregatícios - 2015"
            type: "TREEMAP"
            preloaded:
              prop: "centralindicadores"
              function: "slice"
              id: ['07_01_16_00', '07_01_17_00', '07_01_18_00']
              options:
                calcs:
                  - id: "bar_description"
                    function: "applyInterpolReplaceDatasetParam"
                    fn_args:
                      - fixed: 
                          template: "{0} - {1}"
                          args:
                            - named_prop: "ds_agreg_primaria"
                            - named_prop: "vl_indicador"
                              format: "inteiro"
                formatters:
                  - id: "vl_indicador"
                    format: "inteiro"
            headers:
              - text: 'Indicador'
                align: 'left'
                value: 'ds_indicador_radical'
              - text: 'Ano'
                align: 'left'
                value: 'nu_competencia'
              - text: 'Quantidade'
                value: 'fmt_vl_indicador'
            options:
              orientation: "vertical"
              id: "cd_indicador"
              size: "vl_indicador"
              text: "calc_bar_description"
              order_field: "cd_indicador"
              colorScale:
                type: "singleHue"
                name: "BuPu"
                levels: 5
            source:
              desc_field: "ds_fonte"
# ===============================================
      # - id: "line_tipo_contrato"
      #   title: 
      #     fixed: "Proporção de vínculos empregatícios segundo o tipo de contrato de trabalho"
      #   info:
      #     - type: "text"
      #       title: "Sobre a métrica"
      #       content:
      #         fixed: "O CAGED constitui importante fonte de informação do mercado de trabalho de âmbito nacional e de periodicidade mensal. Foi criado como instrumento de acompanhamento e de fiscalização do processo de admissão e de dispensa de trabalhadores regidos pela CLT, com o objetivo de assistir os desempregados e de apoiar medidas contra o desemprego. A partir de 1986, passou a ser utilizado como suporte ao pagamento do seguro-desemprego e, mais recentemente, tornou-se, também, um relevante instrumento à reciclagem profissional e à recolocação do trabalhador no mercado de trabalho."
      #   description:
      #     - type: "text"
      #       title: ""
      #       content:
      #         template: "Os dados do Cadastro Geral de Empregados e Desempregados (CAGED) indicam que de todos vínculos empregatícios criados mensalmente no município, uma média de VALOR% ao mês foram de celetistas com contratos que não sejam de trabalho parcial ou intermitente, VALOR% ao mês foram de trabalho parcial e VALOR% ao mês foram de trabalho intermitente. A título de comparação, a média estadual desses três tipos de modalidade foram de VALOR% ao mês de celetistas, VALOR% ao mês de trabalho parcial e VALOR% ao mês de trabalho intermitente. Já a média do país foi de VALOR% ao mês de celetistas, VALOR% ao mês de trabalho parcial e VALOR% ao mês de trabalho intermitente."
      #         preloaded:
      #           prop: "centralindicadores"
      #           function: "slice"
      #           id: ['07_01_19_00','07_01_02_00','07_01_16_00','07_01_04_00','07_01_18_00']
      #           value_defs:
      #             - id: "07_01_19_00"
      #               props:
      #                 - id: "vl_indicador"
      #                   formato: 'porcentagem'
      #                   casasDecimais: 1
      #                 - id: "nu_competencia"
      #             - id: "07_01_02_00"
      #               props:
      #                 - id: "nu_competencia"
      #             - id: "07_01_16_00"
      #               props:
      #                 - id: "nu_competencia"
      #             - id: "07_01_02_00"
      #               props:
      #                 - id: "vl_indicador"
      #                   formato: 'inteiro'
      #             - id: "07_01_16_00"
      #               props:
      #                 - id: "vl_indicador"
      #                   formato: 'inteiro'
      #             - special_type: 'combine'
      #               formato: 'inteiro'
      #               function: 'calc_average_by_year'
      #               fn_args:
      #                 - id: "07_01_02_00"
      #                   props:
      #                     - id: "vl_indicador"
      #                     - id: "nu_competencia"
      #                 - id: "07_01_16_00"
      #                   props:
      #                     - id: "vl_indicador"
      #                     - id: "nu_competencia"
      #             - id: "07_01_04_00"
      #               props:
      #                 - id: "vl_indicador"
      #                   formato: 'inteiro'
      #             - id: "07_01_18_00"
      #               props:
      #                 - id: "vl_indicador"
      #                   formato: 'inteiro'
      #     - type: "text"
      #       title: "OBS/Pendências"
      #       content:
      #         fixed: "Indicadores não encontrados. Colocado o gráfico stacked line do anterior para mostrar a visualização desse tipo de gráfico.<br/>
      #                 GRÁFICO de série histórica de linha por mês com o VALOR% stacked the cada tipo de modalidade para o município."
      #   chart_type: "STACKED"
      #   preloaded:
      #       prop: "centralindicadores"
      #       function: "slice"
      #       id: ['07_01_02_00','07_01_03_00','07_01_04_00','07_01_09_00','07_01_10_00','07_01_11_00','07_01_16_00','07_01_17_00','07_01_18_00']
      #   formatters:
      #     - id: "vl_indicador"
      #       formato: 'inteiro'
      #   headers:
      #     - text: 'Indicador'
      #       align: 'left'
      #       value: 'ds_indicador_radical'
      #     - text: 'Ano'
      #       align: 'left'
      #       value: 'nu_competencia'
      #     - text: 'Qtde'
      #       value: 'fmt_vl_indicador'
      #   chart_options:
      #     calcs:
      #       - id: "ds_serie"
      #         function: "remove_year"
      #     id: "calc_ds_serie"
      #     x: "nu_competencia"
      #     y: "vl_indicador"
      #     orientation: "vertical"
      #     text: "ds_indicador_radical"
      #     hide_legend: true
      #   source:
      #     desc_field: "ds_fonte"
