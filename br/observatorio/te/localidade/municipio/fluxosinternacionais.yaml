# ===================================================
principais:
  - relevance: 'lead' 
    cls: 'xs12'
    rowClass: "pt-0 px-3 pb-5"
    api:
      fixed: "/thematic/tefluxointernacional?categorias=fluxos_cont_origem&valor=fluxos_vl_indicador&agregacao=sum&ordenacao=-agr_sum_fluxos_vl_indicador&limit=1"
    args:
      - prop: "value"
        named_prop: 'fluxos_cont_origem'
      - prop: "description"
        fixed: "Continente de origem de maior incidência"
      - prop: "comment"
        fixed: "de 2003 a 2022"
  - relevance: 'lead' 
    cls: 'xs12'
    rowClass: "pt-0 px-3 pb-5"
    api:
      fixed: "/thematic/tefluxointernacional?categorias=fluxos_pais_origem&valor=fluxos_vl_indicador&agregacao=sum&ordenacao=-agr_sum_fluxos_vl_indicador&limit=1"
    args:
      - prop: "value"
        named_prop: 'fluxos_pais_origem'
      - prop: "description"
        fixed: "País de origem de maior incidência"
      - prop: "comment"
        fixed: "de 2003 a 2022"
  - relevance: 'lead' 
    cls: 'xs12'
    rowClass: "pt-0 px-3 pb-5"
    api:
      fixed: "/thematic/tefluxointernacional?categorias=fluxos_local_entrada&valor=fluxos_vl_indicador&agregacao=sum&ordenacao=-agr_sum_fluxos_vl_indicador&limit=1"
    args:
      - prop: "value"
        named_prop: 'fluxos_local_entrada'
      - prop: "description"
        fixed: "Município de entrada de maior frequência"
      - prop: "comment"
        fixed: "de 2003 a 2022"
# ===================================================
secoes:
  - id: "fluxos_internacionais"
    name: ""
    cards:
# ==========================================================
      - id: "treemap_continente"
        title: 
          fixed: "Continente de Origem de pessoas resgatadas de outras nacionalidades"
        title_comment:
          fixed: "Brasil, 2003 a 2022"
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  fixed: "/thematic/tefluxointernacional?categorias=fluxos_cont_origem&valor=fluxos_vl_indicador&agregacao=sum&ordenacao=-agr_sum_fluxos_vl_indicador&limit=1"
                args:
                  - prop: "value"
                    named_prop: 'fluxos_cont_origem'
                  - prop: "description"
                    fixed: "Continente de origem de maior incidência"
          - type: "text"
            title: ""
            content:
              fixed: "Em destaque, o continente de origem de maior incidência nos resgates realizados. No grafico ao lado, apresenta-se a  distribuição percentual de diferentes continentes de origem na população identificada como nacionais de outros países entre os resgatados do trabalho em condição análoga à de escravo no Brasil."
        chart_type: "TREEMAP"
        api: 
          fixed: "/thematic/tefluxointernacional?categorias=fluxos_cont_origem&valor=fluxos_vl_indicador&agregacao=sum"
          options:
            recalc_sum: true
            sum_field: 'agr_sum_fluxos_vl_indicador'
            calcs:
              - id: "perc"
                function: 'calc_percentage_ds'
                fn_args:
                  - named_prop: "agr_sum_fluxos_vl_indicador"
                  - named_prop: "sum_agr_sum_fluxos_vl_indicador"
                format: "porcentagem"
        headers:
          - text: 'Continente'
            align: 'left'
            value: 'fluxos_cont_origem'
          - text: 'Percentual'
            align: 'left'
            value: 'calc_perc'
        chart_options:
          id: "fluxos_cont_origem"
          size: "agr_sum_fluxos_vl_indicador"
          text: "fluxos_cont_origem"
          colorScale:
            name: "YlOrRd"
# ==========================================================
      - id: "treemap_pais"
        title: 
          fixed: "Países de origem de pessoas resgatadas de outras nacionalidades"
        title_comment:
          fixed: "Brasil, 2003 a 2022"
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  fixed: "/thematic/tefluxointernacional?categorias=fluxos_pais_origem&valor=fluxos_vl_indicador&agregacao=sum&ordenacao=-agr_sum_fluxos_vl_indicador&limit=1"
                args:
                  - prop: "value"
                    named_prop: 'fluxos_pais_origem'
                  - prop: "description"
                    fixed: "País de origem de maior incidência"
          - type: "text"
            title: ""
            content:
              fixed: "Em destaque, o país de origem de maior incidência nos resgates realizados. No grafico ao lado, apresenta-se a  distribuição percentual de diferentes países de origem na população identificada como imigrantes de outras nacionalidades entre os resgatados do trabalho em condição análoga à de escravo no Brasil."
        chart_type: "TREEMAP"
        api: 
          fixed: "/thematic/tefluxointernacional?categorias=fluxos_pais_origem&valor=fluxos_vl_indicador&agregacao=sum"
          options:
            recalc_sum: true
            sum_field: 'agr_sum_fluxos_vl_indicador'
            calcs:
              - id: "perc"
                function: 'calc_percentage_ds'
                fn_args:
                  - named_prop: "agr_sum_fluxos_vl_indicador"
                  - named_prop: "sum_agr_sum_fluxos_vl_indicador"
                format: "porcentagem"
        headers:
          - text: 'País'
            align: 'left'
            value: 'fluxos_pais_origem'
          - text: 'Percentual'
            align: 'left'
            value: 'calc_perc'
        chart_options:
          id: "fluxos_pais_origem"
          size: "agr_sum_fluxos_vl_indicador"
          text: "fluxos_pais_origem"
          colorScale:
            name: "YlOrRd"
# ==========================================================
      - id: "treemap_municipios"
        title: 
          fixed: "Municípios brasileiros de entrada de resgatados de outras nacionalidades"
        title_comment:
          fixed: "Brasil, 2003 a 2022"
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  fixed: "/thematic/tefluxointernacional?categorias=fluxos_local_entrada&valor=fluxos_vl_indicador&agregacao=sum&ordenacao=-agr_sum_fluxos_vl_indicador&limit=1"
                args:
                  - prop: "value"
                    named_prop: 'fluxos_local_entrada'
                  - prop: "description"
                    fixed: "Município de entrada de maior frequência"
          - type: "text"
            title: ""
            content:
              fixed: "Em destaque, o município de entrada de maior incidência nos resgates realizados envolvendo nacionais de outros países. No grafico ao lado, apresenta-se a distribuição percentual de diferentes pontos de entrada, no Brasil, da população de imigrantes estrangeiros entre os resgatados."
        chart_type: "TREEMAP"
        api: 
          fixed: "/thematic/tefluxointernacional?categorias=fluxos_local_entrada&valor=fluxos_vl_indicador&agregacao=sum"
          options:
            recalc_sum: true
            sum_field: 'agr_sum_fluxos_vl_indicador'
            calcs:
              - id: "perc"
                function: 'calc_percentage_ds'
                fn_args:
                  - named_prop: "agr_sum_fluxos_vl_indicador"
                  - named_prop: "sum_agr_sum_fluxos_vl_indicador"
                format: "porcentagem"
        headers:
          - text: 'Município'
            align: 'left'
            value: 'fluxos_local_entrada'
          - text: 'Percentual'
            align: 'left'
            value: 'calc_perc'
        chart_options:
          id: "fluxos_local_entrada"
          size: "agr_sum_fluxos_vl_indicador"
          text: "fluxos_local_entrada"
          colorScale:
            name: "YlOrRd"
# ==========================================================
      - id: "treemap_municipios_resid"
        title: 
          fixed: "Localidades de origem mais frequentes de resgatados de outras nacionalidades"
        title_comment:
          fixed: "Brasil, 2003 a 2022"
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  fixed: "/thematic/tefluxointernacional?categorias=fluxos_local_origem&valor=fluxos_vl_indicador&agregacao=sum&ordenacao=-agr_sum_fluxos_vl_indicador&limit=1"
                args:
                  - prop: "value"
                    named_prop: 'fluxos_local_origem'
                  - prop: "description"
                    fixed: "Localidade de origem mais frequente"
          - type: "text"
            title: ""
            content:
              fixed: "Em destaque, o município de origem mais frequente nos resgates realizados envolvendo nacionais de outros países. No grafico ao lado, a distribuição percentual de diferentes localidades de origem e respectivos países para a população de imigrantes, entre os resgatados."
        chart_type: "TREEMAP"
        api: 
          fixed: "/thematic/tefluxointernacional?categorias=fluxos_local_origem&valor=fluxos_vl_indicador&agregacao=sum"
          options:
            recalc_sum: true
            sum_field: 'agr_sum_fluxos_vl_indicador'
            calcs:
              - id: "perc"
                function: 'calc_percentage_ds'
                fn_args:
                  - named_prop: "agr_sum_fluxos_vl_indicador"
                  - named_prop: "sum_agr_sum_fluxos_vl_indicador"
                format: "porcentagem"
        headers:
          - text: 'Local de origem'
            align: 'left'
            value: 'fluxos_local_origem'
          - text: 'Percentual'
            align: 'left'
            value: 'calc_perc'
        chart_options:
          id: "fluxos_local_origem"
          size: "agr_sum_fluxos_vl_indicador"
          text: "fluxos_local_origem"
          colorScale:
            name: "YlOrRd"
# ========================================================
      - id: "mapa_localidade_origem"
        chart_type: "MAP_BUBBLES"
        title: 
          fixed: "Localidades de origem mais frequentes de resgatados de outras nacionalidades"
        title_comment:
          fixed: "Brasil, 2003 a 2022"
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  fixed: "/thematic/tefluxointernacional?categorias=fluxos_local_origem&valor=fluxos_vl_indicador&agregacao=sum&ordenacao=-agr_sum_fluxos_vl_indicador&limit=1"
                args:
                  - prop: "value"
                    named_prop: 'fluxos_local_origem'
                  - prop: "description"
                    fixed: "Localidade de origem mais frequente"
          - type: "text"
            title: ""
            content:
              fixed: "Em destaque, o município de origem mais frequente nos resgates realizados envolvendo nacionais de outros países. No mapa ao lado, destacam-se as localidades, em diferentes partes do mundo (com especial destaque para a América do Sul, Central e Caribe) identificadas como de origem da população de imigrantes resgatada do trabalho escravo no Brasil."
        api:
          fixed: "/thematic/tefluxointernacional?categorias='mun_origem_imigrantes'-cd_indicador,fluxos_origem_lat-latitude,fluxos_origem_long-longitude,fluxos_local_origem&valor=fluxos_vl_indicador&agregacao=sum&filtros=ne-fluxos_origem_long-'-'&ordenacao=-agr_sum_fluxos_vl_indicador"
          options:
            recalc_sum: true
            sum_field: 'agr_sum_fluxos_vl_indicador'
            calcs:
              - id: "perc"
                function: 'calc_percentage_ds'
                fn_args:
                  - named_prop: "agr_sum_fluxos_vl_indicador"
                  - named_prop: "sum_agr_sum_fluxos_vl_indicador"
                format: "porcentagem"
        headers:
          - text: 'Local de origem'
            align: 'left'
            value: 'fluxos_local_origem'
          - text: 'Quantidade'
            align: 'left'
            value: 'agr_sum_fluxos_vl_indicador'
          - text: 'Percentual'
            align: 'left'
            value: 'calc_perc'
        chart_options:
          colorArray: ["rgba(179, 9, 0, 0.7)"]
          height_proportion: 1.7
          indicadores: ["mun_origem_imigrantes"]
          lat: 'latitude'
          long: 'longitude'
          value_field: 'agr_sum_fluxos_vl_indicador'
          minZoom: 3
          radius:
            base: 10000
            multiplier: 2000
        source:
          desc: "Bancos de dados do Seguro-Desemprego do Trabalhador Resgatado, do Sistema de Acompanhamento do Trabalho Escravo (SISACTE), do Sistema COETE (Controle de Erradicação do Trabalho Escravo), referentes ao período iniciado em 2003 (Primeiro Plano Nacional de Erradicação do Trabalho Escravo), e do Radar SIT - Painel de Informações e Estatísticas da Inspeção do Trabalho no Brasil. Os dados brutos foram fornecidos pelo Ministério da Economia do Brasil."
          link: ""
# # ====================================================  
#       - id: "card_fluxos_migratorios"
#         title: 
#           fixed: "Fluxos por UF de origem e ano"
#         # info:
#         #   - type: "text"
#         #     title: "Sobre a métrica"
#         #     content:
#         #       fixed: 'O diagrama apresenta, para o ano selecionado, o fluxo 
#         #               migratório de todos os resgatados nascidos em uma 
#         #               Unidade da Federação escolhida. A origem indicada no 
#         #               diagrama, à esquerda, corresponde ao município de 
#         #               naturalidade declarada. O destino, do lado direito, 
#         #               consiste no município de residência declarada, tanto 
#         #               no próprio Estado de origem quanto em outros Estados. 
#         #               Em alguns casos se nota a existência de municípios 
#         #               "intermediários" - localidades de fluxo mais intenso 
#         #               - que se configuram como municípios híbridos, ou seja, 
#         #               como localidades que são ao mesmo tempo municípios de 
#         #               naturalidade e de residência declarada de trabalhadores 
#         #               resgatados.'
#         description:
#           - type: "minicards"
#             cards:
#               - relevance: 'high' 
#                 cls: 'xs12 xl6'
#                 rowClass: "pt-0 px-3 pb-5"
#                 api:
#                   fixed: "/te/indicadoresestaduais?categorias=nu_competencia,vl_indicador&filtros=eq-cd_indicador-'te_migra_nm',and,eq-nu_competencia-nu_competencia_max,and,eq-cd_uf-21"
#                 api_reactive:
#                   template: "/te/indicadoresestaduais?categorias=nu_competencia,vl_indicador&filtros=eq-cd_indicador-'te_migra_nm',and,eq-nu_competencia-nu_competencia_max,and,eq-cd_uf-{0}"
#                   args:
#                     - named_prop: "cd_uf"
#                 args:
#                   - prop: "value"
#                     named_prop: 'vl_indicador'
#                     format: 'porcentagem'
#                     multiplier: 100
#                     default: "-"
#                   - prop: "description"
#                     fixed: "Taxa de Resgatados não migrantes"
#                   - prop: "comment"
#                     named_prop: "nu_competencia"
#                     default: ""
#               - relevance: 'high' 
#                 cls: 'xs12 xl6'
#                 rowClass: "pt-0 px-3 pb-5"
#                 api:
#                   fixed: "/te/indicadoresestaduais?categorias=nu_competencia,vl_indicador&filtros=eq-cd_indicador-'te_migra_intrauf',and,eq-nu_competencia-nu_competencia_max,and,eq-cd_uf-21"
#                 api_reactive:
#                   template: "/te/indicadoresestaduais?categorias=nu_competencia,vl_indicador&filtros=eq-cd_indicador-'te_migra_intrauf',and,eq-nu_competencia-nu_competencia_max,and,eq-cd_uf-{0}"
#                   args:
#                     - named_prop: "cd_uf"
#                 args:
#                   - prop: "value"
#                     named_prop: 'vl_indicador'
#                     format: 'porcentagem'
#                     multiplier: 100
#                     default: "-"
#                   - prop: "description"
#                     template: "Taxa de migração intraestadual"
#                   - prop: "comment"
#                     named_prop: "nu_competencia"
#                     default: ""
#               - relevance: 'high' 
#                 cls: 'xs12 xl6'
#                 rowClass: "pt-0 px-3 pb-5"
#                 api:
#                   fixed: "/te/indicadoresestaduais?categorias=nu_competencia,vl_indicador&filtros=eq-cd_indicador-'te_migra_interuf',and,eq-nu_competencia-nu_competencia_max,and,eq-cd_uf-21"
#                 api_reactive:
#                   template: "/te/indicadoresestaduais?categorias=nu_competencia,vl_indicador&filtros=eq-cd_indicador-'te_migra_interuf',and,eq-nu_competencia-nu_competencia_max,and,eq-cd_uf-{0}"
#                   args:
#                     - named_prop: "cd_uf"
#                 args:
#                   - prop: "value"
#                     named_prop: 'vl_indicador'
#                     format: 'porcentagem'
#                     multiplier: 100
#                     default: "-"
#                   - prop: "description"
#                     template: "Taxa de migração interestadual"
#                   - prop: "comment"
#                     named_prop: "nu_competencia"
#                     default: ""

#         chart_type: "SANKEYD3"
#         api: 
#           template: "/tefluxointernacional/sankey?categorias=nm_municipio_uf_nat-source,nm_municipio_uf_res-target&agregacao=count&ordenacao=-agr_count&filtros=eq-cd_uf_nat-21,and,ne-cd_municipio_ibge_dv_nat-cd_municipio_ibge_dv_res,and,eq-ano-{0}"
#           args:
#             - base_object: "max_competencia"
#               named_prop: "nu_competencia_max"
#         apiBase: 
#           fixed: "/te/migracoes/sankey?categorias=nm_municipio_uf_nat-source,nm_municipio_uf_res-target&agregacao=count&ordenacao=-agr_count&filtros=ne-cd_municipio_ibge_dv_nat-cd_municipio_ibge_dv_res"
#         headers:
#           - text: 'Município Origem'
#             align: 'left'
#             value: 'source'
#           - text: 'Município Destino'
#             align: 'left'
#             value: 'target'
#           - text: 'Quantidade'
#             align: 'left'
#             value: 'agr_count'
#         chart_options:
#           id_field: 'id'
#           value_field: 'agr_count'
#         source:
#           fixed: "Bancos de dados do Seguro-Desemprego do Trabalhador Resgatado, do Sistema de Acompanhamento do Trabalho Escravo (SISACTE) e do Sistema COETE (Controle de Erradicação do Trabalho Escravo), referentes ao período iniciado em 2003 (Primeiro Plano Nacional de Erradicação do Trabalho Escravo). Os dados brutos foram fornecidos pelo Ministério da Economia do Brasil."


