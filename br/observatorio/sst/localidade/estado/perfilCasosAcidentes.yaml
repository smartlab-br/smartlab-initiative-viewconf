# ===================================================
principais:
  - relevance: 'lead' 
    cls: 'xs12 xl6'
    rowClass: "pt-0 px-3 pb-5"
    api:
      template: "/sst/indicadoresestaduais?categorias=cd_indicador,vl_indicador,ds_fonte,nu_competencia&filtros=eq-cd_indicador-'sst_cat_total',and,eq-nu_competencia-nu_competencia_max,and,eq-cd_uf-{0}"
      args:
        - named_prop: "idLocalidade"
    args:
      - prop: "value"
        named_prop: 'vl_indicador'
        format: 'inteiro'
        collapse:
          format: 'real'
      - prop: "description"
        fixed: "NOTIFICAÇÕES DE ACIDENTES DE TRABALHO (CAT) - TOTAL DE ACIDENTES"
      - prop: 'comment'
        template: "({0}, {1})"
        args:
          - named_prop: "ds_fonte"
          - named_prop: "nu_competencia"
  - relevance: 'lead' 
    cls: 'xs12 xl6'
    rowClass: "pt-0 px-3 pb-5"
    api:
      template: "/sst/indicadoresestaduais?categorias=cd_indicador,vl_indicador,ds_fonte,nu_competencia&filtros=eq-cd_indicador-'sst_cat_obito',and,eq-nu_competencia-nu_competencia_max,and,eq-cd_uf-{0}"
      args:
        - named_prop: "idLocalidade"
    args:
      - prop: "value"
        named_prop: 'vl_indicador'
        format: 'inteiro'
        collapse: 
          format: 'real'
      - prop: "description"
        fixed: "NOTIFICAÇÕES DE ACIDENTES DE TRABALHO (CAT) - ACIDENTES COM ÓBITO "
      - prop: 'comment'
        template: "({0}, {1})"
        args:
          - named_prop: "ds_fonte"
          - named_prop: "nu_competencia"
# ===================================================
secoes:
  - id: "perfil_cat"
    name: "Notificações de Acidentes de Trabalho (CAT)"
    cards:
# =====================================================
      - id: "treemap_setores"
        title: 
          fixed: "Setores Econômicos com Mais Notificações"
        title_comment:
          template: "{0}, de {1} a {2}"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - base_object: "sst_cat"
              named_prop: "agr_min_ano_cat"
            - base_object: "sst_cat"
              named_prop: "agr_max_ano_cat"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              fixed: "Sem observações adicionais. Vide descrição"
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  template: "/sst/cats?categorias=ano_cat,ds_cnae_classe_cat&agregacao=COUNT&filtros=ne-ds_cnae_classe_cat-'',and,ne-ds_cnae_classe_cat-'Indefinido',and,eq-cd_uf-{0},and,eq-ano_cat-{1}&ordenacao=-agr_count&limit=1"
                  args:
                    - named_prop: "idLocalidade"
                    - base_object: "sst_cat"
                      named_prop: "agr_max_ano_cat"
                args:
                  - prop: "value"
                    named_prop: 'agr_count'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    named_prop: "ds_cnae_classe_cat"
                  - prop: "comment"
                    named_prop: 'ano_cat'
          - type: "text"
            title: ""
            content:
              template: "Em destaque, o setor econômico com mais notificações de acidentes de trabalho no último ano apurado para a unidade geográfica selecionada, considerado o universo de trabalhadores com vínculo de emprego. No gráfico ao lado, comparam-se, para o período de {0} a {1}, os diferentes setores econômicos quanto ao respectivo percentual de notificações. Utilize os filtros abaixo para combinar as perspectivas."
              api: 
                template: "/sst/cats?categorias=1&valor=ano_cat&agregacao=MIN,MAX"
              args:
                - named_prop: "agr_min_ano_cat"
                - named_prop: "agr_max_ano_cat"
          - id: "slider_ano"
            type: "slider"
            range: true
            api: 
              fixed: "/sst/indicadoresnacionais?categorias=1&valor=nu_competencia&agregacao=min,max&filtros=eq-cd_indicador-'sst_cat_total'"
            args:
              - prop: "min"
                named_prop: "agr_min_nu_competencia"
              - prop: "max"
                named_prop: "agr_max_nu_competencia"
            selection:
              event: "selection"
              rules:
                filter: ",and,ge-ano_cat-{0},and,le-ano_cat-{1}"
                api:
                  args:
                    - named_prop: "value_min"
                    - named_prop: "value_max"
          - id: "select_grupo_agente"
            type: "select"
            multiple: true
            label: "Grupo de Agente Causador"
            api:
              template: "/sst/cats?categorias=ds_grupo_agcausadores_cat&agregacao=distinct&ordenacao=ds_grupo_agcausadores_cat&filtros=eq-cd_uf-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: "id"
                named_prop: "ds_grupo_agcausadores_cat"
              - prop: "label"
                named_prop: "ds_grupo_agcausadores_cat"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-ds_grupo_agcausadores_cat-{0}"
                api:
                  args:
                    - named_prop: "ds_grupo_agcausadores_cat"
          - id: "select_natureza"
            type: "select"
            multiple: true
            label: "Natureza da lesão"
            api:
              template: "/sst/cats?categorias=ds_natureza_lesao&agregacao=distinct&ordenacao=ds_natureza_lesao&filtros=eq-cd_uf-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: "id"
                named_prop: "ds_natureza_lesao"
              - prop: "label"
                named_prop: "ds_natureza_lesao"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-ds_natureza_lesao-{0}"
                api:
                  args:
                    - named_prop: "ds_natureza_lesao"
          - id: "select_partecorpo"
            type: "select"
            multiple: true
            label: "Parte do corpo atingida"
            api:
              template: "/sst/cats?categorias=ds_parte_corpo_atingida&agregacao=distinct&ordenacao=ds_parte_corpo_atingida&filtros=eq-cd_uf-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: "id"
                named_prop: "ds_parte_corpo_atingida"
              - prop: "label"
                named_prop: "ds_parte_corpo_atingida"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-ds_parte_corpo_atingida-{0}"
                api:
                  args:
                    - named_prop: "ds_parte_corpo_atingida"
          - id: "select_mortes"
            cls: "align-end pb-0"
            type: "check"
            label: "com Mortes"
            value: false
            color: "black"
            selection:
              event: "selection" 
              rules:
                filter: ",and,eq-cd_indica_obito-'S'"
                filter_text: "Acidentes com Mortes"
        footnote: 
          template: "Setores Econômicos com Mais Notificações ({0}-{1})"
          args:
            - base_object: "sst_cat"
              named_prop: "agr_min_ano_cat"
            - base_object: "sst_cat"
              named_prop: "agr_max_ano_cat"
        chart_type: "TREEMAP"
        api: 
          template: "/sst/cats?categorias=ds_cnae_classe_cat&agregacao=COUNT&filtros=eq-cd_uf-{0},and,ne-ds_cnae_classe_cat-'',and,ne-ds_cnae_classe_cat-'Indefinido'"
          args:
            - named_prop: "idLocalidade"
          options:
              formatters:
                - id: "agr_count"
                  format: 'inteiro'
        headers:
          - text: 'Setor'
            align: 'left'
            value: 'ds_cnae_classe_cat'
          - text: 'Qtde'
            value: 'fmt_agr_count'
        chart_options:
          id: "ds_cnae_classe_cat"
          size: "agr_count"
          text: "ds_cnae_classe_cat"
          colorScale:
            name: "YlOrRd"
        # source:
        #   desc_field: "ds_fonte"
# =====================================================
      - id: "treemap_lesoes"
        title: 
          fixed: "Lesões mais frequentes"
        title_comment:
          template: "{0}, de {1} a {2}"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - base_object: "sst_cat"
              named_prop: "agr_min_ano_cat"
            - base_object: "sst_cat"
              named_prop: "agr_max_ano_cat"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              fixed: "Sem observações adicionais. Vide descrição"
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  template: "/sst/cats?categorias=ano_cat,ds_natureza_lesao&agregacao=COUNT&filtros=ne-ds_natureza_lesao-'',and,eq-cd_uf-{0},and,eq-ano_cat-{1}&ordenacao=-agr_count&limit=1"
                  args:
                    - named_prop: "idLocalidade"
                    - base_object: "sst_cat"
                      named_prop: "agr_max_ano_cat"
                args:
                  - prop: "value"
                    named_prop: 'agr_count'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    named_prop: "ds_natureza_lesao"
                  - prop: "comment"
                    named_prop: 'ano_cat'
          - type: "text"
            title: ""
            content:
              template: "Em destaque, a lesão mais frequentemente presente em notificações de acidentes de trabalho no último ano apurado para a unidade geográfica selecionada, considerado o universo de trabalhadores com vínculo de emprego. No gráfico ao lado, comparam-se, para o período de {0} a {1}, o percentual de participaçõa das diferentes lesões. Utilize os filtros abaixo para combinar as perspectivas."
              api: 
                template: "/sst/cats?categorias=1&valor=ano_cat&agregacao=MIN,MAX"
              args:
                - named_prop: "agr_min_ano_cat"
                - named_prop: "agr_max_ano_cat"
          - id: "slider_ano"
            type: "slider"
            range: true
            api: 
              fixed: "/sst/indicadoresnacionais?categorias=1&valor=nu_competencia&agregacao=min,max&filtros=eq-cd_indicador-'sst_cat_total'"
            args:
              - prop: "min"
                named_prop: "agr_min_nu_competencia"
              - prop: "max"
                named_prop: "agr_max_nu_competencia"
            selection:
              event: "selection"
              rules:
                filter: ",and,ge-ano_cat-{0},and,le-ano_cat-{1}"
                api:
                  args:
                    - named_prop: "value_min"
                    - named_prop: "value_max"
          - id: "select_cnae"
            type: "select"
            multiple: true
            label: "Setor Econômico"
            api:
              template: "/sst/cats?categorias=ds_cnae_classe_cat&agregacao=distinct&ordenacao=ds_cnae_classe_cat&filtros=eq-cd_uf-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: "id"
                named_prop: "ds_cnae_classe_cat"
              - prop: "label"
                named_prop: "ds_cnae_classe_cat"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-ds_cnae_classe_cat-{0}"
                api:
                  args:
                    - named_prop: "ds_cnae_classe_cat"
          - id: "select_grupo_agente"
            type: "select"
            multiple: true
            label: "Grupo de Agente Causador"
            api:
              template: "/sst/cats?categorias=ds_grupo_agcausadores_cat&agregacao=distinct&ordenacao=ds_grupo_agcausadores_cat&filtros=eq-cd_uf-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: "id"
                named_prop: "ds_grupo_agcausadores_cat"
              - prop: "label"
                named_prop: "ds_grupo_agcausadores_cat"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-ds_grupo_agcausadores_cat-{0}"
                api:
                  args:
                    - named_prop: "ds_grupo_agcausadores_cat"
          - id: "select_partecorpo"
            type: "select"
            multiple: true
            label: "Parte do corpo atingida"
            api:
              template: "/sst/cats?categorias=ds_parte_corpo_atingida&agregacao=distinct&ordenacao=ds_parte_corpo_atingida&filtros=eq-cd_uf-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: "id"
                named_prop: "ds_parte_corpo_atingida"
              - prop: "label"
                named_prop: "ds_parte_corpo_atingida"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-ds_parte_corpo_atingida-{0}"
                api:
                  args:
                    - named_prop: "ds_parte_corpo_atingida"
          - id: "select_mortes"
            cls: "align-end pb-0"
            type: "check"
            label: "com Mortes"
            value: false
            color: "black"
            selection:
              event: "selection" 
              rules:
                filter: ",and,eq-cd_indica_obito-'S'"
                filter_text: "Acidentes com Mortes"
        footnote: 
          template: "Lesões mais frequentes ({0}-{1})"
          args:
            - base_object: "sst_cat"
              named_prop: "agr_min_ano_cat"
            - base_object: "sst_cat"
              named_prop: "agr_max_ano_cat"
        chart_type: "TREEMAP"
        api: 
          template: "/sst/cats?categorias=ds_natureza_lesao&agregacao=COUNT&filtros=ne-ds_natureza_lesao-'',and,eq-cd_uf-{0}"
          args:
            - named_prop: "idLocalidade"
          options:
              formatters:
                - id: "agr_count"
                  format: 'inteiro'
        headers:
          - text: 'Lesão'
            align: 'left'
            value: 'ds_natureza_lesao'
          - text: 'Qtde'
            value: 'fmt_agr_count'
        chart_options:
          id: "ds_natureza_lesao"
          size: "agr_count"
          text: "ds_natureza_lesao"
          colorScale:
            name: "YlOrRd"
        # source:
        #   desc_field: "ds_fonte"
# =====================================================
      - id: "treemap_parte_corpo"
        title: 
          fixed: "Partes do corpo mais frequentemente atingidas"
        title_comment:
          template: "{0}, de {1} a {2}"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - base_object: "sst_cat"
              named_prop: "agr_min_ano_cat"
            - base_object: "sst_cat"
              named_prop: "agr_max_ano_cat"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              fixed: "Sem observações adicionais. Vide descrição"
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  template: "/sst/cats?categorias=ano_cat,ds_parte_corpo_atingida&agregacao=COUNT&filtros=ne-ds_parte_corpo_atingida-'',and,eq-cd_uf-{0},and,eq-ano_cat-{1}&ordenacao=-agr_count&limit=1"
                  args:
                    - named_prop: "idLocalidade"
                    - base_object: "sst_cat"
                      named_prop: "agr_max_ano_cat"
                args:
                  - prop: "value"
                    named_prop: 'agr_count'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    named_prop: "ds_parte_corpo_atingida"
                  - prop: "comment"
                    named_prop: 'ano_cat'
          - type: "text"
            title: ""
            content:
              template: "Em destaque, a parte do corpo mais frequentemente atingida segundo as notificações de acidentes de trabalho no último ano apurado para a unidade geográfica selecionada, considerado o universo de trabalhadores com vínculo de emprego. No gráfico ao lado, comparam-se, para o período de {0} a {1}, o percentual de participaçõa das diferentes partes do corpo. Utilize os filtros abaixo para combinar as perspectivas."
              api: 
                template: "/sst/cats?categorias=1&valor=ano_cat&agregacao=MIN,MAX"
              args:
                - named_prop: "agr_min_ano_cat"
                - named_prop: "agr_max_ano_cat"
          - id: "slider_ano"
            type: "slider"
            range: true
            api: 
              fixed: "/sst/indicadoresnacionais?categorias=1&valor=nu_competencia&agregacao=min,max&filtros=eq-cd_indicador-'sst_cat_total'"
            args:
              - prop: "min"
                named_prop: "agr_min_nu_competencia"
              - prop: "max"
                named_prop: "agr_max_nu_competencia"
            selection:
              event: "selection"
              rules:
                filter: ",and,ge-ano_cat-{0},and,le-ano_cat-{1}"
                api:
                  args:
                    - named_prop: "value_min"
                    - named_prop: "value_max"
          - id: "select_cnae"
            type: "select"
            multiple: true
            label: "Setor Econômico"
            api:
              template: "/sst/cats?categorias=ds_cnae_classe_cat&agregacao=distinct&ordenacao=ds_cnae_classe_cat&filtros=eq-cd_uf-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: "id"
                named_prop: "ds_cnae_classe_cat"
              - prop: "label"
                named_prop: "ds_cnae_classe_cat"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-ds_cnae_classe_cat-{0}"
                api:
                  args:
                    - named_prop: "ds_cnae_classe_cat"
          - id: "select_grupo_agente"
            type: "select"
            multiple: true
            label: "Grupo de Agente Causador"
            api:
              template: "/sst/cats?categorias=ds_grupo_agcausadores_cat&agregacao=distinct&ordenacao=ds_grupo_agcausadores_cat&filtros=eq-cd_uf-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: "id"
                named_prop: "ds_grupo_agcausadores_cat"
              - prop: "label"
                named_prop: "ds_grupo_agcausadores_cat"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-ds_grupo_agcausadores_cat-{0}"
                api:
                  args:
                    - named_prop: "ds_grupo_agcausadores_cat"
          - id: "select_natureza"
            type: "select"
            multiple: true
            label: "Natureza da lesão"
            api:
              template: "/sst/cats?categorias=ds_natureza_lesao&agregacao=distinct&ordenacao=ds_natureza_lesao&filtros=eq-cd_uf-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: "id"
                named_prop: "ds_natureza_lesao"
              - prop: "label"
                named_prop: "ds_natureza_lesao"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-ds_natureza_lesao-{0}"
                api:
                  args:
                    - named_prop: "ds_natureza_lesao"
          - id: "select_mortes"
            cls: "align-end pb-0"
            type: "check"
            label: "com Mortes"
            value: false
            color: "black"
            selection:
              event: "selection" 
              rules:
                filter: ",and,eq-cd_indica_obito-'S'"
                filter_text: "Acidentes com Mortes"
        footnote: 
          template: "Partes do corpo mais frequentemente atingidas ({0}-{1})"
          args:
            - base_object: "sst_cat"
              named_prop: "agr_min_ano_cat"
            - base_object: "sst_cat"
              named_prop: "agr_max_ano_cat"
        chart_type: "TREEMAP"
        api: 
          template: "/sst/cats?categorias=ds_parte_corpo_atingida&agregacao=COUNT&filtros=ne-ds_parte_corpo_atingida-'',and,eq-cd_uf-{0}"
          args:
            - named_prop: "idLocalidade"
          options:
              formatters:
                - id: "agr_count"
                  format: 'inteiro'
        headers:
          - text: 'Parte do Corpo Atingida'
            align: 'left'
            value: 'ds_parte_corpo_atingida'
          - text: 'Qtde'
            value: 'fmt_agr_count'
        chart_options:
          id: "ds_parte_corpo_atingida"
          size: "agr_count"
          text: "ds_parte_corpo_atingida"
          colorScale:
            name: "YlOrRd"
  # =====================================================
      - id: "treemap_grupo_agentes"
        title: 
          fixed: "Grupos de Agentes Causadores"
        title_comment:
          template: "{0}, de {1} a {2}"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - base_object: "sst_cat"
              named_prop: "agr_min_ano_cat"
            - base_object: "sst_cat"
              named_prop: "agr_max_ano_cat"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              fixed: "Critérios empíricos organizados pelo CEREST (Centro de Referência em Saúde do Trabalhador) do Município de Piracicaba, no âmbito do Fórum de Acidentes de Trabalho, atualmente sob a coordenação dos professores Rodolfo Andrade Gouveia Vilela, da Faculdade de Saúde Pública da USP, e Ildeberto Muniz de Almeida, da Faculdade de Medicina de Botucatu (UNESP) (http://www.forumat.net.br). O importante fórum foi criado por iniciativa conjunta de docentes das áreas de Saúde do Trabalhador do Departamento de Saúde Pública da Faculdade de Medicina de Botucatu, UNESP e, à época, da Engenharia de Produção da UNIMEP Piracicaba, no primeiro semestre de 2008. Atualmente o fórum reúne dezenas de instituições do Brasil e do exterior e tem encontros presenciais frequentes."
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  template: "/sst/cats?categorias=ano_cat,ds_grupo_agcausadores_cat&agregacao=COUNT&filtros=ne-ds_grupo_agcausadores_cat-'',and,eq-cd_uf-{0},and,eq-ano_cat-{1}&ordenacao=-agr_count&limit=1"
                  args:
                    - named_prop: "idLocalidade"
                    - base_object: "sst_cat"
                      named_prop: "agr_max_ano_cat"
                args:
                  - prop: "value"
                    named_prop: 'agr_count'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    named_prop: "ds_grupo_agcausadores_cat"
                  - prop: "comment"
                    named_prop: 'ano_cat'
          - type: "text"
            title: ""
            content:
              template: "Em destaque, os grupos de agentes causadores mais frequentementes citados em notificações de acidentes de trabalho no último ano apurado para a unidade geográfica selecionada, considerado o universo de trabalhadores com vínculo de emprego. No gráfico, comparam-se, para o período de {0} a {1}, os percentuais de participação dos diferentes grupos de agentes causadores. Utilize os filtros abaixo para combinar as perspectivas."
              api: 
                template: "/sst/cats?categorias=1&valor=ano_cat&agregacao=MIN,MAX"
              args:
                - named_prop: "agr_min_ano_cat"
                - named_prop: "agr_max_ano_cat"
          - id: "slider_ano"
            type: "slider"
            range: true
            api: 
              fixed: "/sst/indicadoresnacionais?categorias=1&valor=nu_competencia&agregacao=min,max&filtros=eq-cd_indicador-'sst_cat_total'"
            args:
              - prop: "min"
                named_prop: "agr_min_nu_competencia"
              - prop: "max"
                named_prop: "agr_max_nu_competencia"
            selection:
              event: "selection"
              rules:
                filter: ",and,ge-ano_cat-{0},and,le-ano_cat-{1}"
                api:
                  args:
                    - named_prop: "value_min"
                    - named_prop: "value_max"
          - id: "select_cnae"
            type: "select"
            multiple: true
            label: "Setor Econômico"
            api:
              template: "/sst/cats?categorias=ds_cnae_classe_cat&agregacao=distinct&ordenacao=ds_cnae_classe_cat&filtros=eq-cd_uf-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: "id"
                named_prop: "ds_cnae_classe_cat"
              - prop: "label"
                named_prop: "ds_cnae_classe_cat"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-ds_cnae_classe_cat-{0}"
                api:
                  args:
                    - named_prop: "ds_cnae_classe_cat"
          - id: "select_natureza"
            type: "select"
            multiple: true
            label: "Natureza da lesão"
            api:
              template: "/sst/cats?categorias=ds_natureza_lesao&agregacao=distinct&ordenacao=ds_natureza_lesao&filtros=eq-cd_uf-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: "id"
                named_prop: "ds_natureza_lesao"
              - prop: "label"
                named_prop: "ds_natureza_lesao"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-ds_natureza_lesao-{0}"
                api:
                  args:
                    - named_prop: "ds_natureza_lesao"
          - id: "select_partecorpo"
            type: "select"
            multiple: true
            label: "Parte do corpo atingida"
            api:
              template: "/sst/cats?categorias=ds_parte_corpo_atingida&agregacao=distinct&ordenacao=ds_parte_corpo_atingida&filtros=eq-cd_uf-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: "id"
                named_prop: "ds_parte_corpo_atingida"
              - prop: "label"
                named_prop: "ds_parte_corpo_atingida"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-ds_parte_corpo_atingida-{0}"
                api:
                  args:
                    - named_prop: "ds_parte_corpo_atingida"
          - id: "select_mortes"
            cls: "align-end pb-0"
            type: "check"
            label: "com Mortes"
            value: false
            color: "black"
            selection:
              event: "selection" 
              rules:
                filter: ",and,eq-cd_indica_obito-'S'"
                filter_text: "Acidentes com Mortes"
        footnote: 
          template: "Grupos de Agentes Causadores ({0}-{1})"
          args:
            - base_object: "sst_cat"
              named_prop: "agr_min_ano_cat"
            - base_object: "sst_cat"
              named_prop: "agr_max_ano_cat"
        chart_type: "TREEMAP"
        api: 
          template: "/sst/cats?categorias=ds_grupo_agcausadores_cat&agregacao=COUNT&filtros=eq-cd_uf-{0},and,ne-ds_grupo_agcausadores_cat-''"
          args:
            - named_prop: "idLocalidade"
          options:
              formatters:
                - id: "agr_count"
                  format: 'inteiro'
        headers:
          - text: 'Grupo de Agentes Causadores'
            align: 'left'
            value: 'ds_grupo_agcausadores_cat'
          - text: 'Qtde'
            value: 'fmt_agr_count'
        chart_options:
          id: "ds_grupo_agcausadores_cat"
          size: "agr_count"
          text: "ds_grupo_agcausadores_cat"
          colorScale:
            name: "YlOrRd"
  # =====================================================
      - id: "treemap_agentes"
        title: 
          fixed: "Agentes Causadores"
        title_comment:
          template: "{0}, de {1} a {2}"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - base_object: "sst_cat"
              named_prop: "agr_min_ano_cat"
            - base_object: "sst_cat"
              named_prop: "agr_max_ano_cat"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              fixed: "Sem observações adicionais. Vide descrição"
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  template: "/sst/cats?categorias=ano_cat,ds_agente_causador&agregacao=COUNT&filtros=ne-ds_agente_causador-'',and,eq-cd_uf-{0},and,eq-ano_cat-{1}&ordenacao=-agr_count&limit=1"
                  args:
                    - named_prop: "idLocalidade"
                    - base_object: "sst_cat"
                      named_prop: "agr_max_ano_cat"
                args:
                  - prop: "value"
                    named_prop: 'agr_count'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    named_prop: "ds_agente_causador"
                  - prop: "comment"
                    named_prop: 'ano_cat'
          - type: "text"
            title: ""
            content:
              template: "Em destaque, os agentes causadores mais frequentementes citados em notificações de acidentes de trabalho no último ano apurado para a unidade geográfica selecionada, considerado o universo de trabalhadores com vínculo de emprego. No gráfico, comparam-se, para o período de {0} a {1}, os percentuais de participação dos diferentes grupos de agentes causadores. Utilize os filtros abaixo para combinar as perspectivas."
              api: 
                template: "/sst/cats?categorias=1&valor=ano_cat&agregacao=MIN,MAX"
              args:
                - named_prop: "agr_min_ano_cat"
                - named_prop: "agr_max_ano_cat"
          - id: "slider_ano"
            type: "slider"
            range: true
            api: 
              fixed: "/sst/indicadoresnacionais?categorias=1&valor=nu_competencia&agregacao=min,max&filtros=eq-cd_indicador-'sst_cat_total'"
            args:
              - prop: "min"
                named_prop: "agr_min_nu_competencia"
              - prop: "max"
                named_prop: "agr_max_nu_competencia"
            selection:
              event: "selection"
              rules:
                filter: ",and,ge-ano_cat-{0},and,le-ano_cat-{1}"
                api:
                  args:
                    - named_prop: "value_min"
                    - named_prop: "value_max"
          - id: "select_cnae"
            type: "select"
            multiple: true
            label: "Setor Econômico"
            api:
              template: "/sst/cats?categorias=ds_cnae_classe_cat&agregacao=distinct&ordenacao=ds_cnae_classe_cat&filtros=eq-cd_uf-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: "id"
                named_prop: "ds_cnae_classe_cat"
              - prop: "label"
                named_prop: "ds_cnae_classe_cat"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-ds_cnae_classe_cat-{0}"
                api:
                  args:
                    - named_prop: "ds_cnae_classe_cat"
          - id: "select_natureza"
            type: "select"
            multiple: true
            label: "Natureza da lesão"
            api:
              template: "/sst/cats?categorias=ds_natureza_lesao&agregacao=distinct&ordenacao=ds_natureza_lesao&filtros=eq-cd_uf-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: "id"
                named_prop: "ds_natureza_lesao"
              - prop: "label"
                named_prop: "ds_natureza_lesao"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-ds_natureza_lesao-{0}"
                api:
                  args:
                    - named_prop: "ds_natureza_lesao"
          - id: "select_partecorpo"
            type: "select"
            multiple: true
            label: "Parte do corpo atingida"
            api:
              template: "/sst/cats?categorias=ds_parte_corpo_atingida&agregacao=distinct&ordenacao=ds_parte_corpo_atingida&filtros=eq-cd_uf-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: "id"
                named_prop: "ds_parte_corpo_atingida"
              - prop: "label"
                named_prop: "ds_parte_corpo_atingida"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-ds_parte_corpo_atingida-{0}"
                api:
                  args:
                    - named_prop: "ds_parte_corpo_atingida"
          - id: "select_mortes"
            cls: "align-end pb-0"
            type: "check"
            label: "com Mortes"
            value: false
            color: "black"
            selection:
              event: "selection" 
              rules:
                filter: ",and,eq-cd_indica_obito-'S'"
                filter_text: "Acidentes com Mortes"
        footnote: 
          template: "Agentes Causadores ({0}-{1})"
          args:
            - base_object: "sst_cat"
              named_prop: "agr_min_ano_cat"
            - base_object: "sst_cat"
              named_prop: "agr_max_ano_cat"
        chart_type: "TREEMAP"
        api: 
          template: "/sst/cats?categorias=ds_agente_causador&agregacao=COUNT&filtros=eq-cd_uf-{0},and,ne-ds_agente_causador-''"
          args:
            - named_prop: "idLocalidade"
          options:
              formatters:
                - id: "agr_count"
                  format: 'inteiro'
        headers:
          - text: 'Agentes Causadores'
            align: 'left'
            value: 'ds_agente_causador'
          - text: 'Qtde'
            value: 'fmt_agr_count'
        chart_options:
          id: "ds_agente_causador"
          size: "agr_count"
          text: "ds_agente_causador"
          colorScale:
            name: "YlOrRd"
  # =====================================================
      - id: "treemap_cbo"
        title: 
          fixed: "Ocupações"
        title_comment:
          template: "{0}, de {1} a {2}"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - base_object: "sst_cat"
              named_prop: "agr_min_ano_cat"
            - base_object: "sst_cat"
              named_prop: "agr_max_ano_cat"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              fixed: "Sem observações adicionais. Vide descrição"
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  template: "/sst/cats?categorias=ano_cat,ds_cbo&agregacao=COUNT&filtros=ne-ds_cbo-'',and,eq-cd_uf-{0},and,eq-ano_cat-{1}&ordenacao=-agr_count&limit=1"
                  args:
                    - named_prop: "idLocalidade"
                    - base_object: "sst_cat"
                      named_prop: "agr_max_ano_cat"
                args:
                  - prop: "value"
                    named_prop: 'agr_count'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    named_prop: "ds_cbo"
                  - prop: "comment"
                    named_prop: 'ano_cat'
          - type: "text"
            title: ""
            content:
              template: "Em destaque, a ocupação mais frequentemente citada em notificações de acidentes de trabalho no último ano apurado para a unidade geográfica selecionada, considerado o universo de trabalhadores com vínculo de emprego. No gráfico, comparam-se, para o período de {0} a {1}, os percentuais de participação das diferentes ocupações nas notificações de acidentes. Utilize os filtros abaixo para combinar as perspectivas."
              api: 
                template: "/sst/cats?categorias=1&valor=ano_cat&agregacao=MIN,MAX"
              args:
                - named_prop: "agr_min_ano_cat"
                - named_prop: "agr_max_ano_cat"
          - id: "slider_ano"
            type: "slider"
            range: true
            api: 
              fixed: "/sst/indicadoresnacionais?categorias=1&valor=nu_competencia&agregacao=min,max&filtros=eq-cd_indicador-'sst_cat_total'"
            args:
              - prop: "min"
                named_prop: "agr_min_nu_competencia"
              - prop: "max"
                named_prop: "agr_max_nu_competencia"
            selection:
              event: "selection"
              rules:
                filter: ",and,ge-ano_cat-{0},and,le-ano_cat-{1}"
                api:
                  args:
                    - named_prop: "value_min"
                    - named_prop: "value_max"
          - id: "select_cnae"
            type: "select"
            multiple: true
            label: "Setor Econômico"
            api:
              template: "/sst/cats?categorias=ds_cnae_classe_cat&agregacao=distinct&ordenacao=ds_cnae_classe_cat&filtros=eq-cd_uf-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: "id"
                named_prop: "ds_cnae_classe_cat"
              - prop: "label"
                named_prop: "ds_cnae_classe_cat"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-ds_cnae_classe_cat-{0}"
                api:
                  args:
                    - named_prop: "ds_cnae_classe_cat"
          - id: "select_grupo_agente"
            type: "select"
            multiple: true
            label: "Grupo de Agente Causador"
            api:
              template: "/sst/cats?categorias=ds_grupo_agcausadores_cat&agregacao=distinct&ordenacao=ds_grupo_agcausadores_cat&filtros=eq-cd_uf-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: "id"
                named_prop: "ds_grupo_agcausadores_cat"
              - prop: "label"
                named_prop: "ds_grupo_agcausadores_cat"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-ds_grupo_agcausadores_cat-{0}"
                api:
                  args:
                    - named_prop: "ds_grupo_agcausadores_cat"
          - id: "select_natureza"
            type: "select"
            multiple: true
            label: "Natureza da lesão"
            api:
              template: "/sst/cats?categorias=ds_natureza_lesao&agregacao=distinct&ordenacao=ds_natureza_lesao&filtros=eq-cd_uf-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: "id"
                named_prop: "ds_natureza_lesao"
              - prop: "label"
                named_prop: "ds_natureza_lesao"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-ds_natureza_lesao-{0}"
                api:
                  args:
                    - named_prop: "ds_natureza_lesao"
          - id: "select_partecorpo"
            type: "select"
            multiple: true
            label: "Parte do corpo atingida"
            api:
              template: "/sst/cats?categorias=ds_parte_corpo_atingida&agregacao=distinct&ordenacao=ds_parte_corpo_atingida&filtros=eq-cd_uf-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: "id"
                named_prop: "ds_parte_corpo_atingida"
              - prop: "label"
                named_prop: "ds_parte_corpo_atingida"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-ds_parte_corpo_atingida-{0}"
                api:
                  args:
                    - named_prop: "ds_parte_corpo_atingida"
          - id: "select_mortes"
            cls: "align-end pb-0"
            type: "check"
            label: "com Mortes"
            value: false
            color: "black"
            selection:
              event: "selection" 
              rules:
                filter: ",and,eq-cd_indica_obito-'S'"
                filter_text: "Acidentes com Mortes"
        footnote: 
          template: "Ocupações ({0}-{1})"
          args:
            - base_object: "sst_cat"
              named_prop: "agr_min_ano_cat"
            - base_object: "sst_cat"
              named_prop: "agr_max_ano_cat"
        chart_type: "TREEMAP"
        api: 
          template: "/sst/cats?categorias=ds_cbo&agregacao=COUNT&filtros=ne-ds_cbo-'',and,eq-cd_uf-{0}"
          args:
            - named_prop: "idLocalidade"
          options:
              formatters:
                - id: "agr_count"
                  format: 'inteiro'
        headers:
          - text: 'Ocupação'
            align: 'left'
            value: 'ds_cbo'
          - text: 'Qtde'
            value: 'fmt_agr_count'
        chart_options:
          id: "ds_cbo"
          size: "agr_count"
          text: "ds_cbo"
          colorScale:
            name: "YlOrRd"
  # =====================================================
      # - id: "bar_mortes"
      #   title: 
      #     fixed: "Notificações de Acidentes de Trabalhadores com Mortes"
      #   title_comment:
      #     template: "{0}, de {1} a {2}"
      #     api: 
      #       template: "/sst/cats?categorias=nm_uf&valor=ano_cat&agregacao=MIN,MAX&filtros=eq-cd_uf-{0}"
      #       args:
      #         - named_prop: "idLocalidade"
      #     args:
      #       - named_prop: nm_uf
      #       - named_prop: "agr_min_ano_cat"
      #       - named_prop: "agr_max_ano_cat"
      #   info:
      #     - type: "text"
      #       title: "Sobre a métrica"
      #       content:
      #         fixed: "Sem observações adicionais. Vide descrição"
      #   description:
      #     - type: "minicards"
      #       cards:
      #         - relevance: 'high'
      #           cls: 'xs12'
      #           api:
      #             template: "/sst/cats?categorias=1&agregacao=COUNT&filtros=eq-cd_uf-{0},and,eq-cd_indica_obito-'S'"
      #             args:
      #               - named_prop: "idLocalidade"
      #           args:
      #             - prop: "value"
      #               named_prop: 'agr_count'
      #               format: 'inteiro'
      #               collapse:
      #                 format: 'real'
      #               default: "Sem Registros"
      #             - prop: "description"
      #               fixed: "Total de Notificações"
      #     - type: "text"
      #       title: ""
      #       content:
      #         template: "Em destaque, o número acumulado de notificações de acidentes de trabalho com morte na unidade geográfica selecionada, considerado o universo de trabalhadores com vínculo de emprego. No gráfico ao lado, apresenta-se a série histórica de {0} a {1}. Utilize os filtros abaixo para combinar as perspectivas."
      #         api: 
      #           template: "/sst/cats?categorias=1&valor=ano_cat&agregacao=MIN,MAX"
      #         args:
      #           - named_prop: "agr_min_ano_cat"
      #           - named_prop: "agr_max_ano_cat"
      #     - id: "select_cnae"
      #       type: "select"
      #       multiple: true
      #       label: "Setor Econômico"
      #       api:
      #         template: "/sst/cats?categorias=ds_cnae_classe_cat&agregacao=distinct&ordenacao=ds_cnae_classe_cat&filtros=eq-cd_indica_obito-'S',and,eq-cd_uf-{0}"
      #         args:
      #           - named_prop: "idLocalidade"
      #       args:
      #         - prop: "id"
      #           named_prop: "ds_cnae_classe_cat"
      #         - prop: "label"
      #           named_prop: "ds_cnae_classe_cat"
      #           null_value: "(Não informado)"
      #       selection:
      #         event: "selection" 
      #         rules:
      #           filter: ",and,in-ds_cnae_classe_cat-{0}"
      #           api:
      #             args:
      #               - named_prop: "ds_cnae_classe_cat"
      #     - id: "select_grupo_agente"
      #       type: "select"
      #       multiple: true
      #       label: "Grupo de Agente Causador"
      #       api:
      #         template: "/sst/cats?categorias=ds_grupo_agcausadores_cat&agregacao=distinct&ordenacao=ds_grupo_agcausadores_cat&filtros=eq-cd_indica_obito-'S',and,eq-cd_uf-{0}"
      #         args:
      #           - named_prop: "idLocalidade"
      #       args:
      #         - prop: "id"
      #           named_prop: "ds_grupo_agcausadores_cat"
      #         - prop: "label"
      #           named_prop: "ds_grupo_agcausadores_cat"
      #           null_value: "(Não informado)"
      #       selection:
      #         event: "selection" 
      #         rules:
      #           filter: ",and,in-ds_grupo_agcausadores_cat-{0}"
      #           api:
      #             args:
      #               - named_prop: "ds_grupo_agcausadores_cat"
      #     - id: "select_natureza"
      #       type: "select"
      #       multiple: true
      #       label: "Natureza da lesão"
      #       api:
      #         template: "/sst/cats?categorias=ds_natureza_lesao&agregacao=distinct&ordenacao=ds_natureza_lesao&filtros=eq-cd_indica_obito-'S',and,eq-cd_uf-{0}"
      #         args:
      #           - named_prop: "idLocalidade"
      #       args:
      #         - prop: "id"
      #           named_prop: "ds_natureza_lesao"
      #         - prop: "label"
      #           named_prop: "ds_natureza_lesao"
      #           null_value: "(Não informado)"
      #       selection:
      #         event: "selection" 
      #         rules:
      #           filter: ",and,in-ds_natureza_lesao-{0}"
      #           api:
      #             args:
      #               - named_prop: "ds_natureza_lesao"
      #     - id: "select_partecorpo"
      #       type: "select"
      #       multiple: true
      #       label: "Parte do corpo atingida"
      #       api:
      #         template: "/sst/cats?categorias=ds_parte_corpo_atingida&agregacao=distinct&ordenacao=ds_parte_corpo_atingida&filtros=eq-cd_indica_obito-'S',and,eq-cd_uf-{0}"
      #         args:
      #           - named_prop: "idLocalidade"
      #       args:
      #         - prop: "id"
      #           named_prop: "ds_parte_corpo_atingida"
      #         - prop: "label"
      #           named_prop: "ds_parte_corpo_atingida"
      #           null_value: "(Não informado)"
      #       selection:
      #         event: "selection" 
      #         rules:
      #           filter: ",and,in-ds_parte_corpo_atingida-{0}"
      #           api:
      #             args:
      #               - named_prop: "ds_parte_corpo_atingida"
      #   chart_type: "BAR"
      #   api: 
      #     template: "/sst/cats?categorias=ano_cat&agregacao=COUNT&filtros=eq-cd_uf-{0},and,eq-cd_indica_obito-'S'"
      #     args:
      #       - named_prop: "idLocalidade"
      #     options:
      #         formatters:
      #           - id: "agr_count"
      #             format: 'inteiro'
      #   headers:
      #     - text: 'Ano'
      #       align: 'left'
      #       value: 'ano_cat'
      #     - text: 'Qtde'
      #       value: 'fmt_agr_count'
      #   chart_options:
      #     id: "ano_cat"
      #     y: "agr_count"
      #     x: "ano_cat"
      #     text: "fmt_agr_count"
      #     show_x_axis: true
      #     show_y_axis: false
      #     orientation: "vertical"
      #     color: "#238B45"
  # =====================================================
      - id: "bar_menores"
        title: 
          fixed: "Notificações de Acidentes de Trabalhadores Adolescentes"
        title_comment:
          template: "{0}, de {1} a {2}"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - base_object: "sst_cat"
              named_prop: "agr_min_ano_cat"
            - base_object: "sst_cat"
              named_prop: "agr_max_ano_cat"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              fixed: "Sem observações adicionais. Vide descrição"
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12'
                api:
                  template: "/sst/cats?categorias=1&agregacao=COUNT&filtros=eq-cd_uf-{0},and,lt-idade_cat-18,and,ne-idade_cat-0"
                  args:
                    - named_prop: "idLocalidade"
                args:
                  - prop: "value"
                    named_prop: 'agr_count'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: "Total de Notificações"
          - type: "text"
            title: ""
            content:
              template: "Em destaque, o número acumulado de notificações de acidentes de trabalho que vitimaram crianças e adolescentes na unidade geográfica selecionada, considerado o universo de trabalhadores com vínculo de emprego. No gráfico ao lado, apresenta-se a série histórica de {0} a {1}. Utilize os filtros abaixo para combinar as perspectivas."
              api: 
                template: "/sst/cats?categorias=1&valor=ano_cat&agregacao=MIN,MAX"
              args:
                - named_prop: "agr_min_ano_cat"
                - named_prop: "agr_max_ano_cat"
          - id: "select_cnae"
            type: "select"
            multiple: true
            label: "Setor Econômico"
            api:
              template: "/sst/cats?categorias=ds_cnae_classe_cat&agregacao=distinct&ordenacao=ds_cnae_classe_cat&filtros=lt-idade_cat-18,and,ne-idade_cat-0,and,eq-cd_uf-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: "id"
                named_prop: "ds_cnae_classe_cat"
              - prop: "label"
                named_prop: "ds_cnae_classe_cat"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-ds_cnae_classe_cat-{0}"
                api:
                  args:
                    - named_prop: "ds_cnae_classe_cat"
          - id: "select_grupo_agente"
            type: "select"
            multiple: true
            label: "Grupo de Agente Causador"
            api:
              template: "/sst/cats?categorias=ds_grupo_agcausadores_cat&agregacao=distinct&ordenacao=ds_grupo_agcausadores_cat&filtros=lt-idade_cat-18,and,ne-idade_cat-0,and,eq-cd_uf-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: "id"
                named_prop: "ds_grupo_agcausadores_cat"
              - prop: "label"
                named_prop: "ds_grupo_agcausadores_cat"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-ds_grupo_agcausadores_cat-{0}"
                api:
                  args:
                    - named_prop: "ds_grupo_agcausadores_cat"
          - id: "select_natureza"
            type: "select"
            multiple: true
            label: "Natureza da lesão"
            api:
              template: "/sst/cats?categorias=ds_natureza_lesao&agregacao=distinct&ordenacao=ds_natureza_lesao&filtros=lt-idade_cat-18,and,ne-idade_cat-0,and,eq-cd_uf-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: "id"
                named_prop: "ds_natureza_lesao"
              - prop: "label"
                named_prop: "ds_natureza_lesao"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-ds_natureza_lesao-{0}"
                api:
                  args:
                    - named_prop: "ds_natureza_lesao"
          - id: "select_partecorpo"
            type: "select"
            multiple: true
            label: "Parte do corpo atingida"
            api:
              template: "/sst/cats?categorias=ds_parte_corpo_atingida&agregacao=distinct&ordenacao=ds_parte_corpo_atingida&filtros=lt-idade_cat-18,and,ne-idade_cat-0,and,eq-cd_uf-{0}"
              args:
                - named_prop: "idLocalidade"
            args:
              - prop: "id"
                named_prop: "ds_parte_corpo_atingida"
              - prop: "label"
                named_prop: "ds_parte_corpo_atingida"
                null_value: "(Não informado)"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-ds_parte_corpo_atingida-{0}"
                api:
                  args:
                    - named_prop: "ds_parte_corpo_atingida"
        chart_type: "BAR"
        api: 
          template: "/sst/cats?categorias=ano_cat&agregacao=COUNT&filtros=eq-cd_uf-{0},and,lt-idade_cat-18,and,ne-idade_cat-0"
          args:
            - named_prop: "idLocalidade"
          options:
              formatters:
                - id: "agr_count"
                  format: 'inteiro'
        headers:
          - text: 'Ano'
            align: 'left'
            value: 'ano_cat'
          - text: 'Qtde'
            value: 'fmt_agr_count'
        chart_options:
          id: "ano_cat"
          y: "agr_count"
          x: "ano_cat"
          text: "fmt_agr_count"
          show_x_axis: true
          show_y_axis: false
          orientation: "vertical"
          color: "#238B45"
  # =====================================================
      - id: "calendar_acid"
        title: 
          fixed: "Temporalidade de Acidentes"
        title_comment:
          template: "{0}, de {1} a {2}"
          api: 
            template: "/sst/cats?categorias=1&valor=ano_cat&agregacao=MIN,MAX&filtros=ge-ano_cat-{0}"
            args:
              - function: "calc_subtraction"
                fn_args:
                  - base_object: "sst_cat"
                    named_prop: "agr_max_ano_cat"
                  - fixed: 2
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - named_prop: "agr_min_ano_cat"
            - named_prop: "agr_max_ano_cat"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              fixed: "Sem observações adicionais. Vide descrição"
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12 sm6'
                api:
                  template: "/sst/cats?categorias=st_dia_semana_acidente&agregacao=COUNT&filtros=ne-st_dia_semana_acidente-'sáb',and,ne-st_dia_semana_acidente-'dom',and,eq-cd_uf-{0},and,ge-ano_cat-{1},and,le-ano_cat-{2}&ordenacao=-agr_count&limit=1"
                  args:
                    - named_prop: "idLocalidade"
                    - function: "calc_subtraction"
                      fn_args:
                        - base_object: "sst_cat"
                          named_prop: "agr_max_ano_cat"
                        - fixed: 2
                    - base_object: "sst_cat"
                      named_prop: "agr_max_ano_cat"
                args:
                  - prop: "value"
                    function: "getWeekDay"
                    fn_args:
                      - named_prop: "st_dia_semana_acidente"
                  - prop: "description"
                    fixed: 'DIA COM MAIS CASOS DURANTE A SEMANA'
                  - prop: "comment"
                    named_prop: 'agr_count'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
              - relevance: 'high'
                cls: 'xs12 sm6'
                api:
                  template: "/sst/cats?categorias=st_dia_semana_acidente&agregacao=COUNT&filtros=in-st_dia_semana_acidente-'sáb'-'dom',and,eq-cd_uf-{0},and,ge-ano_cat-{1},and,le-ano_cat-{2}&ordenacao=-agr_count&limit=1"
                  args:
                    - named_prop: "idLocalidade"
                    - function: "calc_subtraction"
                      fn_args:
                        - base_object: "sst_cat"
                          named_prop: "agr_max_ano_cat"
                        - fixed: 2
                    - base_object: "sst_cat"
                      named_prop: "agr_max_ano_cat"
                args:
                  - prop: "value"
                    function: "getWeekDay"
                    fn_args:
                      - named_prop: "st_dia_semana_acidente"
                  - prop: "description"
                    fixed: 'DIA COM MAIS CASOS EM FINS DE SEMANA'
                  - prop: "comment"
                    named_prop: 'agr_count'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
              - relevance: 'low'
                cls: 'xs12'
                api:
                  template: "/sst/cats?categorias=st_acidente_feriado&agregacao=COUNT&filtros=ne-st_acidente_feriado-'',and,eq-cd_uf-{0},and,ge-ano_cat-{1},and,le-ano_cat-{2}&ordenacao=-agr_count&limit=1"
                  args:
                    - named_prop: "idLocalidade"
                    - function: "calc_subtraction"
                      fn_args:
                        - base_object: "sst_cat"
                          named_prop: "agr_max_ano_cat"
                        - fixed: 2
                    - base_object: "sst_cat"
                      named_prop: "agr_max_ano_cat"
                args:
                  - prop: "value"
                    named_prop: "st_acidente_feriado"
                  - prop: "description"
                    fixed: 'Feriado com mais ocorrëncias'
                  - prop: "comment"
                    named_prop: 'agr_count'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
          - type: "text"
            title: ""
            content:
              fixed: "Em destaque, os dias da semana e do fim de semana com mais notificações de acidentes de trabalho no último ano apurado para a unidade geográfica selecionada, considerado o universo de trabalhadores com vínculo de emprego. Apesar de o sábado ser tecnicamente dia útil não trabalhado, ele é considerado, aqui, como parte do fim de semana, para fins analíticos. No gráfico, para os últimos três anos, o calendário anual respectivo é apresentado. As cores variam do amarelo (menor frequência) para o vermelho (maior frequência)."
        chart_type: "CALENDAR"
        api: 
          template: "/sst/cats?categorias=dt_acidente&agregacao=COUNT&filtros=eq-cd_uf-{0},and,ge-ano_cat-{1},and,le-ano_cat-{2}"
          args:
            - named_prop: "idLocalidade"
            - function: "calc_subtraction"
              fn_args:
                - base_object: "sst_cat"
                  named_prop: "agr_max_ano_cat"
                - fixed: 2
            - base_object: "sst_cat"
              named_prop: "agr_max_ano_cat"
          options:
            recalc_min_max: true
            minmax_field: "agr_count"
            calcs:
              - id: "sever"
                function: "get_bipolar_scale"
                fn_args: 
                  - fixed: 'agr_count'
              - id: "fact_date"
                function: "formatDate" # TODO Criar a função
                fn_args:
                  - fixed: "dt_acidente"
        headers:
          - text: 'Data'
            align: 'left'
            value: 'dt_acidente'
          - text: 'Qtde'
            value: 'agr_count'
        chart_options:
          id: "ds_cbo"
          value_field: "agr_count"
          date_field: "calc_fact_date"
          scale_field: "calc_sever"
  # =====================================================
      - id: "cat_piramide_idade_sexo"
        title: 
          fixed: "Acidentes de trabalho por idade e sexo"
        title_comment:
          template: "{0}, de {1} a {2}"
          args:
            - base_object: "localidade"
              named_prop: "nm_localidade"
            - base_object: "sst_cat"
              named_prop: "agr_min_ano_cat"
            - base_object: "sst_cat"
              named_prop: "agr_max_ano_cat"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              fixed: "Sem observações adicionais. Vide descrição"
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12 sm6'
                api:
                  template: "/sst/cats/cut-idade_cat?categorias=idade_cat&agregacao=count&filtros=eq-cd_uf-{0},and,eq-cd_tipo_sexo_empregado_cat-'Feminino'&ordenacao=-agr_count"
                  args:
                    - named_prop: "idLocalidade"
                args:
                  - prop: "value"
                    named_prop: "cut"
                  - prop: "description"
                    fixed: 'ANOS DE IDADE<br/>FAIXA ETÁRIA MAIS FREQUENTE<br/>MULHERES'
                  - prop: "comment"
                    named_prop: 'agr_count'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
              - relevance: 'high'
                cls: 'xs12 sm6'
                api:
                  template: "/sst/cats/cut-idade_cat?categorias=idade_cat&agregacao=count&filtros=eq-cd_uf-{0},and,eq-cd_tipo_sexo_empregado_cat-'Masculino'&ordenacao=-agr_count"
                  args:
                    - named_prop: "idLocalidade"
                args:
                  - prop: "value"
                    named_prop: "cut"
                  - prop: "description"
                    fixed: 'ANOS DE IDADE<br/>FAIXA ETÁRIA MAIS FREQUENTE<br/>HOMENS'
                  - prop: "comment"
                    named_prop: 'agr_count'
                    format: 'inteiro'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
          - type: "text"
            title: ""
            content:
              fixed: "Em destaque, a faixa etária com mais notificações de acidentes de trabalho no último ano apurado para a unidade geográfica selecionada para homens e mulheres, considerado o universo de trabalhadores com vínculo de emprego. No gráfico, a pirâmide é apresentada com as faixas etárias e o sexo. Utilize os filtros abaixo para combinar as perspectivas."
          - id: "slider_ano"
            type: "slider"
            range: true
            api: 
              fixed: "/sst/indicadoresnacionais?categorias=1&valor=nu_competencia&agregacao=min,max&filtros=eq-cd_indicador-'sst_cat_total'"
            args:
              - prop: "min"
                named_prop: "agr_min_nu_competencia"
              - prop: "max"
                named_prop: "agr_max_nu_competencia"
            selection:
              event: "selection"
              rules:
                filter: ",and,ge-ano_cat-{0},and,le-ano_cat-{1}"
                api:
                  args:
                    - named_prop: "value_min"
                    - named_prop: "value_max"
        footnote: 
          template: "Acidentes de trabalho por idade e sexo ({0}-{1})"
          args:
            - base_object: "sst_cat"
              named_prop: "agr_min_ano_cat"
            - base_object: "sst_cat"
              named_prop: "agr_max_ano_cat"
        chart_type: "BAR"
        api: 
          template: "/sst/cats?categorias=idade_cat,cd_tipo_sexo_empregado_cat&agregacao=count&filtros=eq-cd_uf-{0},and,ne-cd_tipo_sexo_empregado_cat-'Não informado',and,ne-idade_cat-0"
          args:
            - named_prop: "idLocalidade"
          options:
            calcs:
              - id: 'agr_count'
                function: 'oppose'
                fn_args:
                  - fixed: 'cd_tipo_sexo_empregado_cat'
                  - fixed: 'Feminino'
                  - fixed: 'agr_count'
              - id: 'agr_count_abs'
                function: 'absolute'
                fn_args:
                  - fixed: 'calc_agr_count'
              - id: 'faixa_etaria'
                function: 'get_faixa_etaria'
                fn_args:
                  - fixed: 'idade_cat'
              - id: 'faixa_etaria_bin'
                function: 'get_bin_faixa_etaria'
                fn_args:
                  - fixed: 'idade_cat'
        headers:
          - text: 'Sexo'
            align: 'left'
            value: 'cd_tipo_sexo_empregado_cat'
          - text: 'Faixa etária'
            align: 'left'
            value: 'calc_faixa_etaria'
          - text: 'Qtde'
            value: 'calc_agr_count_abs'
        chart_options:
          id: "cd_tipo_sexo_empregado_cat"
          x: "calc_agr_count"
          y: "calc_faixa_etaria_bin"
          text: "calc_faixa_etaria"
          orientation: "horizontal"
          hide_legend: false
          legend_field: "cd_tipo_sexo_empregado_cat"
          stacked: true
          show_x_axis: false
