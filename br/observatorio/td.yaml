title_sup: "Observatório do"
title: "Trabalho Decente"
title_sub: "nos Municípios Brasileiros"
subtitle: "ENTENDA, COMPARE, ACESSE OS DADOS, PARTICIPE"
map_image: "td.jpg"
background_images: ["td.jpg"]
theme:
  toolbar:
    title: "Smartlab - Observatório do Trabalho Decente"
ranking_cards:
        - title: "Municipios com Maiores Saldos Positivos "
          cls: "xs12 sm6 pa-3"
          api: 
            - fixed: "/thematic/cagedtermometro?categorias=cd_municipio_ibge_dv,nm_municipio_uf&valor=admitidos,desligados&agregacao=sum,sum&ordenacao=-(sum(admitidos)-sum(desligados))&limit=10&filtros=eq-termometro_grupo-'cnae_classe',and,eq-competencia_mov-max_competencia,and,nn-cd_municipio_ibge_dv"
              options:
                calcs:
                  - id: "saldo"
                    function: "calc_subtraction_ds"
                    fn_args:
                      - fixed: "agr_sum_admitidos"
                      - fixed: "agr_sum_desligados"
                  - id: "criados"
                    function: "applyInterpolReplaceDatasetParam"
                    fn_args:
                      - fixed: 
                          template: "{0} novos postos"
                          args:
                            - named_prop: "calc_saldo"
                              format: "inteiro"
          args:
            - prop: 'localidade'
              named_prop: "nm_municipio_uf"
            - prop: 'vl_indicador'
              named_prop: "calc_criados"
        - title: "Municípios com Maiores Saldos Negativos "
          cls: "xs12 sm6 pa-3"
          api: 
            - fixed: "/thematic/cagedtermometro?categorias=cd_municipio_ibge_dv,nm_municipio_uf&valor=admitidos,desligados&agregacao=sum,sum&ordenacao=(sum(admitidos)-sum(desligados))&limit=10&filtros=eq-termometro_grupo-'cnae_classe',and,eq-competencia_mov-max_competencia,and,nn-cd_municipio_ibge_dv"
              options:
                calcs:
                  - id: "saldo"
                    function: "calc_subtraction_ds"
                    fn_args:
                      - fixed: "agr_sum_admitidos"
                      - fixed: "agr_sum_desligados"
                  - id: "perdidos"
                    function: "applyInterpolReplaceDatasetParam"
                    fn_args:
                      - fixed: 
                          template: "{0} postos perdidos"
                          args:
                            - named_prop: "calc_saldo"
                              format: "inteiro"
          args:
            - prop: 'localidade'
              named_prop: "nm_municipio_uf"
            - prop: 'vl_indicador'
              named_prop: "calc_perdidos"
  # - title: "Ocupações com Maior Número de Admissões"
  #   cls: "xs12"
  #   api: 
  #     - fixed: "/thematic/cagedtermometro?categorias=termometro_codigo,termometro_descricao&valor=admitidos&agregacao=sum&ordenacao=-sum(admitidos)&limit=10&filtros=eq-termometro_grupo-'cbo_uf',and,eq-competencia_mov-max_competencia"
  #       options:
  #         calcs:
  #           - id: "admitidos"
  #             function: "applyInterpolReplaceDatasetParam"
  #             fn_args:
  #               - fixed: 
  #                   template: "{0} admitidos"
  #                   args:
  #                     - named_prop: "agr_sum_admitidos"
  #                       format: "inteiro"
  #   args:
  #     - prop: 'localidade'
  #       named_prop: "termometro_descricao"
  #     - prop: 'vl_indicador'
  #       named_prop: "calc_admitidos"
  # - title: "Ocupações com Maior Número de Desligados"
  #   cls: "xs12"
  #   api: 
  #     - fixed: "/thematic/cagedtermometro?categorias=termometro_codigo,termometro_descricao&valor=desligados&agregacao=sum&ordenacao=-sum(desligados)&limit=10&filtros=eq-termometro_grupo-'cbo_uf',and,eq-competencia_mov-max_competencia"
  #       options:
  #         calcs:
  #           - id: "desligados"
  #             function: "applyInterpolReplaceDatasetParam"
  #             fn_args:
  #               - fixed: 
  #                   template: "{0} desligados"
  #                   args:
  #                     - named_prop: "agr_sum_desligados"
  #                       format: "inteiro"
  #   args:
  #     - prop: 'localidade'
  #       named_prop: "termometro_descricao"
  #     - prop: 'vl_indicador'
  #       named_prop: "calc_desligados"
prevalencia:
  id: "mapa_prev_brasil"
  main_title: 
    - id: "main_title"
      type: "text"
      class: "px-0 pt-0 pb-2"
      content:
        cls: "headline-obs text-xs-center"
        template: "TERMÔMETRO DO MERCADO DE TRABALHO FORMAL CELETISTA NO BRASIL - {0}"
        api:
          fixed: "/thematic/cagedtermometro?categorias=max_competencia&limit=1"
          options:
            calcs:
              - id: "max_competencia"
                function: "format_quarter_ds"
                fn_args:
                  - named_prop: "max_competencia"
        args:
          - named_prop: "calc_max_competencia"
  title: 
    fixed: "Dinâmica do Emprego Formal Celetista"
  title_comment:
    template: "{0}"
    api:
      fixed: "/thematic/cagedtermometro?categorias=max_competencia&limit=1"
      options:
        calcs:
          - id: "max_competencia"
            function: "format_quarter_ds"
            fn_args:
              - named_prop: "max_competencia"

    args:
      - named_prop: "calc_max_competencia"
  # info:
  #   - type: "text"
  #     title: "Sobre"
  #     content:
  #       fixed: ""
  chart_type: "MAP_BUBBLES"
  api:
    - fixed: "/thematic/cagedtermometro?categorias=competencia_mov,'positivo'-cd_indicador,latitude,longitude,cd_municipio_ibge_dv,nm_municipio_uf&valor=saldo_municipio&agregacao=MAX&calcs=ln_norm_pos_part&partition=competencia_mov&filtros=eq-competencia_mov-max_competencia,and,eq-termometro_grupo-'cbo',and,gt-saldo_municipio-0"
    - fixed: "/thematic/cagedtermometro?categorias=competencia_mov,'negativo'-cd_indicador,latitude,longitude,cd_municipio_ibge_dv,nm_municipio_uf&valor=saldo_absoluto_municipio&agregacao=MAX&calcs=ln_norm_pos_part&partition=competencia_mov&filtros=eq-competencia_mov-max_competencia,and,eq-termometro_grupo-'cbo',and,lt-saldo_municipio-0"
  apiBase:
    - fixed: "/thematic/cagedtermometro?categorias=competencia_mov,'positivo'-cd_indicador,latitude,longitude,cd_municipio_ibge_dv,nm_municipio_uf&valor=saldo_municipio&agregacao=MAX&calcs=ln_norm_pos_part&partition=competencia_mov&filtros=eq-termometro_grupo-'cbo',and,gt-saldo_municipio-0"
    - fixed: "/thematic/cagedtermometro?categorias=competencia_mov,'negativo'-cd_indicador,latitude,longitude,cd_municipio_ibge_dv,nm_municipio_uf&valor=saldo_absoluto_municipio&agregacao=MAX&calcs=ln_norm_pos_part&partition=competencia_mov&filtros=eq-termometro_grupo-'cbo',and,lt-saldo_municipio-0"
  chart_options:
    colorArray: ["rgba(179, 9, 0, 0.7)", "rgba(21, 101, 192, 0.7)"]
    indicadores: ["negativo","positivo"]
    lat: 'latitude'
    long: 'longitude'
    tooltip_function: 'obsTDTooltip'
    clickable: true
    height_proportion: 1
    radius:
      base: 10000
      multiplier: 400000
    tiles_url: "https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}"
    tiles_attribution: "Tiles &copy; Esri &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012"
  source:
    desc: "Setrab/ME"
    link: ""
  description:
    - id: "selectlayer"
      type: "switch-group"
      switches:
        - id: "negativo"
          cls: "xs12 pb-2"
          default: true
          color: "red"
          label: "SALDO NEGATIVO"
        - id: "positivo"
          cls: "xs12"
          default: true
          color: "light-blue"
          label: "SALDO POSITIVO"
      event: 'selection'
    - type: "text"
      cls: "ma-0 pa-0"
      content:
        cls: "pa-0"
        fixed: "No mapa, visualiza-se um termômetro do mercado de trabalho formal celetista no Brasil no último trimestre disponível de informações do Cadastro Geral de Empregados e Desempregados (CAGED), do Ministério da Economia. O tamanho das bolhas representa o saldo resultante das admissões subtraídas as demissões durante esse trimestre. As informações sobre a demanda por postos de trabalho, com detalhamento de ocupações, são de extrema relevância não apenas para a definição de políticas de emprego e renda, mas também para investimento em programas de capacitação de pessoas vulneráveis em diferentes localidades, de acordo com o comportamento da atividade econômica e do mercado de trabalho. Em razão disso, pode-se visualizar, também, o comportamento do % do VAB da Administração Pública no VAB Total  na localidade e o total de pessoas em famílias beneficiárias do Programa Bolsa Família e o valor médio mensal recebido por estas famílias incluindo o Programa Auxílio Emergencial no ano de 2020. Essas informações são relevantes, inclusive, para o exame das consequências econômicas e sociais da pandemia COVID-19 e planejamento de medidas de resposta à crise e de promoção do Trabalho Decente."
    - id: "ranking_list_setores"
      type: "ranking_list"
      sectionClass: "pb-2 pl-2"
      rankings:
        - title: "Setores com Maiores Saldos Positivos"
          cls: "xs12"
          api: 
            - fixed: "/thematic/cagedtermometro?categorias=termometro_codigo,termometro_descricao&valor=admitidos,desligados&agregacao=sum,sum&ordenacao=-(sum(admitidos)-sum(desligados))&limit=5&filtros=eq-termometro_grupo-'cnae_classe_uf',and,eq-competencia_mov-max_competencia,and,nk-termometro_descricao-'CNAE NÃO IDENTIFICADO%25'"
              options:
                calcs:
                  - id: "saldo"
                    function: "calc_subtraction_ds"
                    fn_args:
                      - fixed: "agr_sum_admitidos"
                      - fixed: "agr_sum_desligados"
                  - id: "criados"
                    function: "applyInterpolReplaceDatasetParam"
                    fn_args:
                      - fixed: 
                          template: "<br/>&nbsp;&nbsp;&nbsp;&nbsp;{0} novos postos"
                          args:
                            - named_prop: "calc_saldo"
                              format: "inteiro"
          args:
            - prop: 'localidade'
              named_prop: "termometro_descricao"
            - prop: 'vl_indicador'
              named_prop: "calc_criados"
        - title: "Setores com Maiores Saldos Negativos "
          cls: "xs12"
          api: 
            - fixed: "/thematic/cagedtermometro?categorias=termometro_codigo,termometro_descricao&valor=admitidos,desligados&agregacao=sum,sum&ordenacao=sum(admitidos)-sum(desligados)&limit=5&filtros=eq-termometro_grupo-'cnae_classe_uf',and,eq-competencia_mov-max_competencia,and,nk-termometro_descricao-'CNAE NÃO IDENTIFICADO%25'"
              options:
                calcs:
                  - id: "saldo"
                    function: "calc_subtraction_ds"
                    fn_args:
                      - fixed: "agr_sum_admitidos"
                      - fixed: "agr_sum_desligados"
                  - id: "perdidos"
                    function: "applyInterpolReplaceDatasetParam"
                    fn_args:
                      - fixed: 
                          template: "<br/>&nbsp;&nbsp;&nbsp;&nbsp;{0} postos perdidos"
                          args:
                            - named_prop: "calc_saldo"
                              format: "inteiro"
          args:
            - prop: 'localidade'
              named_prop: "termometro_descricao"
            - prop: 'vl_indicador'
              named_prop: "calc_perdidos"

  description_right:
    - id: "minicards_right"
      class: "pr-0 pl-0 pb-0 pt-0"
      type: "minicards"
      sectionClass: "pb-0"
      cards:
        - relevance: "high"
          cls: "xs12 lg6 text-xs-center "
          color: "light-blue pa-3"
          api: 
            - fixed: "/thematic/cagedtermometro?categorias=competencia_mov&valor=admitidos&agregacao=sum&filtros=eq-termometro_grupo-'cbo_uf',and,eq-competencia_mov-max_competencia"
              options:
                calcs:
                  - id: "mes_competencia"
                    function: "format_quarter_ds"
                    fn_args:
                      - named_prop: "competencia_mov"
          args:
            - prop: "value"
              named_prop: "agr_sum_admitidos"
              format: "inteiro"
              collapse:
                format: 'real'
                precision: 1
            - prop: "description"
              template: "CONTRATOS INICIADOS*<br/>({0})"
              args:
                - named_prop: "calc_mes_competencia"
        # - relevance: "high"
        #   cls: "xs12 lg6 text-xs-center "
        #   color: "light-blue pa-3"
        #   api: 
        #     - fixed: "/thematic/cagedtermometro?categorias=competencia_mov&valor=saldo&agregacao=sum&filtros=eq-termometro_grupo-'cbo_uf',and,eq-competencia_mov-max_competencia,and,gt-saldo-0"
        #       options:
        #         calcs:
        #           - id: "mes_competencia"
        #             function: "format_quarter_ds"
        #             fn_args:
        #               - named_prop: "competencia_mov"
        #   args:
        #     - prop: "value"
        #       named_prop: "agr_sum_saldo"
        #       format: "inteiro"
        #       collapse:
        #         format: 'real'
        #         precision: 1
        #     - prop: "description"
        #       template: "Empregos Formais criados<br/>({0})"
        #       args:
        #         - named_prop: "calc_mes_competencia"
        - relevance: "high"
          cls: "xs12 lg6 text-xs-center "
          color: "red pa-3"
          api: 
            - fixed: "/thematic/cagedtermometro?categorias=competencia_mov&valor=desligados&agregacao=sum&filtros=eq-termometro_grupo-'cbo_uf',and,eq-competencia_mov-max_competencia"
              options:
                calcs:
                  - id: "mes_competencia"
                    function: "format_quarter_ds"
                    fn_args:
                      - named_prop: "competencia_mov"
          args:
            - prop: "value"
              named_prop: "agr_sum_desligados"
              format: "inteiro"
              collapse:
                format: 'real'
                precision: 1
            - prop: "description"
              template: "CONTRATOS ENCERRADOS**<br/>({0})"
              args:
                - named_prop: "calc_mes_competencia"
        # - relevance: "high"
        #   cls: "xs12 lg6 text-xs-center "
        #   color: "red pa-3"
        #   api: 
        #     - fixed: "/thematic/cagedtermometro?categorias=competencia_mov&valor=saldo_absoluto&agregacao=sum&filtros=eq-termometro_grupo-'cbo_uf',and,eq-competencia_mov-max_competencia,and,lt-saldo-0"
        #       options:
        #         calcs:
        #           - id: "mes_competencia"
        #             function: "format_quarter_ds"
        #             fn_args:
        #               - named_prop: "competencia_mov"
        #   args:
        #     - prop: "value"
        #       named_prop: "agr_sum_saldo_absoluto"
        #       format: "inteiro"
        #       collapse:
        #         format: 'real'
        #         precision: 1
        #     - prop: "description"
        #       template: "Empregos Formais perdidos<br/>({0})"
        #       args:
        #         - named_prop: "calc_mes_competencia"
        - relevance: "high"
          cls: "xs12 text-xs-center "
          color: "orange pa-3"
          api: 
            fixed: "/thematic/cagedtermometro?categorias=competencia_mov&valor=admitidos,desligados&agregacao=sum,sum&filtros=eq-termometro_grupo-'cbo_uf',and,eq-competencia_mov-max_competencia"
            options:
              calcs:
                - id: "mes_competencia"
                  function: "format_quarter_ds"
                  fn_args:
                    - named_prop: "competencia_mov"
                - id: "saldo"
                  function: "calc_subtraction_ds"
                  fn_args:
                    - fixed: "agr_sum_admitidos"
                    - fixed: "agr_sum_desligados"
          args:
            - prop: "value"
              named_prop: "calc_saldo"
              format: "inteiro"
              collapse:
                format: 'real'
                precision: 1
            - prop: "description"
              template: "SALDO DE EMPREGOS FORMAIS CELETISTAS***<br/>({0})"
              args:
                - named_prop: "calc_mes_competencia"
    - type: "text"
      class: "pr-0 pl-0 py-0 pt-0"
      content:
        cls: "pl-2 py-0 pb-0"
        # api:
        #   fixed: "/thematic/cagedtermometro?categorias=max_competencia&limit=1"
        #   options:
        #     calcs:
        #       - id: "max_competencia"
        #         function: "format_quarter_ds"
        #         fn_args:
        #           - named_prop: "max_competencia"

        fixed: "
          * Quantidade de admissões calculadas no último trimestre disponível do CAGED.<br/>
          ** Quantidade de desligamentos calculados no último trimestre disponível do CAGED.<br/>
          *** O saldo é calculado pela subtração entre o total de contratos de admissão e o total de contratos desligados, o que pode resultar em valor positivo (no mapa, em azul) ou negativo (no mapa, em vermelho)."
        # args:
        #   - named_prop: "calc_max_competencia"
    - id: "ranking_list_cbo"
      type: "ranking_list"
      sectionClass: "pb-2 pl-2"
      rankings:
        - title: "Ocupações com Maiores Saldos Positivos "
          cls: "xs12"
          api: 
            - fixed: "/thematic/cagedtermometro?categorias=termometro_codigo,termometro_descricao&valor=admitidos,desligados&agregacao=sum,sum&ordenacao=-(sum(admitidos)-sum(desligados))&limit=10&filtros=eq-termometro_grupo-'cbo_uf',and,eq-competencia_mov-max_competencia"
              options:
                calcs:
                  - id: "saldo"
                    function: "calc_subtraction_ds"
                    fn_args:
                      - fixed: "agr_sum_admitidos"
                      - fixed: "agr_sum_desligados"
                  - id: "criados"
                    function: "applyInterpolReplaceDatasetParam"
                    fn_args:
                      - fixed: 
                          template: "{0} novos postos"
                          args:
                            - named_prop: "calc_saldo"
                              format: "inteiro"
          args:
            - prop: 'localidade'
              named_prop: "termometro_descricao"
            - prop: 'vl_indicador'
              named_prop: "calc_criados"
        - title: "Ocupações com Maiores Saldos Negativos "
          cls: "xs12"
          api: 
            - fixed: "/thematic/cagedtermometro?categorias=termometro_codigo,termometro_descricao&valor=admitidos,desligados&agregacao=sum,sum&ordenacao=sum(admitidos)-sum(desligados)&limit=10&filtros=eq-termometro_grupo-'cbo_uf',and,eq-competencia_mov-max_competencia"
              options:
                calcs:
                  - id: "saldo"
                    function: "calc_subtraction_ds"
                    fn_args:
                      - fixed: "agr_sum_admitidos"
                      - fixed: "agr_sum_desligados"
                  - id: "perdidos"
                    function: "applyInterpolReplaceDatasetParam"
                    fn_args:
                      - fixed: 
                          template: "{0} postos perdidos"
                          args:
                            - named_prop: "calc_saldo"
                              format: "inteiro"
          args:
            - prop: 'localidade'
              named_prop: "termometro_descricao"
            - prop: 'vl_indicador'
              named_prop: "calc_perdidos"
    # - id: "ranking_list_atividade"
    #   type: "ranking_list"
    #   sectionClass: "pb-2 pl-2"
    #   rankings:
    #     - title: "Setores com Maior Número de Admissões"
    #       cls: "xs12"
    #       api: 
    #         - fixed: "/thematic/cagedtermometro?categorias=termometro_codigo,termometro_descricao&valor=admitidos&agregacao=sum&ordenacao=-sum(admitidos)&limit=5&filtros=eq-termometro_grupo-'cnae_classe_uf',and,eq-competencia_mov-max_competencia,and,nk-termometro_descricao-'CNAE NÃO IDENTIFICADO%25'"
    #           options:
    #             calcs:
    #               - id: "admitidos"
    #                 function: "applyInterpolReplaceDatasetParam"
    #                 fn_args:
    #                   - fixed: 
    #                       template: "<br/>&nbsp;&nbsp;&nbsp;&nbsp;{0} admitidos"
    #                       args:
    #                         - named_prop: "agr_sum_admitidos"
    #                           format: "inteiro"
    #       args:
    #         - prop: 'localidade'
    #           named_prop: "termometro_descricao"
    #         - prop: 'vl_indicador'
    #           named_prop: "calc_admitidos"
    #     - title: "Setores com Maior Número de Desligados"
    #       cls: "xs12"
    #       api: 
    #         - fixed: "/thematic/cagedtermometro?categorias=termometro_codigo,termometro_descricao&valor=desligados&agregacao=sum&ordenacao=-sum(desligados)&limit=5&filtros=eq-termometro_grupo-'cnae_classe_uf',and,eq-competencia_mov-max_competencia,and,nk-termometro_descricao-'CNAE NÃO IDENTIFICADO%25'"
    #           options:
    #             calcs:
    #               - id: "desligados"
    #                 function: "applyInterpolReplaceDatasetParam"
    #                 fn_args:
    #                   - fixed: 
    #                       template: "<br/>&nbsp;&nbsp;&nbsp;&nbsp;{0} desligados"
    #                       args:
    #                         - named_prop: "agr_sum_desligados"
    #                           format: "inteiro"
    #       args:
    #         - prop: 'localidade'
    #           named_prop: "termometro_descricao"
    #         - prop: 'vl_indicador'
    #           named_prop: "calc_desligados"
  mapa_filtros:
    - id: "selectlayer"
      type: "switch-group"
      switches:
        - id: "negativo"
          cls: "xs12 pb-2"
          default: true
          color: "red"
          label: "SALDO NEGATIVO"
        - id: "positivo"
          cls: "xs12"
          default: true
          color: "light-blue"
          label: "SALDO POSITIVO"
      event: 'selection'
    - id: "select_uf"
      type: "select"
      label: "UF"
      title: "Unidade Federativa"
      api:
        fixed: "/municipios?categorias=cd_uf,nm_uf&agregacao=distinct&ordenacao=nm_uf"
      args:
        - prop: "id"
          named_prop: "cd_uf"
        - prop: "label"
          named_prop: "nm_uf"
      selection:
        event: "selection"
        rules:
          filter: ",and,eq-cd_uf-{0}"
          api:
            args:
              - named_prop: "cd_uf"
    - id: "select_competencia"
      type: "select"
      clearable: false
      # default: 
      #   fixed: '202008'
      label: "Competência"
      api:
        fixed: "/thematic/cagedtermometro?categorias=competencia_mov&agregacao=DISTINCT&ordenacao=-competencia_mov&filtros=eq-termometro_grupo-'cbo',and,ge-competencia_mov-201901,and,le-competencia_mov-max_competencia"
        options:
          calcs:
            - id: "mes_formatado"
              function: "format_quarter_ds"
              fn_args:
                - named_prop: "competencia_mov"
      args:
        - prop: "id"
          named_prop: "competencia_mov"
        - prop: "label"
          named_prop: "calc_mes_formatado"
          # null_value: "(Não informado)"
      selection:
        event: "selection" 
        rules:
          filter: ",and,eq-competencia_mov-{0}"
          api:
            args:
              - named_prop: "competencia_mov"
    - type: "text"
      cls: "ma-0 pa-0"
      content:
        cls: "pa-0"
        fixed: "No mapa ao lado, visualiza-se um termômetro do mercado de trabalho formal no Brasil com base em informações organizadas de acordo com o último trimestre disponível de informações do Cadastro Geral de Empregados e Desempregados (CAGED). Em grande parte dos municípios brasileiros, os indicadores de trabalho formal são muito desfavoráveis. As informações sobre a demanda por postos de trabalho, com detalhamento de ocupações, são de extrema relevância não apenas para a definição de políticas de emprego e renda, mas também para investimento em programas de capacitação de pessoas vulneráveis em diferentes localidades, de acordo com o comportamento da atividade econômica e do mercado de trabalho. Em razão disso, pode-se visualizar, também, o comportamento do PIB per capita na localidade e a quantidade de pessoas que vivem em situação de pobreza ou extrema pobreza. Essas informações são relevantes, inclusive, para o exame das consequências econômicas e sociais da pandemia COVID-19."
    # - id: "ranking_list_saldo"
    #   type: "ranking_list"
    #   rankings:
    #     - title: "Saldo de Postos Formais por Setores Econômicos"
    #       cls: "xs12"
    #       reactive: true
    #       api: 
    #         - fixed: "/thematic/cagedtermometro?categorias=termometro_codigo,termometro_descricao&valor=admitidos,desligados&agregacao=sum,sum&ordenacao=(sum(admitidos)-sum(desligados))&filtros=eq-termometro_grupo-'cnae_secao_uf',and,eq-competencia_mov-max_competencia"
    #           options:
    #             calcs:
    #               - id: "saldo"
    #                 function: "calc_subtraction_ds"
    #                 fn_args:
    #                   - fixed: "agr_sum_admitidos"
    #                   - fixed: "agr_sum_desligados"
    #       apiBase: 
    #         - fixed: "/thematic/cagedtermometro?categorias=termometro_codigo,termometro_descricao&valor=admitidos,desligados&agregacao=sum,sum&ordenacao=(sum(admitidos)-sum(desligados))&filtros=eq-termometro_grupo-'cnae_secao_uf'"
    #           options:
    #             calcs:
    #               - id: "saldo"
    #                 function: "calc_subtraction_ds"
    #                 fn_args:
    #                   - fixed: "agr_sum_admitidos"
    #                   - fixed: "agr_sum_desligados"
    #       args:
    #         - prop: 'localidade'
    #           named_prop: "termometro_descricao"
    #         - prop: 'vl_indicador'
    #           named_prop: "calc_saldo"
    #           format: "inteiro"
  mapa_description_right:
    - id: "minicards_right"
      class: "pr-0 pl-2 pb-0 pt-0"
      type: "minicards"
      sectionClass: "pb-0"
      cards:
        - relevance: "high"
          cls: "xs12 lg6 text-xs-center "
          color: "light-blue pa-3"
          reactive: true
          api: 
            fixed: "/thematic/cagedtermometro?categorias=competencia_mov&valor=admitidos&agregacao=sum&filtros=eq-termometro_grupo-'cbo_uf',and,eq-competencia_mov-max_competencia"
            options:
              calcs:
                - id: "mes_competencia"
                  function: "format_quarter_ds"
                  fn_args:
                    - named_prop: "competencia_mov"
          apiBase: 
            fixed: "/thematic/cagedtermometro?categorias=competencia_mov&valor=admitidos&agregacao=sum&filtros=eq-termometro_grupo-'cbo_uf'"
            options:
              calcs:
                - id: "mes_competencia"
                  function: "format_quarter_ds"
                  fn_args:
                    - named_prop: "competencia_mov"
          args:
            - prop: "value"
              named_prop: "agr_sum_admitidos"
              format: "inteiro"
              collapse:
                format: 'real'
                precision: 1
            - prop: "description"
              template: "CONTRATOS INICIADOS*<br/>({0})"
              args:
                - named_prop: "calc_mes_competencia"
        # - relevance: "high"
        #   cls: "xs12 lg6 text-xs-center "
        #   color: "light-blue pa-3"
        #   reactive: true
        #   api: 
        #     fixed: "/thematic/cagedtermometro?categorias=competencia_mov&valor=saldo&agregacao=sum&filtros=eq-termometro_grupo-'cbo_uf',and,eq-competencia_mov-max_competencia,and,gt-saldo-0"
        #     options:
        #       calcs:
        #         - id: "mes_competencia"
        #           function: "format_quarter_ds"
        #           fn_args:
        #             - named_prop: "competencia_mov"
        #   apiBase: 
        #     fixed: "/thematic/cagedtermometro?categorias=competencia_mov&valor=saldo&agregacao=sum&filtros=eq-termometro_grupo-'cbo_uf',and,gt-saldo-0"
        #     options:
        #       calcs:
        #         - id: "mes_competencia"
        #           function: "format_quarter_ds"
        #           fn_args:
        #             - named_prop: "competencia_mov"
        #   args:
        #     - prop: "value"
        #       named_prop: "agr_sum_saldo"
        #       format: "inteiro"
        #       collapse:
        #         format: 'real'
        #         precision: 1
        #     - prop: "description"
        #       template: "Empregos Formais criados<br/>({0})"
        #       args:
        #         - named_prop: "calc_mes_competencia"
        - relevance: "high"
          cls: "xs12 lg6 text-xs-center "
          color: "red pa-3"
          reactive: true
          api: 
            fixed: "/thematic/cagedtermometro?categorias=competencia_mov&valor=desligados&agregacao=sum&filtros=eq-termometro_grupo-'cbo_uf',and,eq-competencia_mov-max_competencia"
            options:
              calcs:
                - id: "mes_competencia"
                  function: "format_quarter_ds"
                  fn_args:
                    - named_prop: "competencia_mov"
          apiBase: 
            fixed: "/thematic/cagedtermometro?categorias=competencia_mov&valor=desligados&agregacao=sum&filtros=eq-termometro_grupo-'cbo_uf'"
            options:
              calcs:
                - id: "mes_competencia"
                  function: "format_quarter_ds"
                  fn_args:
                    - named_prop: "competencia_mov"
          args:
            - prop: "value"
              named_prop: "agr_sum_desligados"
              format: "inteiro"
              collapse:
                format: 'real'
                precision: 1
            - prop: "description"
              template: "CONTRATOS ENCERRADOS**<br/>({0})"
              args:
                - named_prop: "calc_mes_competencia"
        # - relevance: "high"
        #   cls: "xs12 lg6 text-xs-center "
        #   color: "red pa-3"
        #   reactive: true
        #   api: 
        #     fixed: "/thematic/cagedtermometro?categorias=competencia_mov&valor=saldo_absoluto&agregacao=sum&filtros=eq-termometro_grupo-'cbo_uf',and,eq-competencia_mov-max_competencia,and,lt-saldo-0"
        #     options:
        #       calcs:
        #         - id: "mes_competencia"
        #           function: "format_quarter_ds"
        #           fn_args:
        #             - named_prop: "competencia_mov"
        #   apiBase: 
        #     fixed: "/thematic/cagedtermometro?categorias=competencia_mov&valor=saldo_absoluto&agregacao=sum&filtros=eq-termometro_grupo-'cbo_uf',and,lt-saldo-0"
        #     options:
        #       calcs:
        #         - id: "mes_competencia"
        #           function: "format_quarter_ds"
        #           fn_args:
        #             - named_prop: "competencia_mov"
        #   args:
        #     - prop: "value"
        #       named_prop: "agr_sum_saldo_absoluto"
        #       format: "inteiro"
        #       collapse:
        #         format: 'real'
        #         precision: 1
        #     - prop: "description"
        #       template: "Empregos Formais perdidos<br/>({0})"
        #       args:
        #         - named_prop: "calc_mes_competencia"
        - relevance: "high"
          cls: "xs12 text-xs-center "
          color: "orange pa-3"
          reactive: true
          api: 
            fixed: "/thematic/cagedtermometro?categorias=competencia_mov&valor=admitidos,desligados&agregacao=sum,sum&filtros=eq-termometro_grupo-'cbo_uf',and,eq-competencia_mov-max_competencia"
            options:
              calcs:
                - id: "mes_competencia"
                  function: "format_quarter_ds"
                  fn_args:
                    - named_prop: "competencia_mov"
                - id: "saldo"
                  function: "calc_subtraction_ds"
                  fn_args:
                    - fixed: "agr_sum_admitidos"
                    - fixed: "agr_sum_desligados"
          apiBase: 
            fixed: "/thematic/cagedtermometro?categorias=competencia_mov&valor=admitidos,desligados&agregacao=sum,sum&filtros=eq-termometro_grupo-'cbo_uf'"
            options:
              calcs:
                - id: "mes_competencia"
                  function: "format_quarter_ds"
                  fn_args:
                    - named_prop: "competencia_mov"
                - id: "saldo"
                  function: "calc_subtraction_ds"
                  fn_args:
                    - fixed: "agr_sum_admitidos"
                    - fixed: "agr_sum_desligados"
          args:
            - prop: "value"
              named_prop: "calc_saldo"
              format: "inteiro"
              collapse:
                format: 'real'
                precision: 1
            - prop: "description"
              template: "SALDO DE EMPREGOS FORMAIS CELETISTAS***<br/>({0})"
              args:
                - named_prop: "calc_mes_competencia"
    - type: "text"
      class: "pr-0 pl-0 py-0 pt-0"
      content:
        cls: "pl-2 py-0 pb-0"
        fixed: "
          * Quantidade de admissões calculadas no último trimestre disponível do CAGED.<br/>
          ** Quantidade de desligamentos calculados no último trimestre disponível do CAGED.<br/>
          *** O saldo é calculado pela subtração entre o total de contratos de admissão e o total de contratos desligados, o que pode resultar em valor positivo (no mapa, em azul) ou negativo (no mapa, em vermelho)."
    - id: "ranking_list_caged"
      type: "ranking_list"
      rankings:
        - title: "Setores com Maiores Saldos Positivos"
          cls: "xs12 px-3 pb-0"
          reactive: true
          api: 
            - fixed: "/thematic/cagedtermometro?categorias=termometro_codigo,termometro_descricao&valor=admitidos,desligados&agregacao=sum,sum&ordenacao=-(sum(admitidos)-sum(desligados))&limit=5&filtros=eq-termometro_grupo-'cnae_classe_uf',and,eq-competencia_mov-max_competencia,and,nk-termometro_descricao-'CNAE NÃO IDENTIFICADO%25'"
              options:
                calcs:
                  - id: "saldo"
                    function: "calc_subtraction_ds"
                    fn_args:
                      - fixed: "agr_sum_admitidos"
                      - fixed: "agr_sum_desligados"
                  - id: "criados"
                    function: "applyInterpolReplaceDatasetParam"
                    fn_args:
                      - fixed: 
                          template: "<br/>&nbsp;&nbsp;&nbsp;&nbsp;{0} novos postos"
                          args:
                            - named_prop: "calc_saldo"
                              format: "inteiro"
          apiBase:
            - fixed: "/thematic/cagedtermometro?categorias=termometro_codigo,termometro_descricao&valor=admitidos,desligados&agregacao=sum,sum&ordenacao=-(sum(admitidos)-sum(desligados))&limit=5&filtros=eq-termometro_grupo-'cnae_classe_uf',and,nk-termometro_descricao-'CNAE NÃO IDENTIFICADO%25'"
              options:
                calcs:
                  - id: "saldo"
                    function: "calc_subtraction_ds"
                    fn_args:
                      - fixed: "agr_sum_admitidos"
                      - fixed: "agr_sum_desligados"
                  - id: "criados"
                    function: "applyInterpolReplaceDatasetParam"
                    fn_args:
                      - fixed: 
                          template: "<br/>&nbsp;&nbsp;&nbsp;&nbsp;{0} novos postos"
                          args:
                            - named_prop: "calc_saldo"
                              format: "inteiro"
          args:
            - prop: 'localidade'
              named_prop: "termometro_descricao"
            - prop: 'vl_indicador'
              named_prop: "calc_criados"
        - title: "Setores com Maiores Saldos Negativos"
          cls: "xs12 px-3 pb-0"
          reactive: true
          api: 
            - fixed: "/thematic/cagedtermometro?categorias=termometro_codigo,termometro_descricao&valor=admitidos,desligados&agregacao=sum,sum&ordenacao=sum(admitidos)-sum(desligados)&limit=5&filtros=eq-termometro_grupo-'cnae_classe_uf',and,eq-competencia_mov-max_competencia,and,nk-termometro_descricao-'CNAE NÃO IDENTIFICADO%25'"
              options:
                calcs:
                  - id: "saldo"
                    function: "calc_subtraction_ds"
                    fn_args:
                      - fixed: "agr_sum_admitidos"
                      - fixed: "agr_sum_desligados"
                  - id: "perdidos"
                    function: "applyInterpolReplaceDatasetParam"
                    fn_args:
                      - fixed: 
                          template: "<br/>&nbsp;&nbsp;&nbsp;&nbsp;{0} postos perdidos"
                          args:
                            - named_prop: "calc_saldo"
                              format: "inteiro"
          apiBase:
            - fixed: "/thematic/cagedtermometro?categorias=termometro_codigo,termometro_descricao&valor=admitidos,desligados&agregacao=sum,sum&ordenacao=sum(admitidos)-sum(desligados)&limit=5&filtros=eq-termometro_grupo-'cnae_classe_uf',and,nk-termometro_descricao-'CNAE NÃO IDENTIFICADO%25'"
              options:
                calcs:
                  - id: "saldo"
                    function: "calc_subtraction_ds"
                    fn_args:
                      - fixed: "agr_sum_admitidos"
                      - fixed: "agr_sum_desligados"
                  - id: "perdidos"
                    function: "applyInterpolReplaceDatasetParam"
                    fn_args:
                      - fixed: 
                          template: "<br/>&nbsp;&nbsp;&nbsp;&nbsp;{0} postos perdidos"
                          args:
                            - named_prop: "calc_saldo"
                              format: "inteiro"
          args:
            - prop: 'localidade'
              named_prop: "termometro_descricao"
            - prop: 'vl_indicador'
              named_prop: "calc_perdidos"
        - title: "Ocupações com Maiores Saldos Positivos"
          cls: "xs12 px-3 pb-0"
          reactive: true
          api: 
            - fixed: "/thematic/cagedtermometro?categorias=termometro_codigo,termometro_descricao&valor=admitidos,desligados&agregacao=sum,sum&ordenacao=-(sum(admitidos)-sum(desligados))&limit=10&filtros=eq-termometro_grupo-'cbo_uf',and,eq-competencia_mov-max_competencia"
              options:
                calcs:
                  - id: "saldo"
                    function: "calc_subtraction_ds"
                    fn_args:
                      - fixed: "agr_sum_admitidos"
                      - fixed: "agr_sum_desligados"
                  - id: "criados"
                    function: "applyInterpolReplaceDatasetParam"
                    fn_args:
                      - fixed: 
                          template: "{0} novos postos"
                          args:
                            - named_prop: "calc_saldo"
                              format: "inteiro"
          apiBase:
            - fixed: "/thematic/cagedtermometro?categorias=termometro_codigo,termometro_descricao&valor=admitidos,desligados&agregacao=sum,sum&ordenacao=-(sum(admitidos)-sum(desligados))&limit=10&filtros=eq-termometro_grupo-'cbo_uf'"
              options:
                calcs:
                  - id: "saldo"
                    function: "calc_subtraction_ds"
                    fn_args:
                      - fixed: "agr_sum_admitidos"
                      - fixed: "agr_sum_desligados"
                  - id: "criados"
                    function: "applyInterpolReplaceDatasetParam"
                    fn_args:
                      - fixed: 
                          template: "{0} novos postos"
                          args:
                            - named_prop: "calc_saldo"
                              format: "inteiro"
          args:
            - prop: 'localidade'
              named_prop: "termometro_descricao"
            - prop: 'vl_indicador'
              named_prop: "calc_criados"
        - title: "Ocupações com Maiores Saldos Negativos"
          cls: "xs12 px-3 pb-0"
          reactive: true
          api: 
            - fixed: "/thematic/cagedtermometro?categorias=termometro_codigo,termometro_descricao&valor=admitidos,desligados&agregacao=sum,sum&ordenacao=sum(admitidos)-sum(desligados)&limit=10&filtros=eq-termometro_grupo-'cbo_uf',and,eq-competencia_mov-max_competencia"
              options:
                calcs:
                  - id: "saldo"
                    function: "calc_subtraction_ds"
                    fn_args:
                      - fixed: "agr_sum_admitidos"
                      - fixed: "agr_sum_desligados"
                  - id: "perdidos"
                    function: "applyInterpolReplaceDatasetParam"
                    fn_args:
                      - fixed: 
                          template: "{0} postos perdidos"
                          args:
                            - named_prop: "calc_saldo"
                              format: "inteiro"
          apiBase:
            - fixed: "/thematic/cagedtermometro?categorias=termometro_codigo,termometro_descricao&valor=admitidos,desligados&agregacao=sum,sum&ordenacao=sum(admitidos)-sum(desligados)&limit=10&filtros=eq-termometro_grupo-'cbo_uf'"
              options:
                calcs:
                  - id: "saldo"
                    function: "calc_subtraction_ds"
                    fn_args:
                      - fixed: "agr_sum_admitidos"
                      - fixed: "agr_sum_desligados"
                  - id: "perdidos"
                    function: "applyInterpolReplaceDatasetParam"
                    fn_args:
                      - fixed: 
                          template: "{0} postos perdidos"
                          args:
                            - named_prop: "calc_saldo"
                              format: "inteiro"
          args:
            - prop: 'localidade'
              named_prop: "termometro_descricao"
            - prop: 'vl_indicador'
              named_prop: "calc_perdidos"
