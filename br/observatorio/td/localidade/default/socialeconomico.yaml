#==================================================
principais:
  - relevance: 'lead'
    cls: 'xs12 xl6'
    rowClass: "pt-0 px-3 pb-5"
    preloaded:
      prop: "centralindicadores"
      function: "slice"
      id: "01_17_03_00"
      year: "max"
    args:
      - prop: "value"
        named_prop: 'vl_indicador'
        format: 'porcentagem'
        precision: 2
      - prop: "description"
        named_prop: "ds_indicador_radical"
      - prop: 'comment'
        template: "({0}, {1})"
        args:
          - named_prop: "ds_fonte"
          - named_prop: "nu_competencia"
  # - relevance: 'lead' 
  #   cls: 'xs12 xl6'
  #   rowClass: "pt-0 px-3 pb-5"
  #   preloaded:
  #     prop: "centralindicadores"
  #     function: "slice"
  #     id: "01_16_01_00"
  #     year: "max"
  #   args:
  #     - prop: "value"
  #       named_prop: 'vl_indicador'
  #       format: 'auto'
  #       collapse: true
  #     - prop: "description"
  #       named_prop: "ds_indicador_curto"
  #     - prop: 'comment'
  #       template: "({0}, {1})"
  #       args:
  #         - named_prop: "ds_fonte"
  #         - named_prop: "nu_competencia"
  - relevance: 'lead'
    cls: 'xs12 xl6'
    rowClass: "pt-0 px-3 pb-5"
    preloaded:
      prop: "centralindicadores"
      function: "slice"
      id: "06_01_09_01"
      year: "max"
    args:
      - prop: "value"
        function: "calcClassIdh"
        fn_args:
          - named_prop: "vl_indicador" 
          - fixed : true
          - fixed : true
          - fixed : true
      - prop: "description"
        named_prop: "ds_indicador_radical"
      - prop: 'comment'
        template: "({0}, {1})"
        args:
          - named_prop: "ds_fonte"
          - named_prop: "nu_competencia"
  # - relevance: 'lead'
  #   cls: 'xs12 xl6'
  #   rowClass: "pt-0 px-3 pb-5"
  #   preloaded:
  #     prop: "centralindicadores"
  #     function: "slice"
  #     id: ["01_14_10_00", "01_15_01_00"]
  #     year: "2018"
  #     combine:
  #     - id: "pob_perc"
  #       desc: "Porcentagem da população em situação de pobreza ou extrema pobreza"
  #       format: 'porcentagem'
  #       function: 'calc_percentage'
  #       fn_args:
  #         - id: "01_14_10_00"
  #           year: "2018"
  #           named_prop: "vl_indicador"
  #         - id: "01_15_01_00"
  #           year: "2018"
  #           named_prop: "vl_indicador"
  #   args:
  #     - id: "pob_perc"
  #       prop: "value"
  #       named_prop: 'vl_indicador'
  #       format: 'porcentagem'
  #     - prop: "description"
  #       fixed: "Porcentagem da população em situação de pobreza ou extrema pobreza"
  #     - prop: 'comment'
  #       template: "({0}, {1})"
  #       args:
  #         - named_prop: "ds_fonte"
  #         - named_prop: "nu_competencia"
# ========================================================
secoes:
  - id: "ecosocial_unica"
    name: ""
    cards:
      - id: "mapa_populacao_municipio"
        title:
          fixed: "População residente"
        title_comment:
          template: "{0}, em {1}"
          preloaded:
            prop: "centralindicadores"
            function: "slice"
            id: ["01_17_01_00"]
            year: "max"
          args:
            - named_prop: "nm_uf"
            - named_prop: "nu_competencia"
              default: "Sem Registros"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              fixed: "A população total é oriunda do recenseamento populacional, que corresponde ao total de habitantes residentes na localidade."
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12 md6'
                preloaded:
                  prop: "centralindicadores"
                  function: "slice"
                  id: "01_17_01_00"
                  year: "max"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'real'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    template: "Habitantes ({0})"
                    args:
                      - named_prop: "nu_competencia"
              - relevance: 'high'
                cls: 'xs12 md6'
                preloaded:
                  prop: "centralindicadores"
                  function: "slice"
                  id: "01_15_01_00"
                  year: "max"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'real'
                    collapse:
                      format: 'real'
                  - prop: "description"
                    template: "População estimada ({0})"
                    args:
                      - named_prop: "nu_competencia"
              - relevance: 'low'
                cls: 'xs12 md6'
                preloaded:
                  prop: "centralindicadores"
                  function: "slice"
                  id: "01_15_01_00"
                  year: "max"
                args:
                  - prop: "value"
                    named_prop: 'media_br'
                    format: 'real'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: "Média nacional"
                  - prop: "comment"
                    template: "{0} ({1})"
                    args:
                      - function: "calcIndexPercentage" 
                        fn_args:
                          - named_prop: "vl_indicador"
                          - named_prop: 'media_br'
                      - named_prop: "nu_competencia"
                    color_changing: 
                      base_value_prop: 'media_br'
                      compared_value_prop: 'vl_indicador'
          - type: "text"
            title: ""
            content:
              template: "Em destaque, a população na UF em {0} e {1}. A densidade populacional em {2} era de {3} hab./km2. De acordo com a concentração populacional, é possível situar a localidade no ranking e em relação à média das UFs e do Brasil. No mapa, A escala de cores varia da menor quantidade (branco) para a maior quantidade de habitantes (azul escuro)."
              preloaded:
                prop: "centralindicadores"
                function: "slice"
                id: ["01_17_01_00", "01_15_01_00"]
                year: "max"
              args:
                - id: "01_17_01_00"
                  named_prop: "nu_competencia"
                - id: "01_15_01_00"
                  named_prop: "nu_competencia"
                - id: "06_03_01_08"
                  named_prop: "nu_competencia"
                - id: "06_03_01_08"
                  named_prop: "vl_indicador"
                  format: "real"
                - id: "01_15_01_00"
                  named_prop: "nm_municipio_uf"
          - type: "ranking"
            preloaded:
              prop: "centralindicadores"
              function: "slice"
              id: "01_15_01_00"
              year: "max"
            args:
              - prop: 'national_rank'
                named_prop: "rank_br"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'national_total'
                named_prop: "rank_br_total"
                format: 'inteiro'
                precision: 0
                default: 0

        chart_type: "MAP_TOPOJSON"
        api:
          template: "/indicadoresmunicipais?categorias=cd_mun_ibge,nm_municipio,cd_dimensao,ds_indicador_radical,cd_indicador,nu_competencia,ds_fonte,vl_indicador,media_uf,pct_uf,rank_uf,rank_br,latitude,longitude&filtros=eq-cd_uf-{0},and,eq-cd_indicador-'01_15_01_00',and,eq-nu_competencia-nu_competencia_max"
          args:
            - named_prop: "idLocalidade"
          options:
            calcs:
              - id: "deviation_pop"
                function: "get_proportional_indicator_uf"
            formatters:
              - id: "vl_indicador"
                format: 'inteiro'
              - id: "pct_uf"
                format: 'porcentagem'
                precision: 2
              - id: "rank_br"
                format: 'inteiro'
        headers:
          - text: 'Município'
            align: 'left'
            value: 'nm_municipio'
          - text: 'Ano'
            align: 'left'
            value: 'nu_competencia'
          - text: 'Indicador'
            align: 'left'
            value: 'ds_indicador_radical'
          - text: 'Total'
            value: 'fmt_vl_indicador'
          - text: 'Participação na UF'
            value: 'fmt_pct_uf'
          - text: 'Rank UF'
            value: 'rank_uf'
          - text: 'Rank Brasil'
            value: 'fmt_rank_br'
        chart_options:
          id_field: 'cd_mun_ibge'
          topo_key: "codarea"
          value_field: 'calc_deviation_pop'
          colorScale:
            order: 'asc'
            inv_function:
              name: 'inv_deviation'
              args:
                - first_row_prop: 'media_uf'
        source:
          desc: "IBGE: Censo Demográfico 2010 e Estimativas de População"

# ========================================================
      - id: "mapa_cresc_pop_municipio"
        title:
          fixed: "Variação anual da população"
        title_comment:
          template: "{0}, em {1}"
          preloaded:
            prop: "centralindicadores"
            function: "slice"
            id: "01_17_03_00"
            year: "max"
          args:
            - named_prop: "nm_uf"
            - named_prop: "nu_competencia"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              fixed: "A população total é oriunda do recenseamento populacional, que corresponde ao total de habitantes residentes na localidade."
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12 md6'
                preloaded:
                  prop: "centralindicadores"
                  function: "slice"
                  id: "01_17_03_00"
                  year: "max"
                args:
                  - prop: "value"
                    function: "calc_average_by_year"
                    format: 'porcentagem'
                    precision: 2
                    fn_args:
                      - fixed: "0"
                      - fixed: "2010"
                      - named_prop: "vl_indicador"
                      - named_prop: "nu_competencia"
                  - prop: "description"
                    template: "{0} ANUAL"
                    args:
                      - function: "valueCheck"
                        fn_args:
                          - named_prop: "vl_indicador"
                          - fixed: '0'
                          - fixed: "ACRÉSCIMO"
                          - fixed: "DECRÉSCIMO"
                    color_changing: 
                      compared_value_prop: 'vl_indicador'
                      gt_color: 'blue'
              - relevance: 'low'
                cls: 'xs12 md6'
                preloaded:
                  prop: "centralindicadores"
                  function: "slice"
                  id: "01_17_03_00"
                  year: "max"
                args:
                  - prop: "value"
                    function: "calc_average_by_year"
                    format: 'porcentagem'
                    precision: 2
                    fn_args:
                      - fixed: "0"
                      - fixed: "2010"
                      - named_prop: "vl_indicador_br"
                      - named_prop: "nu_competencia"
                  - prop: "description"
                    template: "{0} ANUAL<br/> MÉDIA NACIONAL"
                    args:
                      - function: "valueCheck"
                        fn_args:
                          - named_prop: "vl_indicador_br"
                          - fixed: '0'
                          - fixed: "ACRÉSCIMO"
                          - fixed: "DECRÉSCIMO"
          - type: "text"
            title: ""
            content:
              template: "Por aproximação, o dinamismo populacional de {0} apresentou a variação em destaque. A taxa de crescimento populacional revela a dinâmica populacional no longo prazo. Estados com acréscimo de população sugerem aumento da atividade econômica, ao passo que Estados que perdem habitantes indicam situação preocupante. No mapa, a variação de cores vai do azul (crescimento) ao vermelho (redução da população), passando pelo branco (nenhuma mudança), conforme a escala em destaque."
              preloaded:
                prop: "centralindicadores"
                function: "slice"
                id: ["01_17_03_00"]
                year: "max"
              args:
                - named_prop: "nm_uf"
          - type: "ranking"
            preloaded:
              prop: "centralindicadores"
              function: "slice"
              id: "01_17_03_00"
              year: "max"
            args:
              - prop: 'national_rank'
                named_prop: "rank_br"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'national_total'
                named_prop: "rank_br_total"
                format: 'inteiro'
                precision: 0
                default: 0

        chart_type: "MAP_TOPOJSON"
        api:
          template: "/indicadoresmunicipais?categorias=cd_mun_ibge,nm_municipio,cd_dimensao,ds_indicador_curto,cd_indicador,nu_competencia,ds_fonte,vl_indicador,media_uf,rank_uf,rank_br,latitude,longitude&filtros=eq-cd_uf-{0},and,eq-cd_indicador-'01_17_03_00',and,eq-nu_competencia-nu_competencia_max"
          args:
            - named_prop: "idLocalidade"
          options:
            recalc_min_max: true
            calcs:
              - id: "deviation_crescimento"
                function: "get_bipolar_scale"
                fn_args: 
                  - fixed: 'vl_indicador'
            formatters:
              - id: "vl_indicador"
                format: 'porcentagem'
                precision: 2
                signed: true
              - id: "rank_br"
                format: 'inteiro'
        headers:
          - text: 'Município'
            align: 'left'
            value: 'nm_municipio'
          - text: 'Indicador'
            align: 'left'
            value: 'ds_indicador_curto'
          - text: 'Variação da população'
            value: 'fmt_vl_indicador'
          - text: 'Rank UF'
            value: 'rank_uf'
          - text: 'Rank Brasil'
            value: 'fmt_rank_br'
        chart_options:
          id_field: 'cd_mun_ibge'
          topo_key: "codarea"
          value_field: 'calc_deviation_crescimento'
          colorScale:
            name: 'RdYlBu'
        source:
          desc_field: "ds_fonte"

# ========================================================
      - id: "multi_populacao"
        type: "multiple-charts"
        title:
          fixed: "População ocupada"
        title_comment:
          template: "{0} - 18 a 64 anos ({1})"
          preloaded:
            prop: "centralindicadores"
            function: "slice"
            id: "01_04_04_00"
            year: "max"
          args:
            - named_prop: "nm_uf"
            - named_prop: "nu_competencia"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              fixed: "A população ocupada é contada através do Censo, o qual considera como ocupadas pessoas que exerceram trabalho, remunerado ou sem remuneração, ou que tinham trabalho remunerado do qual estavam temporariamente afastadas."
          - type: "text"
            title: "Observação Importante:"
            content:
              fixed: "A soma da população com carteira assinada e sem carteira assinada, no destaque, não é igual a 100% pois a população ocupada é classificada, além dessas duas categorias, em conta própria, empregadores, não remunerados e produção para o próprio consumo, sendo a soma de todas essas categorias o total."
        description: 
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12 md6'
                preloaded:
                  prop: "centralindicadores"
                  function: "slice"
                  id: "01_17_01_00"
                  year: "max"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'real'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    template: "Habitantes ({0})"
                    args:
                      - named_prop: "nu_competencia"
              - relevance: 'high'
                cls: 'xs12 md6'
                preloaded:
                  prop: "centralindicadores"
                  function: "slice"
                  id: "01_04_04_00"
                  year: "max"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'real'
                    collapse:
                      format: 'real'
                  - prop: "description"
                    fixed: "População ocupada"
              - relevance: 'low'
                cls: 'xs12 md6'
                preloaded:
                  prop: "centralindicadores"
                  function: "slice"
                  id: "01_08_09_00"
                  year: "max"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'porcentagem'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: "Com carteira assinada"
              - relevance: 'low'
                cls: 'xs12 md6'
                preloaded:
                  prop: "centralindicadores"
                  function: "slice"
                  id: "01_08_11_00"
                  year: "max"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'porcentagem'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: "Sem carteira assinada"
                      
          - type: "text"
            title: ""
            content:
              template: "Em destaque, a população ocupada de 16 a 64 anos e os percentuais com carteira e sem carteira assinada em {0}. O primeiro gráfico mostra a distribuição nos setores econômicos e o segundo nas diferentes categorias ocupadas."
              preloaded:
                prop: "centralindicadores"
                function: "slice"
                id: "01_17_01_00"
                year: "max"
              args:
                - named_prop: "nu_competencia"
              
          - type: "ranking"
            preloaded:
              prop: "centralindicadores"
              function: "slice"
              id: "01_04_04_00"
              year: "max"
            args:
              - prop: 'national_rank'
                named_prop: "rank_br"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'national_total'
                named_prop: "rank_br_total"
                format: 'inteiro'
                precision: 0
                default: 0
        charts:
# ========================================================
          - id: "treemap_popocup_areas_municipio"
            cls: "xs12 md6"
            type: "TREEMAP"
            preloaded:
              prop: "centralindicadores"
              function: "slice"
              id: ["01_04_01_00","01_04_02_00","01_04_03_00"]
              year: "max"
              options:
                formatters:
                - id: "vl_indicador"
                  format: 'inteiro'
            headers:
              - text: 'Indicador'
                align: 'left'
                value: 'ds_agreg_primaria'
              - text: 'Ano'
                align: 'left'
                value: 'nu_competencia'
              - text: 'Qtde'
                value: 'fmt_vl_indicador'
            options:
              
              id: "cd_indicador"
              text: "ds_agreg_primaria"
              size: "vl_indicador"
              colorScale:
                name: "BuGn"
                type: "singleHue"
                levels: 6
                order: 'asc'
            source:
              desc_field: "ds_fonte"
# ========================================================
          - id: "treemap_popocup_categoria_municipio"
            cls: "xs12 md6"
            type: "TREEMAP"
            preloaded:
              prop: "centralindicadores"
              function: "slice"
              id: ["01_08_03_00","01_08_05_00","01_08_06_00","01_08_02_00","01_08_04_00","01_08_07_00","01_08_08_00"]
              year: "max"
              options:
                formatters:
                  - id: "vl_indicador"
                    format: 'inteiro'
            headers:
              - text: 'Indicador'
                align: 'left'
                value: 'ds_agreg_primaria'
              - text: 'Ano'
                align: 'left'
                value: 'nu_competencia'
              - text: 'Qtde'
                value: 'fmt_vl_indicador'
            options:
              chart_size: "tall"
              id: "cd_indicador"
              text: "ds_agreg_primaria"
              size: "vl_indicador"
              colorScale:
                name: "BuPu"
                type: "singleHue"
                levels: 6
                order: 'asc'
            source:
              desc_field: "ds_fonte"
# ========================================================
      - id: "mapa_gini_municipio"
        title: 
          fixed: "Concentração de renda domiciliar"
        title_comment:
          template: "{0}, em {1}"
          preloaded:
            prop: "centralindicadores"
            function: "slice"
            id: "01_09_01_00"
            year: "max"
          args:
            - named_prop: "nm_uf"
            - named_prop: "nu_competencia"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              fixed: "O índice GINI mensura a desigualdade de uma distribuição, variando de 0 (igualdade máxima, todos detém a mesma quantidade de renda) até 1 (concentração absoluta ou desigualdade máxima, uma pessoa detém toda a renda)."
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12 md6'
                preloaded:
                  prop: "centralindicadores"
                  function: "slice"
                  id: "01_09_01_00"
                  year: "max"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'real'
                    precision: 3
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: "Índice GINI da UF"
          - type: "text"
            title: ""
            content:
              template: "Em destaque, a concentração de renda, medida pelo índice de GINI de distribuição do rendimento domiciliar em {0}. Quanto maior o índice, que vai de 0 a 1, maior a concentração. Destaca-se, ainda, a posição da localidade no ranking do Brasil. A escala de cores varia da menor (branco) à maior concentração (vermelho)."
              preloaded:
                prop: "centralindicadores"
                function: "slice"
                id: "01_09_01_00"
                year: "max"
              args:
                - named_prop: 'nu_competencia'

          - type: "ranking"
            preloaded:
              prop: "centralindicadores"
              function: "slice"
              id: "01_09_01_00"
              year: "max"
            args:
              - prop: 'national_rank'
                named_prop: "rank_br"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'national_total'
                named_prop: "rank_br_total"
                format: 'inteiro'
                precision: 0
                default: 0
        chart_type: "MAP_TOPOJSON"
        api:
          template: "/indicadoresmunicipais?categorias=cd_mun_ibge,nm_municipio,cd_dimensao,ds_indicador_radical,cd_indicador,nu_competencia,ds_fonte,vl_indicador,media_uf,rank_uf,rank_br,latitude,longitude&filtros=eq-cd_uf-{0},and,eq-cd_indicador-'01_09_01_00',and,eq-nu_competencia-nu_competencia_max"
          args:
            - named_prop: "idLocalidade"
          options:
            formatters:
              - id: "vl_indicador"
                format: 'real'
                precision: 3
              - id: "rank_br"
                format: 'inteiro'
        headers:
          - text: 'Município'
            align: 'left'
            value: 'nm_municipio'
          - text: 'Ano'
            align: 'left'
            value: 'nu_competencia'
          - text: 'Indicador'
            align: 'left'
            value: 'ds_indicador_radical'
          - text: 'Valor'
            value: 'fmt_vl_indicador'
          - text: 'Rank UF'
            value: 'rank_uf'
          - text: 'Rank Brasil'
            value: 'fmt_rank_br'
        chart_options:
          id_field: 'cd_mun_ibge'
          topo_key: "codarea"
          value_field: 'vl_indicador'
          colorScale:
            name: "Reds"
            order: 'asc'
        source:
          desc_field: "ds_fonte"

# ========================================================
      - id: "mapa_taxa_alfab_municipio"
        title:
          fixed: "Taxa de alfabetização"
        title_comment:
          template: "{0} - População de 15 anos ou mais de idade ({1})"
          preloaded:
            prop: "centralindicadores"
            function: "slice"
            id: "01_11_09_00"
            year: "max"
          args:
            - named_prop: "nm_uf"
            - named_prop: "nu_competencia"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              fixed: "Percentual e número absoluto de pessoas de 15 anos ou mais de idade que sabem ler e escrever pelo menos um bilhete simples no idioma que conhecem, na população total da mesma faixa etária, em determinado espaço geográfico, no ano considerado."
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12 md6'
                preloaded:
                  prop: "centralindicadores"
                  function: "slice"
                  id: "01_11_09_00"
                  year: "max"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'porcentagem'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: "Alfabetizados<br/>15 anos ou mais"
              - relevance: 'high'
                cls: 'xs12 md6'
                preloaded:
                  prop: "centralindicadores"
                  function: "slice"
                  id: "01_12_12_00"
                  year: "max"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'porcentagem'
                  - prop: "description"
                    fixed: "Alfabetizados<br/>15 a 24 anos"
              - relevance: 'low'
                cls: 'xs12 md6'
                preloaded:
                  prop: "centralindicadores"
                  function: "slice"
                  id: "01_11_08_00"
                  year: "max"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'real'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: "Analfabetos<br/>15 anos ou mais"
              - relevance: 'low'
                cls: 'xs12 md6'
                preloaded:
                  prop: "centralindicadores"
                  function: "slice"
                  id: "01_12_06_00"
                  year: "max"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'real'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: "Analfabetos<br/>15 a 24 anos"

          - type: "text"
            title: ""
            content:
              template: "Em destaque, a taxa de alfabetização do Estado em {0} e a quantidade de analfabetos por faixa etária. Destaca-se ainda, a posição da Unidade Federativa no ranking e em relação à média do Brasil. No mapa, a escala de cores varia da menor taxa (branco) para a maior taxa de alfabetização (azul escuro)."
              preloaded:
                prop: "centralindicadores"
                function: "slice"
                id: "01_11_09_00"
                year: "max"
              args:
                - named_prop: 'nu_competencia'
                - named_prop: 'nm_municipio_uf'

          - type: "ranking"
            preloaded:
              prop: "centralindicadores"
              function: "slice"
              id: "01_11_09_00"
            args:
              - prop: 'national_rank'
                named_prop: "rank_br"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'national_total'
                named_prop: "rank_br_total"
                format: 'inteiro'
                precision: 0
                default: 0

        chart_type: "MAP_TOPOJSON"
        api:
          template: "/indicadoresmunicipais?categorias=cd_mun_ibge,nm_municipio,cd_dimensao,ds_indicador_radical,cd_indicador,nu_competencia,ds_fonte,vl_indicador,media_uf,rank_uf,rank_br,latitude,longitude&filtros=eq-cd_uf-{0},and,eq-cd_indicador-'01_11_09_00'"
          args:
            - named_prop: "idLocalidade"
          options:
            formatters:
              - id: "vl_indicador"
                format: 'porcentagem'
                precision: 1
              - id: "rank_br"
                format: 'inteiro'
        headers:
          - text: 'Município'
            align: 'left'
            value: 'nm_municipio'
          - text: 'Ano'
            align: 'left'
            value: 'nu_competencia'
          - text: 'Indicador'
            align: 'left'
            value: 'ds_indicador_radical'
          - text: 'Taxa de Alfabetização'
            value: 'fmt_vl_indicador'
          - text: 'Rank UF'
            value: 'rank_uf'
          - text: 'Rank Brasil'
            value: 'fmt_rank_br'
        chart_options:
          id_field: 'cd_mun_ibge'
          topo_key: "codarea"
          value_field: 'vl_indicador'
          colorScale:
            order: 'asc'
        source:
          desc_field: "ds_fonte"

# ========================================================
      - id: "treemap_pop_instrucao_municipio"
        title:
          fixed: "Pessoas de 15 anos ou mais segundo o nível de instrução"
        title_comment:
          template: "{0}, em {1}"
          preloaded:
            prop: "centralindicadores"
            function: "slice"
            id: "01_13_05_00"
          args:
            - named_prop: "nm_uf"
            - named_prop: "nu_competencia"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              fixed: "Sem instrução ou com o ensino fundamental incompleto: pessoa que nunca frequentou escola ou creche; que frequentava ou frequentou creche, curso pré-escolar, classe de alfabetização ou curso de alfabetização de jovens e adultos; frequentava curso de ensino fundamental; frequentou curso elementar; ou frequentou, mas não concluiu curso de ensino fundamental, 1º grau ou médio 1º ciclo. Ensino fundamental completo ou médio incompleto: pessoa que concluiu curso de ensino fundamental, 1º grau ou médio 1º ciclo; frequentava da 1ª a 3ª série de curso de ensino médio; ou frequentou, mas não concluiu o ensino médio ou 2º grau. Ensino médio completo ou superior incompleto: pessoa que frequentava a 4ª série do ensino médio; concluiu o ensino médio, 2º grau ou médio 2º ciclo; ou frequentava ou frequentou, mas não concluiu, curso superior. Ensino superior completo: pessoa que concluiu curso superior; ou frequentava ou frequentou curso de mestrado, doutorado ou especialização de nível superior."
        description: 
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12 md7'
                preloaded:
                  prop: "centralindicadores"
                  function: "slice"
                  id: "01_13_05_00"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'real'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: "Sem instrução ou com <br/>fundamental incompleto"
              - relevance: 'high'
                cls: 'xs12 md5'
                preloaded:
                  prop: "centralindicadores"
                  function: "slice"
                  id: "01_13_10_00"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'porcentagem'
                    precision: 1
                  - prop: "description"
                    fixed: "Do total"
              - relevance: 'low'
                cls: 'xs12 md7'
                preloaded:
                  prop: "centralindicadores"
                  function: "slice"
                  id: "01_13_02_00"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'real'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: "Ensino fundamental completo <br/>ou médio incompleto"
              - relevance: 'low'
                cls: 'xs12 md5'
                preloaded:
                  prop: "centralindicadores"
                  function: "slice"
                  id: "01_13_03_00"
                args:
                  - prop: "value"
                    named_prop: 'vl_indicador'
                    format: 'real'
                    collapse:
                      format: 'real'
                    default: "Sem Registros"
                  - prop: "description"
                    fixed: "Ensino médio completo ou superior incompleto"

          - type: "text"
            title: ""
            content:
              template: "Em destaque, a quantidade de pessoas, em {0}, sem instrução ou com ensino fundamental incompleto na localidade, bem como as informações dos níveis de instrução subsequentes. Toda a população de 15 anos ou mais de idade deve ter concluído o ensino fundamental pelo sistema brasileiro."
              preloaded:
                prop: "centralindicadores"
                function: "slice"
                id: "01_13_05_00"
                year: "max"
              args:
                - named_prop: 'nu_competencia'
          - type: "ranking"
            preloaded:
              prop: "centralindicadores"
              function: "slice"
              id: "01_13_05_00"
            args:
              - prop: 'national_rank'
                named_prop: "rank_br"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'national_total'
                named_prop: "rank_br_total"
                format: 'inteiro'
                precision: 0
                default: 0

        chart_type: "TREEMAP"
        preloaded:
          prop: "centralindicadores"
          function: "slice"
          id: ['01_13_05_00','01_13_02_00','01_13_03_00','01_13_06_00']
          year: "2010"
          options:
            formatters:
              - id: "vl_indicador"
                format: 'inteiro'
        headers:
          - text: 'Indicador'
            align: 'left'
            value: 'ds_agreg_primaria'
          - text: 'Ano'
            align: 'left'
            value: 'nu_competencia'
          - text: 'Qtde'
            value: 'fmt_vl_indicador'
        chart_options:
          id: "cd_indicador"
          text: "ds_agreg_primaria"
          size: "vl_indicador"
          colorScale:
            name: "BuGn"
            type: "singleHue"
            levels: 6
            order: 'asc'
        source:
          desc_field: "ds_fonte"

# ========================================================
      - id: "mapa_idhm_municipio"
        title: 
          fixed: "Índice de Desenvolvimento Humano (IDH) Municipal"
        title_comment:
          template: "{0}, em {1}"
          preloaded:
            prop: "centralindicadores"
            function: "slice"
            id: "06_01_09_01"
            year: "2010"
          args:
            - named_prop: "nm_uf"
            - named_prop: "nu_competencia"
        info:
          - type: "text"
            title: "Sobre a métrica"
            content:
              fixed: "Índice de Desenvolvimento Humano (IDH) é uma medida comparativa que vai de 0 a 1 usada para classificar os países e municípios pelo seu grau de 'desenvolvimento humano'. A classificação é dividida em desenvolvidos (desenvolvimento humano muito alto, IDH 0,8 a 1,0), em desenvolvimento (desenvolvimento humano médio e alto, IDH de 0,6 a 0,79) e subdesenvolvidos (desenvolvimento humano baixo e muito baixo, IDH de 0 a 0,59). A estatística é composta a partir de três componentes: “vida longa e saudável”, medida pela expectativa de vida ao nascer; “acesso ao conhecimento”, medido pela escolaridade da população adulta e fluxo escolar da população jovem; e, “padrão de vida”, medido pelo PIB per capita. Cada ano, os países membros da ONU são classificados de acordo com essas medidas.<br/><br/>
              <table class='table-info'>
              <th colspan=2>Classificação IDH</th>
              <tr><td>Muito Alto</td><td>0,800 ou superior</td></tr>
              <tr><td>Alto</td><td>0,700 a 0,799</td></tr>
              <tr><td>Médio</td><td>0,600 a 0,699</td></tr>
              <tr><td>Baixo</td><td>0,500 a 0,599</td></tr>
              <tr><td>Muito Baixo</td><td>abaixo de 0,500</td></tr>
              </table>"
        description:
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12 md6'
                preloaded:
                  prop: "centralindicadores"
                  function: "slice"
                  id: "06_01_09_01"
                  year: "2010"
                args:
                  - prop: "value"
                    format: 'auto'
                    precision: 3
                    named_prop: 'vl_indicador'
                  - prop: "description"
                    fixed: "IDH da UF"

              - relevance: 'high'
                cls: 'xs12 md6'
                preloaded:
                  prop: "centralindicadores"
                  function: "slice"
                  id: "06_01_09_01"
                  year: "2010"
                args:
                  - prop: "value"
                    function: "calcClassIdh"
                    fn_args:
                      - named_prop: "vl_indicador" 
                      - fixed : false
                      - fixed : false
                      - fixed : true
                  - prop: "description"
                    function: "getClassIdh"
                    fn_args:
                      - named_prop: "vl_indicador"
          - type: "text"
            title: ""
            content:
              # template: "O Índice de Desenvolvimento Humano (IDH) do município é de {0}, classificado como {1}. Diante da disparidade do IDH de alguns municípios, é importante estar atento ao ordenamento do IDH dentro da unidade federativa e do país e também da posição em relação à média do IDH municipal da unidade federativa e do país. Os gráficos demonstram qual é posição do IDH do município em relação ao estado e o país e também em relação à média do estado e do país."
              template: "Em destaque, o IDH-M do Estado em {0}, classificado como {1}. É importante destacar também a posição deste no ranking e em relação à média do Brasil. No mapa, a escala de cores varia do menor (vermelho) para  o maior IDH (azul escuro)."
              preloaded:
                prop: "centralindicadores"
                function: "slice"
                id: "06_01_09_01"
                year: "max"
              args:
                - named_prop: "nu_competencia"
                  format: 'inteiro'
                - function: "calcClassIdh"
                  fn_args:
                    - named_prop: "vl_indicador" 
                    - fixed : false
                    - fixed : false
                    - fixed : false
                - named_prop: "nm_municipio_uf"
          - type: "ranking"
            preloaded:
              prop: "centralindicadores"
              function: "slice"
              id: "06_01_09_01"
            args:
              - prop: 'national_rank'
                named_prop: "rank_br"
                format: 'inteiro'
                precision: 0
                default: 0
              - prop: 'national_total'
                named_prop: "rank_br_total"
                format: 'inteiro'
                precision: 0
                default: 0
          - id: "select_idh"
            type: "select"
            label: "Selecione"
            preloaded:
              prop: "centralindicadores"
              function: "slice"
              id: ["06_01_09_02", "06_01_09_03", "06_01_09_04"]
              year: "max"
            args:
              - prop: "id"
                named_prop: "cd_indicador"
              - prop: "label"
                named_prop: "ds_indicador_curto"
            selection:
              event: "selection"
              rules:
                api:
                  template: "/indicadoresmunicipais?categorias=nm_municipio,cd_uf,cd_dimensao,ds_indicador_radical,ds_indicador_curto,ds_indicador_prefixo,cd_indicador,nu_competencia,cd_mun_ibge,ds_fonte,vl_indicador,rank_uf,rank_br,rank_uf_total,rank_br_total,pct_uf,pct_br,media_uf,media_br,vl_indicador_br,vl_indicador_uf&filtros=eq-cd_uf-{0},and,eq-cd_indicador-'{1}',and,eq-nu_competencia-nu_competencia_max"
                  args:
                    - named_prop: "idLocalidade"
                    - named_prop: "cd_indicador"
          - type: "text"
            title: ""
            content:
              template: "IDH-Renda: {0} <br/> IDH-Longevidade: {1} <br/> IDH-Educação: {2}"
              preloaded:
                prop: "centralindicadores"
                function: "slice"
                id: ["06_01_09_02", "06_01_09_03", "06_01_09_04"]
                year: "max"
              args:
                - id: "06_01_09_02"
                  function: "calcClassIdh"
                  fn_args:
                    - named_prop: "vl_indicador"
                    - fixed : true
                    - fixed : true
                - id: "06_01_09_03"
                  function: "calcClassIdh"
                  fn_args:
                    - named_prop: "vl_indicador"
                    - fixed : true
                    - fixed : true   
                - id: "06_01_09_04"
                  function: "calcClassIdh"
                  fn_args:
                    - named_prop: "vl_indicador"
                    - fixed : true
                    - fixed : true
        chart_type: "MAP_TOPOJSON"
        api:
          template: "/indicadoresmunicipais?categorias=cd_mun_ibge,nm_municipio,cd_dimensao,ds_indicador_radical,cd_indicador,nu_competencia,ds_fonte,vl_indicador,media_uf,rank_uf,rank_br,latitude,longitude&filtros=eq-cd_uf-{0},and,eq-cd_indicador-'06_01_09_01',and,eq-nu_competencia-nu_competencia_max"
          args:
            - named_prop: "idLocalidade"
          options:
            recalc_min_max: true
            calcs:
              - id: "deviation_idh"
                function: "get_bipolar_scale"
                fn_args: 
                  - fixed: 'vl_indicador'
                  - fixed: 0.6 
              # - id: "idh_level"
              #   function: "get_idh_level"
            formatters:
              - id: "vl_indicador"
                format: 'real'
                precision: 3
              - id: "rank_br"
                format: 'inteiro'
        headers:
          - text: 'Município'
            align: 'left'
            value: 'nm_municipio'
          - text: 'Ano'
            align: 'left'
            value: 'nu_competencia'
          - text: 'Indicador'
            align: 'left'
            value: 'ds_indicador_radical'
          - text: 'IDH'
            value: 'fmt_vl_indicador'
          - text: 'Rank UF'
            value: 'rank_uf'
          - text: 'Rank Brasil'
            value: 'fmt_rank_br'
        chart_options:
          id_field: 'cd_mun_ibge'
          topo_key: "codarea"
          value_field: 'calc_deviation_idh'
          colorScale:
            name: "RdYlBu"
            order: 'asc'
        source:
          desc_field: "ds_fonte"