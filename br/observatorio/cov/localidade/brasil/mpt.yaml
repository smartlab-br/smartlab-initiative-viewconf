principais:
  - relevance: 'lead' 
    cls: 'xs12 xl6'
    rowClass: "pt-0 px-3 pb-5"
    api: 
      fixed: "/thematic/coviddestinacaompt?categorias=1&valor=destinacaovalor&agregacao=SUM"
    args:
      - prop: "value"
        named_prop: 'agr_sum_destinacaovalor'
        format: 'monetario'
        precision: 2
        default: 'Nenhum'
        zero: 'Nenhum'
      - prop: "description"
        fixed: "Total Destinado pelo MPT para<br/>ações de combate à Covid-19"
  - relevance: "lead"
    cls: 'xs12 xl6'
    rowClass: "pt-0 px-3 pb-5"
    api: 
      fixed: "/thematic/coviddenunciampt?categorias=1&agregacao=COUNT"
    args:
      - prop: "value"
        named_prop: "agr_count"
        format: 'inteiro'
      - prop: "description"
        fixed: "Denúncias"
  - relevance: 'lead' 
    cls: 'xs12 xl6'
    rowClass: "pt-0 px-3 pb-5"
    api: 
      fixed: "/thematic/covidclassempt?categorias=1&agregacao=COUNT"
    args:
      - prop: "value"
        named_prop: 'agr_count'
        format: 'inteiro'
        default: 'Nenhum'
        zero: 'Nenhum'
      - prop: "description"
        fixed: "Procedimentos"
  - relevance: 'lead' 
    cls: 'xs12 xl6'
    rowClass: "pt-0 px-3 pb-5"
    api: 
      fixed: "/thematic/coviddocumentompt?categorias=1&agregacao=COUNT&filtros=ne-tipodocumento-'AUDIÊNCIA'"
    args:
      - prop: "value"
        named_prop: 'agr_count'
        format: 'inteiro'
        default: 'Nenhum'
        zero: 'Nenhum'
      - prop: "description"
        fixed: "Documentos"
  - relevance: 'lead' 
    cls: 'xs12 xl6'
    rowClass: "pt-0 px-3 pb-5"
    api: 
      fixed: "/thematic/coviddocumentompt?categorias=1&agregacao=COUNT&filtros=eq-tipodocumento-'AUDIÊNCIA'"
    args:
      - prop: "value"
        named_prop: 'agr_count'
        format: 'inteiro'
        default: 'Nenhum'
        zero: 'Nenhum'
      - prop: "description"
        fixed: "Audiências"
# ========================================================
secoes:
  - id: 'prevalencia_serie'
    cards:
# ========================================================
      - id: "bar_destinacao_prt"
        title:
          fixed: "Destinações por Procuradoria Regional do Trabalho"
        # info:
        #   - type: "text"
        #     title: "Sobre a métrica"
        #     content:
        #       fixed: ""
        title_comment:
          fixed: "Brasil"
          # api: 
          #   fixed: "/thematic/covidcasos?categorias=1&valor=last_available_date&agregacao=MAX,MIN&filtros=eq-place_type-'state'"
          # args:
          #   - named_prop: "agr_min_last_available_date"
          #     format: 'dataDMY'
        description:
          - id: "select_origem"
            type: "select"
            label: "Origem"
            api:
              fixed: "/thematic/coviddestinacaompt?categorias=tipofeito&agregacao=DISTINCT&ordenacao=tipofeito"
            args:
              - prop: "id"
                named_prop: "tipofeito"
              - prop: "label"
                named_prop: "tipofeito"
            selection:
              event: "selection" 
              rules:
                filter: ",and,eq-tipofeito-'{0}'"
                api:
                  args:
                    - named_prop: "tipofeito"
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12 md6'
                reactive: true
                api: 
                  fixed: "/thematic/coviddestinacaompt?categorias=1&valor=destinacaovalor&agregacao=SUM&filtros=eq-1-1"
                args:
                  - prop: "value"
                    named_prop: 'agr_sum_destinacaovalor'
                    format: 'monetario'
                    precision: 2
                    default: 'Nenhum'
                    zero: 'Nenhum'
                  - prop: "description"
                    fixed: "Total Destinado pelo MPT para ações de combate à Covid-19"
          - type: "text"
            title: ""
            content:
              fixed: "Em destaque, o valor total destinado pelo Ministério Público do Trabalho (MPT) para ações de combate à COVID-19. 
                      O gráfico apresenta o valor das destinações por Procuradoria Regional do Trabalho (PRT)."
        chart_type: "BAR"
        api:
          fixed: "/thematic/coviddestinacaompt?categorias=tipofeito,id_prt,nm_prt,nm_unidade&valor=destinacaovalor&agregacao=SUM&ordenacao=-agr_sum_destinacaovalor&filtros=eq-1-1"
          options:
            formatters:
              - id: "agr_sum_destinacaovalor"
                format: 'monetario'
                precision: 2
            calcs:
              - id: "bar_description"
                function: "applyInterpolReplaceDatasetParam"
                fn_args:
                  - fixed: 
                      template: "{0}"
                      args:
                        - named_prop: "agr_sum_destinacaovalor"
                          format: "monetario"
                          collapse:
                            format: 'monetario'
        headers:
          - text: 'Origem'
            align: 'left'
            value: 'tipofeito'
          - text: 'PRT'
            align: 'left'
            value: 'nm_unidade'
          - text: 'Valor'
            value: 'fmt_agr_sum_destinacaovalor'
        chart_options:
          id: "tipofeito"
          x: "nm_prt"
          y: "agr_sum_destinacaovalor"
          text: "calc_bar_description"
          orientation: "vertical"
          stacked: true
          show_x_axis: true
          show_y_axis: false
          # colorArray: ["#a50f15","#fee0d2","#cb181d","#fcbba1","#ef3b2c","#fc9272","#fb6a4a"]  # Reds
          colorArray: ["#cb181d","#fcbba1"]  # Reds
        source:
          desc: "MPT Digital"
# ========================================================
      - id: "treemap_destinacao"
        title:
          fixed: "Destinações por Valores e Beneficiários"
        # info:
        #   - type: "text"
        #     title: "Sobre a métrica"
        #     content:
        #       fixed: ""
        title_comment:
          fixed: "Brasil"
          # api: 
          #   fixed: "/thematic/covidcasos?categorias=1&valor=last_available_date&agregacao=MAX,MIN&filtros=eq-place_type-'state'"
          # args:
          #   - named_prop: "agr_min_last_available_date"
          #     format: 'dataDMY'
        description:
          - id: "select_prt"
            type: "select"
            multiple: true
            label: "MPT"
            api:
              fixed: "/thematic/coviddestinacaompt?categorias=nm_unidade,nm_prt&agregacao=DISTINCT&ordenacao=nm_prt"
              options:
                calcs:
                  - id: "prt"
                    function: "replace_text"
                    fn_args:
                      - fixed: "nm_unidade"
                      - fixed: "PROC. REGIONAL TRABALHO"
                      - fixed: "PRT"
            args:
              - prop: "id"
                named_prop: "nm_prt"
              - prop: "label"
                named_prop: "calc_prt"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-nm_prt-{0}"
                api:
                  args:
                    - named_prop: "nm_prt"
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12 md6'
                reactive: true
                api: 
                  fixed: "/thematic/coviddestinacaompt?categorias=1&valor=destinacaovalor&agregacao=SUM&filtros=eq-1-1"
                args:
                  - prop: "value"
                    named_prop: 'agr_sum_destinacaovalor'
                    format: 'monetario'
                    default: 'Nenhum'
                    zero: 'Nenhum'
                  - prop: "description"
                    fixed: "Total Destinado pelo MPT para ações de combate à Covid-19"
          - type: "text"
            title: ""
            content:
              fixed: "Em destaque, o valor total destinado pelo Ministério Público do Trabalho (MPT) para ações de combate à COVID-19. 
                      O gráfico apresenta o valor das destinações por Procuradoria Regional do Trabalho (PRT)."
        chart_type: "TREEMAP"
        api:
          fixed: "/thematic/coviddestinacaompt?categorias=temacnmp,id_prt,nm_prt,nm_unidade,iddestinacoescnmp,destinacaovalor,destinacaobeneficiario,dtlancamento,destinacaoobjeto&filtros=eq-1-1"
          options:
            formatters:
              - id: "destinacaovalor"
                format: 'monetario'
                precision: 2
              - id: "dtlancamento"
                format: 'dataDMY'
            calcs:
              - id: "treemap_description"
                function: "applyInterpolReplaceDatasetParam"
                fn_args:
                  - fixed: 
                      template: "{0} - {1}"
                      args:
                        # - named_prop: "nm_prt"
                        - named_prop: "destinacaovalor"
                          format: "monetario"
                          collapse:
                            format: 'monetario'
                        - named_prop: "destinacaobeneficiario"
        headers:
          - text: 'PRT'
            align: 'left'
            value: 'nm_unidade'
          - text: 'Tema CNMP'
            value: 'temacnmp'
          - text: 'Valor'
            value: 'fmt_destinacaovalor'
          - text: 'Data Lançamento'
            align: 'left'
            value: 'fmt_dtlancamento'
          - text: 'Beneficiário'
            align: 'left'
            value: 'destinacaobeneficiario'
          - text: 'Finalidade'
            align: 'left'
            value: 'destinacaoobjeto'
        chart_options:
          parent: "id_prt"
          id: "iddestinacoescnmp"
          text: "calc_treemap_description"
          size: "destinacaovalor"
          colorArray: ["#a50f15","#fee0d2","#67000d","#fff5f0","#cb181d","#fcbba1","#ef3b2c","#fc9272","#fb6a4a",
                      "#7f2704","#fff5eb","#a63603","#fee6ce","#d94801","#fdd0a2","#f16913","#fdae6b","#fd8d3c",
                      "#d9ef8b","#a50026","#ffffbf","#d73027","#fee08b","#f46d43","#fdae61"]  # Reds/Oranges/RdYlGn
        source:
          desc: "MPT Digital"
# ========================================================
      - id: "line_denuncias"
        title:
          fixed: "Denúncias relacionadas à COVID-19"
        # info:
        #   - type: "text"
        #     title: "Sobre a métrica"
        #     content:
        #       fixed: ""
        title_comment:
          fixed: "Brasil"
        description:
          - id: "select_prt"
            type: "select"
            multiple: true
            label: "MPT"
            api:
              fixed: "/thematic/coviddenunciampt?categorias=nm_unidade,nm_prt&agregacao=DISTINCT&ordenacao=nm_prt"
              options:
                calcs:
                  - id: "prt"
                    function: "replace_text"
                    fn_args:
                      - fixed: "nm_unidade"
                      - fixed: "PROC. REGIONAL TRABALHO"
                      - fixed: "PRT"
            args:
              - prop: "id"
                named_prop: "nm_prt"
              - prop: "label"
                named_prop: "calc_prt"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-nm_prt-{0}"
                api:
                  args:
                    - named_prop: "nm_prt"
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12 md6'
                reactive: true
                api: 
                  fixed: "/thematic/coviddenunciampt?categorias=1&agregacao=COUNT&filtros=eq-1-1"
                args:
                  - prop: "value"
                    named_prop: 'agr_count'
                    format: 'inteiro'
                    default: "Nenhum"
                    zero: "Nenhum"
                  - prop: "description"
                    fixed: 'Denúncias COVID-19'
          - type: "text"
            title: ""
            content:
              fixed: "Em destaque, o número total de denúncias ao Ministério Público do Trabalho (MPT) relacionadas à COVID-19. 
                      O gráfico apresenta a série histórica com o total de denúncias por dia. 
                      É possível selecionar uma ou mais Procuradorias Regionais do Trabalho (PRT) no filtro acima."
        chart_type: "LINE"
        api:
          fixed: "/thematic/coviddenunciampt?categorias='denuncia'-cd_indicador,data_denuncia,data_denuncia-data_denuncia2&agregacao=COUNT&ordenacao=data_denuncia&filtros=eq-1-1"
          options:
            formatters:
              - id: "agr_count"
                format: 'inteiro'
              - id: "data_denuncia"
                format: "dataYMD"
              - id: "data_denuncia2"
                format: "dataDMY"
        headers:
          - text: 'Data Denúncia'
            align: 'left'
            value: 'fmt_data_denuncia2'
          - text: 'Número de denúncias'
            value: 'fmt_agr_count'
        chart_options:
          id: "cd_indicador"
          x: "fmt_data_denuncia"
          y: "agr_count"
          x_options:
            labelMaxNumber: 15
          hide_legend: true
          colorArray: ["#cb181d"]  # red
        source:
          desc: "MPT Digital"          
# ========================================================
      - id: "bar_classe"
        title:
          fixed: "Procedimentos com Atuação no Combate à COVID-19 por Classe"
        # info:
        #   - type: "text"
        #     title: "Sobre a métrica"
        #     content:
        #       fixed: ""
        title_comment:
          fixed: "Brasil"
          # api: 
          #   fixed: "/thematic/covidcasos?categorias=1&valor=last_available_date&agregacao=MAX,MIN&filtros=eq-place_type-'state'"
          # args:
          #   - named_prop: "agr_min_last_available_date"
          #     format: 'dataDMY'
        description:
          - id: "select_prt"
            type: "select"
            multiple: true
            label: "MPT"
            api:
              fixed: "/thematic/covidclassempt?categorias=nm_unidade,nm_prt&agregacao=DISTINCT&ordenacao=nm_prt"
              options:
                calcs:
                  - id: "prt"
                    function: "replace_text"
                    fn_args:
                      - fixed: "nm_unidade"
                      - fixed: "PROC. REGIONAL TRABALHO"
                      - fixed: "PRT"
            args:
              - prop: "id"
                named_prop: "nm_prt"
              - prop: "label"
                named_prop: "calc_prt"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-nm_prt-{0}"
                api:
                  args:
                    - named_prop: "nm_prt"
          - id: "select_classe"
            type: "select"
            multiple: true
            label: "Classe"
            api:
              fixed: "/thematic/covidclassempt?categorias=classe,descricao_classe&agregacao=DISTINCT&ordenacao=classe"
            args:
              - prop: "id"
                named_prop: "classe"
              - prop: "label"
                named_prop: "descricao_classe"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-classe-{0}"
                api:
                  args:
                    - named_prop: "classe"
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12 md6'
                reactive: true
                api: 
                  fixed: "/thematic/covidclassempt?categorias=1&agregacao=COUNT&filtros=eq-1-1"
                args:
                  - prop: "value"
                    named_prop: 'agr_count'
                    format: 'inteiro'
                    default: "Sem Registros"
                    zero: "Nenhum"
                  - prop: "description"
                    fixed: 'Procedimentos'
          - type: "text"
            title: ""
            content:
              fixed: "Em destaque, o número total de procedimentos do Ministério Público do Trabalho (MPT) com atuação no combate à COVID-19. 
                      O gráfico apresenta o número de procedimentos por classe. 
                      É possível selecionar uma ou mais Procuradorias Regionais do Trabalho (PRT) no filtro acima."
        chart_type: "BAR"
        api:
          fixed: "/thematic/covidclassempt?categorias=descricao_classe,classe&agregacao=COUNT&ordenacao=-agr_count&filtros=eq-1-1"
          options:
            formatters:
              - id: "agr_count"
                format: 'inteiro'
            calcs:
              - id: "bar_description"
                function: "applyInterpolReplaceDatasetParam"
                fn_args:
                  - fixed: 
                      template: "{0} - {1}"
                      args:
                        - named_prop: "classe"
                        - named_prop: "agr_count"
                          format: 'inteiro'
        headers:
          - text: 'Classe'
            align: 'left'
            value: 'descricao_classe'
          - text: 'Número de procedimentos'
            value: 'fmt_agr_count'
        chart_options:
          id: "descricao_classe"
          x: "classe"
          y: "agr_count"
          text: "calc_bar_description"
          orientation: "vertical"
          show_x_axis: true
          show_y_axis: false
          colorScale:
            name: "Reds"
            type: "singleHue"
            order: "desc"
        source:
          desc: "MPT Digital"
# ========================================================
      - id: "treemap_reg_classe"
        title:
          fixed: "Procedimentos com Atuação no Combate à COVID-19 por Regional e Classe"
        # info:
        #   - type: "text"
        #     title: "Sobre a métrica"
        #     content:
        #       fixed: ""
        title_comment:
          fixed: "Brasil"
          # api: 
          #   fixed: "/thematic/covidcasos?categorias=1&valor=last_available_date&agregacao=MAX,MIN&filtros=eq-place_type-'state'"
          # args:
          #   - named_prop: "agr_min_last_available_date"
          #     format: 'dataDMY'
        description:
          - id: "select_prt"
            type: "select"
            multiple: true
            label: "MPT"
            api:
              fixed: "/thematic/covidclassempt?categorias=nm_unidade,nm_prt&agregacao=DISTINCT&ordenacao=nm_prt"
              options:
                calcs:
                  - id: "prt"
                    function: "replace_text"
                    fn_args:
                      - fixed: "nm_unidade"
                      - fixed: "PROC. REGIONAL TRABALHO"
                      - fixed: "PRT"
            args:
              - prop: "id"
                named_prop: "nm_prt"
              - prop: "label"
                named_prop: "calc_prt"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-nm_prt-{0}"
                api:
                  args:
                    - named_prop: "nm_prt"
          - id: "select_classe"
            type: "select"
            multiple: true
            label: "Classe"
            api:
              fixed: "/thematic/covidclassempt?categorias=classe,descricao_classe&agregacao=DISTINCT&ordenacao=classe"
            args:
              - prop: "id"
                named_prop: "classe"
              - prop: "label"
                named_prop: "descricao_classe"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-classe-{0}"
                api:
                  args:
                    - named_prop: "classe"
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12 md6'
                reactive: true
                api: 
                  fixed: "/thematic/covidclassempt?categorias=1&agregacao=COUNT&filtros=eq-1-1"
                args:
                  - prop: "value"
                    named_prop: 'agr_count'
                    format: 'inteiro'
                    default: "Sem Registros"
                    zero: "Nenhum"
                  - prop: "description"
                    fixed: 'Procedimentos'
          - type: "text"
            title: ""
            content:
              fixed: "Em destaque, o número total de procedimentos do Ministério Público do Trabalho (MPT) com atuação no combate à COVID-19. 
                      O gráfico apresenta o número de procedimentos por regional e classe. 
                      É possível selecionar uma ou mais Procuradorias Regionais do Trabalho (PRT) e classes nos filtros acima."
        chart_type: "BAR"
        api:
          fixed: "/thematic/covidclassempt?categorias=nm_unidade,nm_prt,cd_prt,classe,descricao_classe&agregacao=COUNT&ordenacao=nm_prt,-agr_count&filtros=eq-1-1"
          options:
            formatters:
              - id: "agr_count"
                format: 'inteiro'
        headers:
          - text: 'Classe'
            align: 'left'
            value: 'descricao_classe'
          - text: 'PRT'
            align: 'left'
            value: 'nm_unidade'
          - text: 'Número de procedimentos'
            value: 'fmt_agr_count'
        chart_options:
          id: "descricao_classe"
          x: "nm_prt"
          y: "agr_count"
          text: "fmt_agr_count"
          orientation: "vertical"
          show_x_axis: true
          show_y_axis: true
          stacked: true
          colorArray: ["#a50f15","#fee0d2","#cb181d","#fcbba1","#ef3b2c","#fc9272","#fb6a4a"]  # Reds
          # colorArray: ["#a50f15","#cb181d","#ef3b2c","#fb6a4a","#fc9272","#fcbba1","#fee0d2"]  # Reds
        source:
          desc: "MPT Digital"
# =====================================================
      - id: "multi_temas"
        type: "multiple-charts"
        title: 
          fixed: "Procedimentos com Atuação no Combate à COVID-19 por Tema"
        title_comment:
          fixed: "Brasil"
        # info:
        #   - type: "text"
        #     title: "Sobre a métrica"
        #     content:
        #       fixed: "Sem observações adicionais. Vide descrição"
        description:
          - id: "select_prt"
            type: "select"
            multiple: true
            label: "MPT"
            api:
              fixed: "/thematic/covidclassempt?categorias=nm_unidade,nm_prt,cd_prt&agregacao=DISTINCT&ordenacao=nm_prt"
              options:
                calcs:
                  - id: "prt"
                    function: "replace_text"
                    fn_args:
                      - fixed: "nm_unidade"
                      - fixed: "PROC. REGIONAL TRABALHO"
                      - fixed: "PRT"
            args:
              - prop: "id"
                named_prop: "cd_prt"
              - prop: "label"
                named_prop: "calc_prt"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-unidade-{0}"
                api:
                  args:
                    - named_prop: "cd_prt"
          - id: "select_tema"
            type: "select"
            multiple: true
            label: "Área Temática"
            api:
              fixed: "/thematic/covidtemampt?categorias=cod_tema_principal,desc_tema_principal&agregacao=DISTINCT&ordenacao=cod_tema_principal"
            args:
              - prop: "id"
                named_prop: "cod_tema_principal"
              - prop: "label"
                named_prop: "desc_tema_principal"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-cod_tema_principal-{0}"
                api:
                  args:
                    - named_prop: "cod_tema_principal"
          - id: "select_classe"
            type: "select"
            multiple: true
            label: "Classe"
            api:
              fixed: "/thematic/covidclassempt?categorias=classe,descricao_classe&agregacao=DISTINCT&ordenacao=classe"
            args:
              - prop: "id"
                named_prop: "classe"
              - prop: "label"
                named_prop: "descricao_classe"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-classe-{0}"
                api:
                  args:
                    - named_prop: "classe"
          - type: "text"
            title: ""
            content:
              fixed: "Os gráficos apresentam a distribuição das Áreas Temáticas e dos Temas nos procedimentos do Ministério Público do Trabalho (MPT) com atuação no combate à COVID-19.
                      É possível selecionar uma ou mais Procuradorias Regionais do Trabalho (PRT) ou uma ou mais Áreas Temáticas nos filtros acima."
        charts:
          - id: "treemap_tema_area"
            title: "Demandas por Área Temática" 
            cls: "xs12 md6"
            type: "TREEMAP"
            api: 
              fixed: "/thematic/covidtemampt?categorias=cod_tema_principal,desc_tema_principal&agregacao=count&filtros=nn-cod_tema,and,ne-cod_tema_principal-'10.'"
              options:
                formatters:
                  - id: "agr_count"
                    format: 'inteiro'
                calcs:
                  - id: "treemap_description"
                    function: "applyInterpolReplaceDatasetParam"
                    fn_args:
                      - fixed: 
                          template: "{0} - {1}"
                          args:
                            - named_prop: "desc_tema_principal"
                            - named_prop: "agr_count"
                              format: 'inteiro'
                  - id: "num_tema_principal"
                    function: "get_number"
                    fn_args:
                      - named_prop: "cod_tema_principal"
            headers:
              - text: 'Área Temática'
                align: 'left'
                value: 'desc_tema_principal'
              - text: 'Qtde'
                value: 'fmt_agr_count'
            options:
              id: "calc_num_tema_principal"
              text: "calc_treemap_description"
              size: "agr_count"
              colorScale:
                type: "categorical"
          - id: "treemap_tema"
            title: "Demandas por Tema"
            cls: "xs12 md6"
            type: "TREEMAP"
            api: 
              fixed: "/thematic/covidtemampt?categorias=cod_tema_principal,desc_tema_principal,cod_tema,desc_tema&agregacao=count&filtros=nn-cod_tema,and,ne-cod_tema_principal-'10.'"
              options:
                formatters:
                  - id: "agr_count"
                    format: 'inteiro'
                calcs:
                  - id: "treemap_description"
                    function: "applyInterpolReplaceDatasetParam"
                    fn_args:
                      - fixed: 
                          template: "{0}{1} - {2}"
                          args:
                            - named_prop: "cod_tema"
                            - named_prop: "desc_tema"
                            - named_prop: "agr_count"
                              format: 'inteiro'
                  - id: "num_tema_principal"
                    function: "get_number"
                    fn_args:
                      - named_prop: "cod_tema_principal"
                  - id: "tema"
                    function: "applyInterpolReplaceDatasetParam"
                    fn_args:
                      - fixed: 
                          template: "{0}{1}"
                          args:
                            - named_prop: "cod_tema"
                            - named_prop: "desc_tema"
            headers:
              - text: 'Área Temática'
                align: 'left'
                value: 'desc_tema_principal'
              - text: 'Tema'
                align: 'left'
                value: 'calc_tema'
              - text: 'Qtde'
                value: 'fmt_agr_count'
            options:
              parent: "calc_num_tema_principal"
              id: "cod_tema"
              text: "calc_treemap_description"
              size: "agr_count"
              colorScale:
                type: "categorical"
        source:
          desc: "MPT Digital"
# ========================================================
      - id: "bar_documentos"
        title:
          fixed: "Documentos com Atuação no Combate à COVID-19 por Tipo"
        # info:
        #   - type: "text"
        #     title: "Sobre a métrica"
        #     content:
        #       fixed: ""
        title_comment:
          fixed: "Brasil"
        description:
          - id: "select_prt"
            type: "select"
            multiple: true
            label: "MPT"
            api:
              fixed: "/thematic/coviddocumentompt?categorias=nm_unidade,nm_prt&agregacao=DISTINCT&ordenacao=nm_prt"
              options:
                calcs:
                  - id: "prt"
                    function: "replace_text"
                    fn_args:
                      - fixed: "nm_unidade"
                      - fixed: "PROC. REGIONAL TRABALHO"
                      - fixed: "PRT"
            args:
              - prop: "id"
                named_prop: "nm_prt"
              - prop: "label"
                named_prop: "calc_prt"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-nm_prt-{0}"
                api:
                  args:
                    - named_prop: "nm_prt"
          - id: "select_tipo"
            type: "select"
            multiple: true
            label: "Tipo"
            api:
              fixed: "/thematic/coviddocumentompt?categorias=tipodocumento,descricao_tipodocumento&agregacao=DISTINCT&ordenacao=tipodocumento"
            args:
              - prop: "id"
                named_prop: "tipodocumento"
              - prop: "label"
                named_prop: "descricao_tipodocumento"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-tipodocumento-{0}"
                api:
                  args:
                    - named_prop: "tipodocumento"
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12 md6'
                reactive: true
                api: 
                  fixed: "/thematic/coviddocumentompt?categorias=1&agregacao=COUNT&filtros=ne-tipodocumento-'AUDIÊNCIA'"
                args:
                  - prop: "value"
                    named_prop: 'agr_count'
                    format: 'inteiro'
                    default: "Nenhum"
                    zero: "Nenhum"
                  - prop: "description"
                    fixed: 'Documentos COVID-19'
              - relevance: 'high'
                cls: 'xs12 md6'
                reactive: true
                api: 
                  fixed: "/thematic/coviddocumentompt?categorias=1&agregacao=COUNT&filtros=eq-tipodocumento-'AUDIÊNCIA'"
                args:
                  - prop: "value"
                    named_prop: 'agr_count'
                    format: 'inteiro'
                    default: "Nenhuma"
                    zero: "Nenhuma"
                  - prop: "description"
                    fixed: 'Audiências COVID-19'
          - type: "text"
            title: ""
            content:
              fixed: "Em destaque, o número total de documentos do Ministério Público do Trabalho (MPT) com atuação no combate à COVID-19. 
                      O gráfico apresenta o número de documentos por tipo. 
                      É possível selecionar uma ou mais Procuradorias Regionais do Trabalho (PRT) no filtro acima."
        chart_type: "BAR"
        api:
          fixed: "/thematic/coviddocumentompt?categorias=tipodocumento,descricao_tipodocumento&agregacao=COUNT&ordenacao=-agr_count&filtros=eq-1-1"
          options:
            formatters:
              - id: "agr_count"
                format: 'inteiro'
            calcs:
              - id: "bar_description"
                function: "applyInterpolReplaceDatasetParam"
                fn_args:
                  - fixed: 
                      template: "{0} - {1}"
                      args:
                        - named_prop: "tipodocumento"
                        - named_prop: "agr_count"
                          format: 'inteiro'
        headers:
          - text: 'Documento'
            align: 'left'
            value: 'descricao_tipodocumento'
          - text: 'Número de documentos'
            value: 'fmt_agr_count'
        chart_options:
          id: "descricao_tipodocumento"
          x: "tipodocumento"
          y: "agr_count"
          text: "calc_bar_description"
          show_x_axis: true
          show_y_axis: false
          orientation: "vertical"
          colorScale:
            name: "Reds"
            type: "singleHue"
            order: "desc"
        source:
          desc: "MPT Digital"
# ========================================================
      - id: "treemap_reg_documento"
        title:
          fixed: "Documentos com Atuação no Combate à COVID-19 por Regional e Tipo"
        # info:
        #   - type: "text"
        #     title: "Sobre a métrica"
        #     content:
        #       fixed: ""
        title_comment:
          fixed: "Brasil"
          # api: 
          #   fixed: "/thematic/covidcasos?categorias=1&valor=last_available_date&agregacao=MAX,MIN&filtros=eq-place_type-'state'"
          # args:
          #   - named_prop: "agr_min_last_available_date"
          #     format: 'dataDMY'
        description:
          - id: "select_prt"
            type: "select"
            multiple: true
            label: "MPT"
            api:
              fixed: "/thematic/coviddocumentompt?categorias=nm_unidade,nm_prt&agregacao=DISTINCT&ordenacao=nm_prt"
              options:
                calcs:
                  - id: "prt"
                    function: "replace_text"
                    fn_args:
                      - fixed: "nm_unidade"
                      - fixed: "PROC. REGIONAL TRABALHO"
                      - fixed: "PRT"
            args:
              - prop: "id"
                named_prop: "nm_prt"
              - prop: "label"
                named_prop: "calc_prt"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-nm_prt-{0}"
                api:
                  args:
                    - named_prop: "nm_prt"
          - id: "select_tipo"
            type: "select"
            multiple: true
            label: "Tipo"
            api:
              fixed: "/thematic/coviddocumentompt?categorias=tipodocumento,descricao_tipodocumento&agregacao=DISTINCT&ordenacao=tipodocumento"
            args:
              - prop: "id"
                named_prop: "tipodocumento"
              - prop: "label"
                named_prop: "descricao_tipodocumento"
            selection:
              event: "selection" 
              rules:
                filter: ",and,in-tipodocumento-{0}"
                api:
                  args:
                    - named_prop: "tipodocumento"
          - type: "minicards"
            cards:
              - relevance: 'high'
                cls: 'xs12 md6'
                reactive: true
                api: 
                  fixed: "/thematic/coviddocumentompt?categorias=1&agregacao=COUNT&filtros=ne-tipodocumento-'AUDIÊNCIA'"
                args:
                  - prop: "value"
                    named_prop: 'agr_count'
                    format: 'inteiro'
                    default: "Nenhum"
                    zero: "Nenhum"
                  - prop: "description"
                    fixed: 'Documentos COVID-19'
              - relevance: 'high'
                cls: 'xs12 md6'
                reactive: true
                api: 
                  fixed: "/thematic/coviddocumentompt?categorias=1&agregacao=COUNT&filtros=eq-tipodocumento-'AUDIÊNCIA'"
                args:
                  - prop: "value"
                    named_prop: 'agr_count'
                    format: 'inteiro'
                    default: "Nenhuma"
                    zero: "Nenhuma"
                  - prop: "description"
                    fixed: 'Audiências COVID-19'
          - type: "text"
            title: ""
            content:
              fixed: "Em destaque, o número total de documentos do Ministério Público do Trabalho (MPT) com atuação no combate à COVID-19. 
                      O gráfico apresenta o número de documentos por regional e tipo. 
                      É possível selecionar uma ou mais Procuradorias Regionais do Trabalho (PRT) e tipos nos filtros acima."
        chart_type: "BAR"
        api:
          fixed: "/thematic/coviddocumentompt?categorias=nm_unidade,nm_prt,cd_prt,tipodocumento,descricao_tipodocumento&agregacao=COUNT&ordenacao=nm_prt,-agr_count&filtros=eq-1-1"
          options:
            formatters:
              - id: "agr_count"
                format: 'inteiro'
        headers:
          - text: 'Tipo Documento'
            align: 'left'
            value: 'descricao_tipodocumento'
          - text: 'PRT'
            align: 'left'
            value: 'nm_unidade'
          - text: 'Número de documentos'
            value: 'fmt_agr_count'
        chart_options:
          id: "descricao_tipodocumento"
          x: "nm_prt"
          y: "agr_count"
          text: "fmt_agr_count"
          orientation: "vertical"
          show_x_axis: true
          show_y_axis: true
          stacked: true
          colorArray: ["#a50f15","#fee0d2","#cb181d","#fcbba1","#ef3b2c","#fc9272","#fb6a4a"]  # Reds
        source:
          desc: "MPT Digital"
